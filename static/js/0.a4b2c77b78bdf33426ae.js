webpackJsonp([0],{"/sc5":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("6KBz"),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-analysis"},[a("el-header",{attrs:{height:"70px"}},[a("span",{staticClass:"asis-title"},[e._v(e._s(e.asisName)+"Â "+e._s(e.$t("asis.MoveLine")))]),e._v(" "),a("span",{staticClass:"more-option-wrapper",on:{click:e.showCollapse}},[a("span",{staticClass:"more-option-text"},[e._v(e._s(e.$t("asis.moreOp")))]),e._v(" "),a("i",{class:e.moreOptVisible?"el-icon-arrow-down more-option-arrow":"el-icon-arrow-down more-option-arrow more-option-up"})])]),e._v(" "),a("moveline-option",{directives:[{name:"show",rawName:"v-show",value:e.moreOptVisible,expression:"moreOptVisible"}],ref:"init",attrs:{mallData:e.mallData},on:{reportTime:e.reportHandler,initData:e.initTab}}),e._v(" "),a("div",{staticClass:"element-main base-main"},[a("router-view",{attrs:{propparam:e.propParams}})],1)],1)},staticRenderFns:[]},o=function(e){a("YeOf")},r=a("VU/8")(i.a,s,!1,o,"data-v-88035700",null);t.default=r.exports},"6KBz":function(e,t,a){"use strict";(function(e){var i=a("CdQ0");t.a={data:function(){return{moreOptVisible:!1,mallData:[],asisName:"",asisLevel:"",propParams:{}}},components:{"moveline-option":i.a},created:function(){var t=this;window.addEventListener("resize",function(){try{var a={chart1:e("#cusGraphChart")[0],chart2:e("#mGraphChart")[0],chart3:e("#graphChart")[0],chart4:e("#wGraphChart")[0],chart5:e("#yGraphChart")[0]};for(var i in a)if(a.hasOwnProperty(i)&&void 0!=a[i]){a[i]=t.$echarts.init(a[i]);a[i].resize()}}catch(e){}})},mounted:function(){this.getMallOpt(),this.showCollapse()},methods:{showCollapse:function(){var t=this,a="",i="",s="",o="";a=this.getStyleFn(".el-header","height"),i=this.getStyleFn(".analysis-wrapper .el-header","height"),this.moreOptVisible?(this.moreOptVisible=!1,o=a+i+8+"px",e(".base-main").animate({marginTop:o})):(this.moreOptVisible=!0,setTimeout(function(){s=t.getStyleFn(".analysis-option-wrapper","height"),o=a+i+s+8+"px",e(".base-main").animate({marginTop:o})},100))},getMallOpt:function(){var e=this;this.axios.get("/malls",{params:{accountId:this.$cookie.get("accountId"),status:1,_t:Date.parse(new Date)/1e3}}).then(function(t){var a="",i=null;if(t.data.data.length>=1){var s=window.sessionStorage.getItem("mallId");s&&Number(s),t.data.data.forEach(function(t,i){e.mallData.push(t),s&&t.id==s&&(a=t.name)}),e.asisName=a||t.data.data[0].name,i=s?Number(s):t.data.data[0].id,e.$refs.init.initAsis(i)}})},initTab:function(e){switch(e.asis_date){case"day":this.$router.push("/customer/trafficeline/daily"),this.propParams={dateType:"/trafficeline/daily",data:e};break;case"week":this.$router.push("/customer/trafficeline/weekly"),this.propParams={dateType:"/trafficeline/weekly",data:e};break;case"month":this.$router.push("/customer/trafficeline/monthly"),this.propParams={dateType:"/trafficeline/monthly",data:e};break;case"year":this.$router.push("/customer/trafficeline/yearly"),this.propParams={dateType:"/trafficeline/yearly",data:e};break;case"custom":this.$router.push("/customer/trafficeline/customly"),this.propParams={dateType:"/trafficeline/customly",data:e}}},reportHandler:function(e){switch(this.asisName=e.asis_tit,e.asis_date){case"day":this.$router.push("/customer/trafficeline/daily"),this.propParams={dateType:"/trafficeline/daily",data:e};break;case"week":this.$router.push("/customer/trafficeline/weekly"),this.propParams={dateType:"/trafficeline/weekly",data:e};break;case"month":this.$router.push("/customer/trafficeline/monthly"),this.propParams={dateType:"/trafficeline/monthly",data:e};break;case"year":this.$router.push("/customer/trafficeline/yearly"),this.propParams={dateType:"/trafficeline/yearly",data:e};break;case"custom":this.$router.push("/customer/trafficeline/customly"),this.propParams={dateType:"/trafficeline/customly",data:e}}}}}}).call(t,a("7t+N"))},CdQ0:function(e,t,a){"use strict";var i=a("mvHQ"),s=a.n(i),o={props:{mallData:Array},data:function(){return{seraching:!1,pickerOptions1:{disabledDate:function(e){return e.getTime()>Date.now()}},weekPickerOpt:{firstDayOfWeek:1},tabItem:[],panelObj:{mallPanel:!1,floorPanel:!1,formatPanel:!1,ioPanel:!1,shopPanel:!1},analyasisTime:[{label:"day",value:"day",is_active:"time-btn"},{label:"week",value:"week",is_active:"time-btn"},{label:"month",value:"month",is_active:"time-btn"},{label:"year",value:"year",is_active:"time-btn"},{label:"custom",value:"custom",is_active:"time-btn"}],ReportVal:"day",reportTime:{isDay:!1,isWeek:!1,isMonth:!1,isYear:!1,isCustom:!1},dayTime:"",weekTime:"",monthTime:"",yearTime:"",customTime:"",mallVal:"",floorVal:"",formatVal:"",ioVal:"",zoneVal:"",asisLevel:"",floorData:[],zoneData:[],formatData:[],ioData:[],paramId:"",gateVal:"",floorItem:"",zoneItem:"",floorList:[],zoneList:[],gateData:[],shopFloorData:[],shopFloorId:"",shopFloorVal:"",floorImg:"",initFlag:!0}},created:function(){if(this.tabItem=[],"mall"===this.$Project){var e={floor:"floor"};for(var t in e)this.tabItem.push({label:t,value:e[t],className:"analysis-item"})}else this.tabItem.push({label:"floor",value:"floor",className:"analysis-item"})},methods:{i18nFormatter:function(e){var t="asisTab."+e;return this.$t(t)},initAsis:function(e){this.mallVal=e,this.getFloorOpt(e),this.tabClickHandle(0),this.DateHandle("day")},tabClickHandle:function(e){if("analysis-item"===this.tabItem[e].className){this.tabItem.forEach(function(e){e.className="analysis-item"}),this.tabItem[e].className="analysis-item tabs-active";for(var t in this.panelObj)this.panelObj[t]=!1;switch(this.asisLevel="",this.tabItem[e].value){case"floor":this.panelObj.floorPanel=!0,this.asisLevel="floor"}}},getFloorOpt:function(e){var t=this;this.floorData=[],this.shopFloorData=[],this.floorVal="",this.shopFloorId="",this.shopFloorVal="",this.axios.get("/floors",{params:{mallId:e,accountId:this.$cookie.get("accountId"),_t:Date.parse(new Date)/1e3}}).then(function(e){if(e.data.data.length>0){var a=JSON.parse(s()(e.data.data));if(a.unshift({name:t.$t("asisTab.all"),id:""}),t.floorData=e.data.data,t.floorVal=e.data.data[0].id,t.paramId=e.data.data[0].id,t.floorImg=e.data.data[0].floorPlan,t.shopFloorData=a,t.shopFloorId=a[0].id,t.shopFloorVal=a[0].id,t.initFlag){var i={asis_level:t.asisLevel,asis_date:"day",asis_time:[t.dayTime,t.dayTime],asis_org:t.paramId,asis_img:t.floorImg};t.$emit("initData",i),t.initFlag=!1}}}).catch(function(e){})},dealDate:function(){var e=[],t="",a="";if(this.reportTime.isDay)e=[this.dayTime,this.dayTime];else if(this.reportTime.isWeek)e=[this.getWeekTime(this.weekTime,!1),this.getWeekTime(this.weekTime,!0)];else if(this.reportTime.isMonth){if(this.monthTime.getMonth()===(new Date).getMonth()&&this.monthTime.getFullYear()===(new Date).getFullYear())a=dateUnit.dateFormat(this.monthTime,"yyyy-MM-dd"),(t=dateUnit.dateFormat(new Date(Date.parse(this.monthTime.getFullYear()+"/"+(this.monthTime.getMonth()+1)+"/01")),"yyyy-MM-dd"))==a&&(a=dateUnit.dateFormat(new Date,"yyyy-MM-dd"));else{t=this.monthTime,a=new Date(Date.parse(this.dayAdd(this.monthTime,31).replace(/\-/,"/")));var i=this.unitTime(t,a,"month");t=i.startTime,a=i.endTime}e=[t,a]}else if(this.reportTime.isYear){if(this.yearTime.getFullYear()===(new Date).getFullYear())a=dateUnit.dateFormat(this.yearTime,"yyyy-MM-dd"),(t=dateUnit.dateFormat(new Date(Date.parse(this.yearTime.getFullYear()+"/01/01")),"yyyy-MM-dd"))==a&&(a=dateUnit.dateFormat(new Date,"yyyy-MM-dd"));else{t=this.yearTime,a=new Date(Date.parse(this.dayAdd(this.yearTime,365).replace(/\-/,"/")));var s=this.unitTime(t,a,"year");t=s.startTime,a=s.endTime}e=[t,a]}else this.reportTime.isCustom&&(e=this.customTime);return e},DateHandle:function(e){for(var t in this.reportTime)this.reportTime[t]=!1;switch(e){case"day":this.reportTime.isDay=!0;break;case"week":this.reportTime.isWeek=!0;break;case"month":this.reportTime.isMonth=!0;break;case"year":this.reportTime.isYear=!0;break;case"custom":this.reportTime.isCustom=!0}},timeHandle:function(e){if("time-btn"===this.analyasisTime[e].is_active){this.analyasisTime.forEach(function(e){e.is_active="time-btn"});for(var t in this.reportTime)this.reportTime[t]=!1;this.analyasisTime[e].is_active="time-btn active-time";switch(this.analyasisTime[e].value){case"day":this.reportTime.isDay=!0;break;case"week":this.reportTime.isWeek=!0;break;case"month":this.reportTime.isMonth=!0;break;case"year":this.reportTime.isYear=!0;break;case"custom":this.reportTime.isCustom=!0}}},mallChange:function(){this.getFloorOpt(this.mallVal)},getFloorImg:function(e){var t=this;this.floorData.forEach(function(a,i){a.id==e&&(t.floorImg=a.floorPlan)})},gateMallChange:function(){this.gateLevel="all",this.gateLevelChange()},floorChange:function(){this.getZoneOpt(this.mallVal,this.shopFloorVal)},confirmCondition:function(){var e=this,t={asis_level:"",asis_date:"",asis_time:"",asis_org:"",asis_kpi:"",asis_format:""};switch(this.asisLevel){case"mall":this.paramId=this.mallVal,t.asis_tit=this.getItemName(this.mallData,this.paramId);break;case"floor":this.paramId=this.floorVal,t.asis_tit=this.getItemName(this.mallData,this.mallVal)+"-"+this.getItemName(this.floorData,this.paramId);break;case"format":t.asis_format=this.formatVal,this.paramId=this.mallVal;break;case"gate":this.paramId=this.gateVal,t.asis_tit=this.getItemName(this.mallData,this.mallVal)+"-"+this.getItemName(this.gateData,this.paramId);break;case"zone":this.paramId=this.zoneVal,t.asis_tit=this.getItemName(this.mallData,this.mallVal)+"-"+this.getItemName(this.zoneData,this.paramId)}this.paramId&&(this.floorData.forEach(function(t){t.id==e.paramId&&(e.floorImg=t.floorPlan)}),this.reportTime.isDay?(t.asis_level=this.asisLevel,t.asis_date="day",t.asis_time=this.dealDate(),t.asis_org=this.paramId,t.asis_img=this.floorImg,this.$emit("reportTime",t)):this.reportTime.isWeek?(t.asis_level=this.asisLevel,t.asis_date="week",t.asis_time=this.dealDate(),t.asis_org=this.paramId,t.asis_img=this.floorImg,this.$emit("reportTime",t)):this.reportTime.isMonth?(t.asis_level=this.asisLevel,t.asis_date="month",t.asis_time=this.dealDate(),t.asis_org=this.paramId,t.asis_img=this.floorImg,this.$emit("reportTime",t)):this.reportTime.isYear?(t.asis_level=this.asisLevel,t.asis_date="year",t.asis_time=this.dealDate(),t.asis_org=this.paramId,t.asis_img=this.floorImg,this.$emit("reportTime",t)):(t.asis_level=this.asisLevel,t.asis_date="custom",t.asis_time=this.dealDate(),t.asis_org=this.paramId,t.asis_img=this.floorImg,this.$emit("reportTime",t)))},getItemName:function(e,t){var a="",i=t.toString().split(",")[0];return e.forEach(function(e){e.id==i&&(a=e.name)}),a},resetRefresh:function(){this.tabClickHandle(0),this.ReportVal="day",this.DateHandle(this.ReportVal),this.mallVal=this.mallData[0].id,this.dayTime=dateUnit.dateFormat(new Date,"yyyy-MM-dd"),this.weekTime=new Date,this.monthTime=new Date,this.yearTime=new Date}},mounted:function(){this.dayTime=this.dayTime?this.dayTime:dateUnit.dateFormat(new Date,"yyyy-MM-dd"),this.customTime=[this.dayReduce(new Date,30),dateUnit.dateFormat(new Date,"yyyy-MM-dd")],this.weekTime=this.weekTime?this.weekTime:new Date,this.monthTime=this.monthTime?this.monthTime:new Date,this.yearTime=this.yearTime?this.yearTime:new Date}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"analysis-option-wrapper"},[a("div",{staticClass:"analysis-level-wrapper"},[a("div",{staticClass:"analysis-level-left"},[a("i",{staticClass:"el-icon-search"}),e._v(" "),a("span",{staticClass:"analysis-level-text"},[e._v(e._s(e.$t("asisTab.level")))])]),e._v(" "),a("div",{staticClass:"analysis-level-right"},[a("ul",{staticClass:"analysis-type-box"},e._l(e.tabItem,function(t,i){return a("li",{key:t.value,class:t.className,on:{click:function(t){e.tabClickHandle(i)}}},[a("span",{staticClass:"analysis-item-title"},[e._v(e._s(e.i18nFormatter(t.label)))])])}))])]),e._v(" "),a("div",{staticClass:"panels-content"},[a("div",{staticClass:"panels-main-top"},[e.panelObj.floorPanel?a("ul",{staticClass:"condition-box"},[a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[e._v(e._s(e.$t("asisTab.mallT")))]),e._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-select",{staticClass:"mall-sel-box",attrs:{filterable:"",placeholder:e.$t("pholder.shopSelect")},on:{change:e.mallChange},model:{value:e.mallVal,callback:function(t){e.mallVal=t},expression:"mallVal"}},e._l(e.mallData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[e._v(e._s(e.$t("asisTab.floorT")))]),e._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-select",{staticClass:"floor-sel-box",attrs:{filterable:"",placeholder:e.$t("pholder.floorSelect")},on:{change:e.getFloorImg},model:{value:e.floorVal,callback:function(t){e.floorVal=t},expression:"floorVal"}},e._l(e.floorData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])]):e._e()]),e._v(" "),a("div",{staticClass:"panels-main-bottom"},[a("ul",{staticClass:"condition-box"},[a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text spe-item-text"},[e._v(e._s(e.$t("asisTab.date")))]),e._v(" "),a("div",{staticClass:"condition-item-option"},[a("div",{staticClass:"time-wrapper"},[a("el-select",{attrs:{placeholder:e.$t("pholder.select")},on:{change:function(t){e.DateHandle(e.ReportVal)}},model:{value:e.ReportVal,callback:function(t){e.ReportVal=t},expression:"ReportVal"}},e._l(e.analyasisTime,function(t){return a("el-option",{key:t.value,attrs:{label:e.i18nFormatter(t.label),value:t.value}})}))],1)])]),e._v(" "),a("li",{staticClass:"condition-item analysis-date-condition"},[a("div",{staticClass:"condition-item-option"},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.reportTime.isDay,expression:"reportTime.isDay"}],staticClass:"date-input analysis-date-input",attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"date",size:"mini",placeholder:e.$t("pholder.date"),"picker-options":e.pickerOptions1},model:{value:e.dayTime,callback:function(t){e.dayTime=t},expression:"dayTime"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.reportTime.isWeek,expression:"reportTime.isWeek"}],staticClass:"date-input analysis-date-input",attrs:{align:"right",type:"week",format:"yyyy ç¬¬ WW å¨",size:"mini",placeholder:e.$t("pholder.week"),"picker-options":e.weekPickerOpt},model:{value:e.weekTime,callback:function(t){e.weekTime=t},expression:"weekTime"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.reportTime.isMonth,expression:"reportTime.isMonth"}],staticClass:"date-input analysis-date-input date-month-box",attrs:{align:"right",type:"month",format:"yyyy å¹´ MM æ",size:"mini",placeholder:e.$t("pholder.month"),"picker-options":e.pickerOptions1},model:{value:e.monthTime,callback:function(t){e.monthTime=t},expression:"monthTime"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.reportTime.isYear,expression:"reportTime.isYear"}],staticClass:"date-input analysis-date-input",attrs:{align:"right",type:"year",format:"yyyy å¹´",size:"mini",placeholder:e.$t("pholder.year"),"picker-options":e.pickerOptions1},model:{value:e.yearTime,callback:function(t){e.yearTime=t},expression:"yearTime"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.reportTime.isCustom,expression:"reportTime.isCustom"}],staticClass:"date-input analysis-date-input times-box",attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"daterange",size:"mini","picker-options":e.pickerOptions1,"range-separator":"-","start-placeholder":e.$t("pholder.startDate"),"end-placeholder":e.$t("pholder.endDate")},model:{value:e.customTime,callback:function(t){e.customTime=t},expression:"customTime"}})],1)]),e._v(" "),a("li",{staticClass:"condition-item btn-condition-item"},[a("el-button",{staticClass:"primary-btn analysis-collapse-btn",attrs:{type:"primary",size:"samll"},on:{click:e.confirmCondition}},[e._v(e._s(e.$t("button.confirm")))]),e._v(" "),a("el-button",{staticClass:"reset-btn analysis-collapse-btn",attrs:{size:"samll"},on:{click:e.resetRefresh}},[e._v(e._s(e.$t("button.reset")))])],1)])])])])},staticRenderFns:[]},l=a("VU/8")(o,r,!1,function(e){a("OwS/")},"data-v-b42b66cc",null);t.a=l.exports},"OwS/":function(e,t){},YeOf:function(e,t){}});