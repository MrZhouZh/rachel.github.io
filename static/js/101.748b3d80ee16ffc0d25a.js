webpackJsonp([101],{"0CqI":function(t,a,i){"use strict";var e={props:{mallData:Array},data:function(){return{seraching:!1,pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()}},weekPickerOpt:{firstDayOfWeek:1},tabItem:[],panelObj:{mallPanel:!1},analyasisTime:[{label:"custom",value:"custom",is_active:"time-btn"}],reportTime:{isCustom:!1},dayTime:"",mallVal:"",asisLevel:"",paramId:"",genderList:[1,0],ageList:["0-18","18-24","25-34","35-44","45-54","55-64","65-"],isAgeSelAll:!0,ageArr:[{name:"18岁以下",value:"0-18"},{name:"18-24岁",value:"18-24"},{name:"25-34岁",value:"25-34"},{name:"35-44岁",value:"35-44"},{name:"45-54岁",value:"45-54"},{name:"55-64岁",value:"55-64"},{name:"65岁以上",value:"65-"}]}},created:function(){this.tabItem=[],this.tabItem.push({label:"mall",value:"mall",className:"analysis-item"})},computed:{},mounted:function(){this.dayTime=dateUnit.dateFormat(new Date,"yyyy-MM-dd")},methods:{i18nFormatter:function(t){var a="asisTab."+t;return this.$t(a)},initAsis:function(t){this.mallVal=t,this.tabClickHandle(0),this.timeHandle(0);var a={asis_level:"mall",asis_age:this.ageList.join(","),asis_gender:this.genderList.join(","),asis_time:this.dayTime,asis_org:t,asis_tit:this.getItemName(this.mallData,this.mallVal)};this.$emit("initData",a)},tabClickHandle:function(t){if("analysis-item"===this.tabItem[t].className){this.tabItem.forEach(function(t){t.className="analysis-item"}),this.tabItem[t].className="analysis-item tabs-active";for(var a in this.panelObj)this.panelObj[a]=!1;switch(this.asisLevel="",this.tabItem[t].value){case"mall":this.panelObj.mallPanel=!0,this.asisLevel="mall"}}},timeHandle:function(t){if("time-btn"===this.analyasisTime[t].is_active){this.analyasisTime.forEach(function(t){t.is_active="time-btn"});for(var a in this.reportTime)this.reportTime[a]=!1;this.analyasisTime[t].is_active="time-btn active-time";switch(this.analyasisTime[t].value){case"custom":this.reportTime.isCustom=!0}}},ageChangeHandle:function(){this.isAgeSelAll=(this.isAgeSelAll,!(this.ageList.length<this.ageArr.length))},selAllHandle:function(t){var a=this;"age"===t&&(this.isAgeSelAll?(this.isAgeSelAll=!1,this.ageList.length==this.ageArr.length&&(this.ageList=[])):(this.isAgeSelAll=!0,this.ageList.length==this.ageArr.length?this.ageList=[]:(this.ageList=[],this.ageArr.forEach(function(t){a.ageList.push(t.id)}))))},confirmCondition:function(){var t={asis_level:"",asis_age:"",asis_gender:"",asis_org:"",asis_time:[],asis_tit:""};this.mallVal&&(t.asis_level="mall",t.asis_age=this.ageList.join(","),t.asis_gender=this.genderList.join(","),t.asis_time=this.dayTime,t.asis_org=this.mallVal,t.asis_tit=this.getItemName(this.mallData,this.mallVal),this.$emit("reportTime",t))},getItemName:function(t,a){var i="",e=a.toString().split(",")[0];return t.forEach(function(t){t.id==e&&(i=t.name)}),i},resetRefresh:function(){this.tabClickHandle(0),this.timeHandle(0),this.mallVal=this.mallData[0].id,this.dayTime=dateUnit.dateFormat(new Date,"yyyy-MM-dd")}}},s={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"analysis-option-wrapper"},[i("div",{staticClass:"new-panels-content"},[i("div",{staticClass:"main-top"},[i("ul",{staticClass:"condition-box"},[i("li",{staticClass:"condition-item"},[i("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.mallT")))]),t._v(" "),i("div",{staticClass:"condition-item-option"},[i("el-select",{staticClass:"mall-sel-box",attrs:{filterable:"",placeholder:t.$t("pholder.shopSelect")},model:{value:t.mallVal,callback:function(a){t.mallVal=a},expression:"mallVal"}},t._l(t.mallData,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),i("li",{staticClass:"condition-item"},[i("div",{staticClass:"condition-item-option"},[i("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("table.gender"))+" :")]),t._v(" "),i("el-checkbox-group",{staticClass:"sex-container",model:{value:t.genderList,callback:function(a){t.genderList=a},expression:"genderList"}},[i("el-checkbox",{staticClass:"sex-item-checkbox",attrs:{label:1}},[t._v(t._s(t.$t("table.male")))]),t._v(" "),i("el-checkbox",{staticClass:"sex-item-checkbox",attrs:{label:0}},[t._v(t._s(t.$t("table.female")))])],1)],1)]),t._v(" "),i("li",{staticClass:"condition-item"},[i("div",{staticClass:"condition-item-option"},[i("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("table.age"))+" :")]),t._v(" "),i("el-select",{staticClass:"shop-sel-box",attrs:{placeholder:t.$t("pholder.areaSelect"),multiple:"","collapse-tags":""},on:{change:t.ageChangeHandle},model:{value:t.ageList,callback:function(a){t.ageList=a},expression:"ageList"}},[i("div",{class:t.isAgeSelAll?"sel-all-box selected":"sel-all-box",on:{click:function(a){t.selAllHandle("age")}}},[i("span",{staticClass:"custom-checkbox__input"},[i("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),i("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(t.$t("allPages.all")))])]),t._v(" "),t._l(t.ageArr,function(a){return i("el-option",{key:a.value,attrs:{label:a.name,value:a.value}},[i("span",{staticClass:"custom-checkbox__input"},[i("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),i("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(a.name))])])})],2)],1)]),t._v(" "),i("li",{staticClass:"condition-item condition-item-option"},[i("el-date-picker",{staticClass:"date-input analysis-date-input ",attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"date",size:"mini",placeholder:t.$t("pholder.date"),"picker-options":t.pickerOptions1},model:{value:t.dayTime,callback:function(a){t.dayTime=a},expression:"dayTime"}})],1),t._v(" "),i("li",{staticClass:"condition-item"},[i("el-button",{staticClass:"primary-btn analysis-collapse-btn",attrs:{type:"primary",size:"samll"},on:{click:t.confirmCondition}},[t._v(t._s(t.$t("button.confirm")))])],1)])])])])},staticRenderFns:[]},l=i("VU/8")(e,s,!1,function(t){i("zFPw")},"data-v-120149e0",null);a.a=l.exports},PXFM:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("Yytr"),s={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"base-analysis"},[a("el-header",{attrs:{height:"70px"}},[a("span",{staticClass:"asis-title"},[this._v(this._s(this.asisName)+" "+this._s(this.$t("asis.TrafficDirection")))]),this._v(" "),a("span",{staticClass:"more-option-wrapper",on:{click:this.showCollapse}},[a("span",{staticClass:"more-option-text"},[this._v(this._s(this.$t("asis.moreOp")))]),this._v(" "),a("i",{class:this.moreOptVisible?"el-icon-arrow-down more-option-arrow":"el-icon-arrow-down more-option-arrow more-option-up"})])]),this._v(" "),a("ftmoveline-option",{directives:[{name:"show",rawName:"v-show",value:this.moreOptVisible,expression:"moreOptVisible"}],ref:"init",attrs:{mallData:this.mallData},on:{reportTime:this.reportHandler,initData:this.initTab}}),this._v(" "),a("div",{staticClass:"element-main base-main"},[a("router-view",{attrs:{propparam:this.propParams}})],1)],1)},staticRenderFns:[]},l=function(t){i("dz4C")},n=i("VU/8")(e.a,s,!1,l,"data-v-5d3f1613",null);a.default=n.exports},Yytr:function(t,a,i){"use strict";(function(t){var e=i("0CqI");a.a={data:function(){return{moreOptVisible:!1,mallData:[],asisName:"",asisLevel:"",propParams:{}}},components:{"ftmoveline-option":e.a},mounted:function(){this.getMallOpt(),this.showCollapse()},methods:{showCollapse:function(){var a=this,i="",e="",s="",l="";i=this.getStyleFn(".el-header","height"),e=this.getStyleFn(".analysis-wrapper .el-header","height"),this.moreOptVisible?(this.moreOptVisible=!1,l=i+e+8+"px",t(".base-main").animate({marginTop:l})):(this.moreOptVisible=!0,setTimeout(function(){s=a.getStyleFn(".analysis-option-wrapper","height"),l=i+e+s+8+"px",t(".base-main").animate({marginTop:l})},100))},getMallOpt:function(){var t=this;this.axios.get("/malls",{params:{accountId:this.$cookie.get("accountId"),_t:Date.parse(new Date)/1e3}}).then(function(a){var i="",e=null;if(a.data.data.length>=1){var s=window.sessionStorage.getItem("mallId");s&&Number(s),a.data.data.forEach(function(a,e){t.mallData.push(a),s&&a.id==s&&(i=a.name)}),t.asisName=i||a.data.data[0].name,e=s?Number(s):a.data.data[0].id,t.$refs.init.initAsis(e)}})},initTab:function(t){this.$router.push("/customer/trafficdirection/ftml"),this.propParams={dateType:"/trafficdirection/ftml",data:t}},reportHandler:function(t){this.asisName=t.asis_tit,this.$router.push("/customer/trafficdirection/ftml"),this.propParams={dateType:"/trafficdirection/ftml",data:t}}}}}).call(a,i("7t+N"))},dz4C:function(t,a){},zFPw:function(t,a){}});