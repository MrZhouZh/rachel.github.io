webpackJsonp([102],{CtZd:function(t,e,a){"use strict";(function(t){var i=a("KVPN");e.a={data:function(){return{moreOptVisible:!1,mallData:[],asisName:"",asisLevel:"",propParams:{}}},components:{"tftrack-option":i.a},created:function(){var e=this;window.addEventListener("resize",function(){try{var a={chart1:t("#residenceChart")[0]};for(var i in a)if(a.hasOwnProperty(i)&&void 0!=a[i]){a[i]=e.$echarts.init(a[i]);a[i].resize()}}catch(t){}})},mounted:function(){this.getMallOpt(),this.showCollapse()},methods:{showCollapse:function(){var e=this,a="",i="",s="",n="";a=this.getStyleFn(".el-header","height"),i=this.getStyleFn(".analysis-wrapper .el-header","height"),this.moreOptVisible?(this.moreOptVisible=!1,n=a+i+8+"px",t(".tftrack-main").animate({marginTop:n})):(this.moreOptVisible=!0,setTimeout(function(){s=e.getStyleFn(".analysis-option-wrapper","height"),n=a+i+s+8+"px",t(".tftrack-main").animate({marginTop:n})},100))},getMallOpt:function(){var t=this;this.axios.get("/malls",{params:{accountId:this.$cookie.get("accountId"),_t:Date.parse(new Date)/1e3}}).then(function(e){var a="",i=null;if(e.data.data.length>=1){var s=window.sessionStorage.getItem("mallId");s&&Number(s),e.data.data.forEach(function(e,i){t.mallData.push(e),s&&e.id==s&&(a=e.name)}),t.asisName=a||e.data.data[0].name,i=s?Number(s):e.data.data[0].id,t.$refs.init.initAsis(i)}})},initTab:function(t){this.$router.push("/customer/moveline/trackline"),this.propParams={dateType:"/moveline/trackline",data:t}},reportHandler:function(t){this.asisName=t.asis_tit,this.$router.push("/customer/moveline/trackline"),this.propParams={dateType:"/moveline/trackline",data:t}}}}}).call(e,a("7t+N"))},IQcd:function(t,e){},KVPN:function(t,e,a){"use strict";var i=a("pFYg"),s=a.n(i),n={props:{mallData:Array},data:function(){return{seraching:!1,pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()}},weekPickerOpt:{firstDayOfWeek:1},tabItem:[],panelObj:{mallPanel:!1},analyasisTime:[{label:"custom",value:"custom",is_active:"time-btn"}],reportTime:{isCustom:!1},dayTime:"",mallVal:"",asisLevel:"",spaceVal:null,degreeVal:null,spaceList:[],paramId:"",isDeree:!0,stageList:[],startStage:0,endStage:null,genderList:[1,0],ageList:["0-18","18-24","25-34","35-44","45-54","55-64","65-"],isAgeSelAll:!0,ageArr:[{name:"18岁以下",value:"0-18"},{name:"18-24岁",value:"18-24"},{name:"25-34岁",value:"25-34"},{name:"35-44岁",value:"35-44"},{name:"45-54岁",value:"45-54"},{name:"55-64岁",value:"55-64"},{name:"65岁以上",value:"65-"}],zoneNumVal:3,zoneNumList:[{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"}]}},created:function(){this.tabItem=[],this.tabItem.push({label:"mall",value:"mall",className:"analysis-item"});for(var t=0;t<10;t++)this.spaceList.push({name:t+1+"分钟",value:t+1})},computed:{},mounted:function(){this.spaceVal=this.spaceList[2].value,this.degreeVal=8,this.dayTime=dateUnit.dateFormat(new Date,"yyyy-MM-dd")},methods:{i18nFormatter:function(t){var e="asisTab."+t;return this.$t(e)},initAsis:function(t){this.mallVal=t,this.tabClickHandle(0),this.timeHandle(0);var e={asis_level:"mall",asis_age:this.ageList.join(","),asis_gender:this.genderList.join(","),asis_zonenum:this.zoneNumVal,asis_time:this.dayTime,asis_org:t,asis_tit:this.getItemName(this.mallData,this.mallVal)};this.$emit("initData",e)},tabClickHandle:function(t){if("analysis-item"===this.tabItem[t].className){this.tabItem.forEach(function(t){t.className="analysis-item"}),this.tabItem[t].className="analysis-item tabs-active";for(var e in this.panelObj)this.panelObj[e]=!1;switch(this.asisLevel="",this.tabItem[t].value){case"mall":this.panelObj.mallPanel=!0,this.asisLevel="mall"}}},timeHandle:function(t){if("time-btn"===this.analyasisTime[t].is_active){this.analyasisTime.forEach(function(t){t.is_active="time-btn"});for(var e in this.reportTime)this.reportTime[e]=!1;this.analyasisTime[t].is_active="time-btn active-time";switch(this.analyasisTime[t].value){case"custom":this.reportTime.isCustom=!0}}},addSpaceTime:function(){(this.startStage||0==this.startStage)&&this.endStage?(this.stageList.push({startMin:this.startStage,endMin:this.endStage}),this.startStage=null,this.endStage=null):this.$message({showClose:!0,type:"info",message:"滞留时间不能为空!"})},limitNumber:function(t,e){t&&(/^\d+$/g.test(t)||(this.$message({type:"warning",duration:500,message:"只能输入正整数"}),e?this.startStage=null:this.endStage=null))},cusTimeChange:function(t,e){var a=this.stageList.length;e?this.stageList[a-1].endMin?t<this.stageList[a-1].endMin&&(this.startStage=null):this.startStage=null:this.startStage||0==this.startStage?t||"object"!==(void 0===t?"undefined":s()(t))?t<=this.startStage||0==t?this.endStage=null:(this.stageList.push({startMin:this.startStage,endMin:this.endStage}),this.startStage=null,this.endStage=null):(this.stageList.push({startMin:this.startStage,endMin:this.endStage?this.endStage:""}),this.startStage=null,this.endStage=null):this.endStage=null},handleClose:function(t){this.stageList.splice(t,1),0==this.stageList.length&&(this.startStage=0)},getStageTime:function(t,e){for(var a=[],i="",s=0;s<e;s++)i=0==s?"-"+t:s+1==e?t*s+"-":t*s+"-"+t*(s+1),a.push(i);return a},ageChangeHandle:function(){this.isAgeSelAll=(this.isAgeSelAll,!(this.ageList.length<this.ageArr.length))},selAllHandle:function(t){var e=this;"age"===t&&(this.isAgeSelAll?(this.isAgeSelAll=!1,this.ageList.length==this.ageArr.length&&(this.ageList=[])):(this.isAgeSelAll=!0,this.ageList.length==this.ageArr.length?this.ageList=[]:(this.ageList=[],this.ageArr.forEach(function(t){e.ageList.push(t.id)}))))},confirmCondition:function(){var t={asis_level:"",asis_age:"",asis_gender:"",asis_org:"",asis_zonenum:""};this.mallVal&&(t.asis_zonenum=this.zoneNumVal,t.asis_level="mall",t.asis_age=this.ageList.join(","),t.asis_gender=this.genderList.join(","),t.asis_time=this.dayTime,t.asis_org=this.mallVal,t.asis_tit=this.getItemName(this.mallData,this.mallVal),this.$emit("reportTime",t))},getItemName:function(t,e){var a="",i=e.toString().split(",")[0];return t.forEach(function(t){t.id==i&&(a=t.name)}),a},resetRefresh:function(){this.tabClickHandle(0),this.timeHandle(0),this.mallVal=this.mallData[0].id,this.dayTime=dateUnit.dateFormat(new Date,"yyyy-MM-dd")}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"analysis-option-wrapper"},[a("div",{staticClass:"new-panels-content"},[a("div",{staticClass:"new-main-top"},[a("ul",{staticClass:"new-condition-box"},[a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.mallT")))]),t._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-select",{staticClass:"mall-sel-box",attrs:{filterable:"",placeholder:t.$t("pholder.shopSelect")},model:{value:t.mallVal,callback:function(e){t.mallVal=e},expression:"mallVal"}},t._l(t.mallData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),a("li",{staticClass:"new-condition-item"},[a("div",{staticClass:"new-condition-item-option"},[a("span",{staticClass:"condition-item-text"},[t._v("性別 :")]),t._v(" "),a("el-checkbox-group",{staticClass:"sex-container",model:{value:t.genderList,callback:function(e){t.genderList=e},expression:"genderList"}},[a("el-checkbox",{staticClass:"sex-item-checkbox",attrs:{label:1}},[t._v("男")]),t._v(" "),a("el-checkbox",{staticClass:"sex-item-checkbox",attrs:{label:0}},[t._v("女")])],1)],1)]),t._v(" "),a("li",{staticClass:"condition-item"},[a("div",{staticClass:"condition-item-option"},[a("span",{staticClass:"condition-item-text"},[t._v("年龄 :")]),t._v(" "),a("el-select",{staticClass:"shop-sel-box",attrs:{placeholder:t.$t("pholder.areaSelect"),multiple:"","collapse-tags":""},on:{change:t.ageChangeHandle},model:{value:t.ageList,callback:function(e){t.ageList=e},expression:"ageList"}},[a("div",{class:t.isAgeSelAll?"sel-all-box selected":"sel-all-box",on:{click:function(e){t.selAllHandle("age")}}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v("全选")])]),t._v(" "),t._l(t.ageArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(e.name))])])})],2)],1)]),t._v(" "),a("li",{staticClass:"condition-item"},[a("div",{staticClass:"condition-item-option"},[a("span",{staticClass:"condition-item-text"},[t._v("区域个数 :")]),t._v(" "),a("el-select",{staticClass:"zone-sel",attrs:{placeholder:t.$t("message.zoneNum")},model:{value:t.zoneNumVal,callback:function(e){t.zoneNumVal=e},expression:"zoneNumVal"}},t._l(t.zoneNumList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),a("li",{staticClass:"condition-item condition-item-option"},[a("el-date-picker",{staticClass:"date-input analysis-date-input",attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"date",size:"mini",placeholder:t.$t("pholder.date"),"picker-options":t.pickerOptions1},model:{value:t.dayTime,callback:function(e){t.dayTime=e},expression:"dayTime"}})],1),t._v(" "),a("li",{staticClass:"condition-item"},[a("el-button",{staticClass:"primary-btn analysis-collapse-btn",attrs:{type:"primary",size:"samll"},on:{click:t.confirmCondition}},[t._v("确定")])],1)])])])])},staticRenderFns:[]},o=a("VU/8")(n,l,!1,function(t){a("IQcd")},"data-v-6238145d",null);e.a=o.exports},"M+Jm":function(t,e){},oriI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("CtZd"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"base-analysis"},[e("el-header",{attrs:{height:"70px"}},[e("span",{staticClass:"asis-title"},[this._v(this._s(this.asisName)+" "+this._s(this.$t("asis.MoveLineAnalysis")))]),this._v(" "),e("span",{staticClass:"more-option-wrapper",on:{click:this.showCollapse}},[e("span",{staticClass:"more-option-text"},[this._v(this._s(this.$t("asis.moreOp")))]),this._v(" "),e("i",{class:this.moreOptVisible?"el-icon-arrow-down more-option-arrow":"el-icon-arrow-down more-option-arrow more-option-up"})])]),this._v(" "),e("tftrack-option",{directives:[{name:"show",rawName:"v-show",value:this.moreOptVisible,expression:"moreOptVisible"}],ref:"init",attrs:{mallData:this.mallData},on:{reportTime:this.reportHandler,initData:this.initTab}}),this._v(" "),e("div",{staticClass:"element-main tftrack-main"},[e("router-view",{attrs:{propparam:this.propParams}})],1)],1)},staticRenderFns:[]},n=function(t){a("M+Jm")},l=a("VU/8")(i.a,s,!1,n,"data-v-2e505e9c",null);e.default=l.exports}});