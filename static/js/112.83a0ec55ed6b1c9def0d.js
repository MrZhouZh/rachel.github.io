webpackJsonp([112],{"2IyC":function(t,e,i){"use strict";var a=i("Dd8w"),o=i.n(a),r=i("m/z2"),s=i.n(r),n=(i("zL8q"),{props:{options:Object,id:[String,Number],chartType:String},data:function(){return{downloadIcon:"image://"+s.a,fontFamily:'"PingFang SC", "Lantinghei SC", "Microsoft YaHei", "HanHei SC", "Helvetica Neue", "Open Sans", Arial, "Hiragino Sans GB", 微软雅黑, STHeiti, "WenQuanYi Micro Hei", SimSun, sans-serif'}},watch:{options:function(t){switch(this.chartType){case"Heatmap":this.drawHeatmap(this.id,t);break;case"YearHeatmap":this.drawYearHeatmap(this.id,t);break;case"Scatter":this.drawScatter(this.id,t);break;case"YearScatter":this.drawYearScatter(this.id,t);break;case"GenderBar":this.drawGenderBar(this.id,t);break;case"AgeBar":this.drawAgeBar(this.id,t);break;case"HolidayActBar":this.drawHoActBar(this.id,t);break;case"Line":this.drawLine(this.id,t);break;case"YearLine":this.drawYearLine(this.id,t);break;case"TfLine":this.drawTfLine(this.id,t);break;case"Pie":this.drawPie(this.id,t);break;case"ComtPie":this.drawComtPie(this.id,t);break;case"Radar":this.drawRadar(this.id,t);break;case"LineBar":this.drawLineBar(this.id,t);break;case"ActLineBg":this.drawLineBg(this.id,t);break;case"ActHolidayActBar":this.drawActBar(this.id,t);break;case"ActLine":this.drawActLine(this.id,t);break;case"RankBar":this.drawRankBar(this.id,t);break;case"GroupBar":this.drawGroupBar(this.id,t)}}},mounted:function(){switch(this.chartType){case"Heatmap":this.drawHeatmap(this.id,this.options);break;case"YearHeatmap":this.drawYearHeatmap(this.id,this.options);break;case"Scatter":this.drawScatter(this.id,this.options);break;case"YearScatter":this.drawYearScatter(this.id,this.options);break;case"GenderBar":this.drawGenderBar(this.id,this.options);break;case"AgeBar":this.drawAgeBar(this.id,this.options);break;case"HolidayActBar":this.drawHoActBar(this.id,this.options);break;case"Line":this.drawLine(this.id,this.options);break;case"YearLine":this.drawYearLine(this.id,this.options);break;case"TfLine":this.drawTfLine(this.id,this.options);break;case"Pie":this.drawPie(this.id,this.options);break;case"ComtPie":this.drawComtPie(this.id,this.options);break;case"Radar":this.drawRadar(this.id,this.options);break;case"LineBar":this.drawLineBar(this.id,this.options);break;case"ActLineBg":this.drawLineBg(this.id,this.options);break;case"ActHolidayActBar":this.drawActBar(this.id,this.options);break;case"ActLine":this.drawActLine(this.id,this.options);break;case"RankBar":this.drawRankBar(this.id,this.options);break;case"GroupBar":this.drawGroupBar(this.id,this.options)}},methods:{i18nFomatter:function(t){var e="echartsTitle."+t;return this.$t(e)},initChartInstance:function(t){var e=document.getElementById(t);return this.$echarts.getInstanceByDom(e)||this.$echarts.init(e)},drawHeatmap:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a=["周一","周二","周三","周四","周五","周六","周日"],r={title:{},animation:!1,grid:{left:36,right:0,top:36,bottom:52},toolbox:{show:!0,showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:0,right:0},xAxis:{type:"category",data:[],nameTextStyle:{color:"#444",fontSize:12,fontFamily:this.fontFamily},axisLabel:{width:140},splitArea:{show:!0},axisTick:{show:!1},axisLine:{lineStyle:{color:"#535353"}}},yAxis:{type:"category",splitArea:{show:!0},axisTick:{show:!1},axisLine:{lineStyle:{color:"#535353"}},data:a},visualMap:{min:0,max:20,calculable:!0,orient:"horizontal",left:"left",bottom:-10,itemWidth:15,color:["#0068FF","#fff"]},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}};if("string"==typeof(e=o()({},r,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0){for(var s=[],n=null,l=[],d=[],p=null,c=0,h=e.series.length;c<h;c++)e.series[c].type="heatmap",e.series[c].itemStyle={emphasis:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}},e.series[c].label={normal:{show:!0,color:"#444"}};e.series.forEach(function(t,e){n=function(t,e){for(var i in e)if(t==e[i])return i}(t.name,a),l.push(t.data);for(var i=0;i<t.data.length;i++)s.push([parseInt(n),i,t.data[i]])});try{d=l.join(",").split(","),p=Math.max.apply(null,d)}catch(t){}e.visualMap.max=p,s=s.map(function(t){return[t[1],t[0],t[2]||"-"]});for(var f in e.series)e.series[f].data=[],e.series[f].data=s.splice(0,e.xAxis.data.length)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#444",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.visualMap.show=!1,e.yAxis.data=[],e.grid.height=670,i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500);e.tooltip.formatter=function(t,i,a){var o=e.yAxis.data,r=e.xAxis.data,s="";return s+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right:15px; text-align: left; color: #0068FF;">'+o[t.value[1]]+'</div><div><p style="font-size:13px;padding:4px 15px;color:"#444444"">'+r[t.value[0]]+": 平均热力"+t.value[2]+"</p></div>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawYearHeatmap:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a=["周一","周二","周三","周四","周五","周六","周日"],r={title:{},animation:!1,grid:{left:36,right:0,top:36,bottom:52},xAxis:{type:"category",data:[],nameTextStyle:{color:"#444",fontSize:12,fontFamily:this.fontFamily},axisLabel:{width:140},splitArea:{show:!0},axisTick:{show:!1},axisLine:{lineStyle:{color:"#535353"}}},yAxis:{type:"category",splitArea:{show:!0},axisTick:{show:!1},axisLine:{lineStyle:{color:"#535353"}},data:a},toolbox:{show:!0,showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:0,right:0},visualMap:{show:!1,min:0,max:20,calculable:!0,orient:"horizontal",left:"left",bottom:-10,itemWidth:15,color:["#0068FF","#fff"]},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}};"string"==typeof(e=o()({},r,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16});try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series){if(e.series.length>0){for(var s=[],n=null,l=[],d=[],p=null,c=0,h=e.series.length;c<h;c++)e.series[c].type="heatmap",e.series[c].itemStyle={emphasis:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}},e.series[c].label={normal:{show:!0,color:"#444"}};e.series.forEach(function(t,e){n=function(t,e){for(var i in e)if(t==e[i])return i}(t.name,a),l.push(t.data);for(var i=0;i<t.data.length;i++)s.push([parseInt(n),i,t.data[i]])}),d=l.join(",").split(","),p=Math.max.apply(null,d),e.visualMap.max=p,s=s.map(function(t){return[t[1],t[0],t[2]||"-"]});for(var f in e.series)e.series[f].data=[],e.series[f].data=s.splice(0,e.xAxis.data.length)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#444",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.visualMap.show=!1,e.yAxis.data=[],e.grid.height=670,i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500);e.tooltip.formatter=function(t,i,a){var o=e.yAxis.data,r=e.xAxis.data,s="";return s+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right: 15px; text-align: left; color: #0068FF;">'+o[t.value[1]]+'</div><div><p style="font-size:13px;padding:4px 15px;color:"#444444"">'+r[t.value[0]]+": 平均热力"+t.value[2]+"</p></div>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawScatter:function(t,e){var i=this,a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var r=["#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E","#6784E3","#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E","#6784E3","#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E"],s={backgroundColor:"#fff",grid:{top:88,left:74,right:75},color:r,legend:{y:"top",textStyle:{color:"#444",fontSize:14,fontFamily:this.fontFamily},top:26,data:[]},toolbox:{show:!1,showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:"26px",right:"21px"},xAxis:{type:"category",name:"日期",data:[],nameTextStyle:{color:"#888",fontFamily:this.fontFamily},splitLine:{show:!1},axisLine:{lineStyle:{color:"#535353"}},axisTick:{show:!1}},yAxis:{type:"value",name:"AQI指数",nameLocation:"end",nameTextStyle:{color:"#888",fontFamily:this.fontFamily},axisLine:{lineStyle:{color:"#535353"}},splitLine:{show:!0,lineStyle:{type:"dotted",color:"#E5E5E5"}},axisTick:{show:!1}},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}};if("string"==typeof(e=o()({},s,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),e.series){try{e.xAxis.data=e.xaxis.data}catch(t){}var n=[],l=[],d=null,p=null,c=[];e.series.length>0?function(){i.getRandomColors(e.series.length);var t=[];e.series.forEach(function(t,e){c[e]=[],t.data.forEach(function(t,i){t?(c[e][i]=t.value1,l.push(t.value1)):c[e][i]=0})}),d=Math.max.apply(null,l),Math.min.apply(null,l),p=i.computeSize(d,120);for(var a=function(a,o){var s=i.getSessionLocal("weather",e.series[a].name);e.series[a].type="scatter",e.series[a].symbolSize=function(t,e){var i=null;return i=c[a][e.dataIndex]?c[a][e.dataIndex]/p:0,i=0==i?0:i<=4?4:i},e.series[a].itemStyle={normal:{color:r[a],borderColor:r[a],borderWidth:2,opacity:.5}},s=s||"未知"+[a],e.legend.data.push({name:s,icon:"circle"}),e.series[a].name=s,n[s]=e.series[a].data,e.series[a].data.forEach(function(e,i){t[i]=e?e.weather.aqi:0}),e.series[a].data=t,t=[]},o=0,s=e.series.length;o<s;o++)a(o)}():(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.grid.height=600,e.xAxis.data=[],a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500));var h=this;e.tooltip.formatter=function(t,i,a){if(n[t.seriesName][t.dataIndex]){var o=void 0,r="",s="",l="",d="",p="";return(o=n[t.seriesName][t.dataIndex])&&(r=o.value1,s=h.getSessionLocal("weather",o.weather.type),l=o.weather.aqi,d=o.weather.ltemp+"℃ ~ "+o.weather.htemp+"℃"),p+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right:15px; text-align: left; color: #0068FF;">'+t.name.replace(/\(|\)/g," ")+'</div><div><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">'+e.kpiName+" : "+r+'人次</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">天气 : '+s+'</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">AQI指数 : '+l+'</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">温度 : '+d+"</p></div>"}},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawYearScatter:function(t,e){var i=this,a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var r=["#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E","#6784E3","#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E","#6784E3","#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E"],s={backgroundColor:"#fff",grid:{top:64,left:42,right:40},color:r,legend:{y:"top",textStyle:{color:"#444",fontSize:14,fontFamily:this.fontFamily},top:26,data:[]},toolbox:{show:!1,showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:"-1px",right:"-3px"},xAxis:{type:"category",name:"日期",data:[],nameTextStyle:{color:"#888",fontFamily:this.fontFamily},splitLine:{show:!1},axisLine:{lineStyle:{color:"#535353"}},axisTick:{show:!1}},yAxis:{type:"value",name:"AQI指数",nameLocation:"end",nameTextStyle:{color:"#888",fontFamily:this.fontFamily},axisLine:{lineStyle:{color:"#535353"}},splitLine:{show:!0,lineStyle:{type:"dotted",color:"#E5E5E5"}},axisTick:{show:!1}},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}};if("string"==typeof(e=o()({},s,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),e.series){var n=[],l=[],d=[],p=null,c=null;e.series.length>0?function(){var t=[];try{e.dataZoom={type:"slider",bottom:0},e.xAxis.data=e.xaxis.data,i.getRandomColors(e.series.length)}catch(t){}e.series.forEach(function(t,e){d[e]=[],t.data.forEach(function(t,i){t?(d[e][i]=t.value1,l.push(t.value1)):d[e][i]=0})}),p=Math.max.apply(null,l),Math.min.apply(null,l),c=i.computeSize(p,80);for(var a=function(a,o){e.series[a].type="scatter",e.series[a].symbolSize=function(t,e){var i=null;return i=d[a][e.dataIndex]?d[a][e.dataIndex]/c:0,i=0==i?0:i<=4?4:i},e.series[a].animation=!1,e.series[a].itemStyle={normal:{color:r[a],borderColor:r[a],borderWidth:2,opacity:.5}};var s=i.getSessionLocal("weather",e.series[a].name);s=s||"未知"+[a],e.legend.data.push(s),e.series[a].name=s,n[e.series[a].name]=e.series[a].data,e.series[a].data.forEach(function(e,i){t[i]=e?e.weather.aqi:0}),e.series[a].data=t,t=[]},o=0,s=e.series.length;o<s;o++)a(o)}():(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.grid.height=650,a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500));var h=this;e.tooltip.formatter=function(t,i,a){if(n[t.seriesName][t.dataIndex]){var o=void 0,r="",s="",l="",d="",p="";return(o=n[t.seriesName][t.dataIndex])&&(r=o.value1,s=h.getSessionLocal("weather",o.weather.type),l=o.weather.aqi,d=o.weather.ltemp+"℃ ~ "+o.weather.htemp+"℃"),p+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right:15px; text-align: left; color: #0068FF;">'+t.name.replace(/\(|\)/g," ")+'</div><div><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">'+e.kpiName+" : "+r+'人次</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">天气 : '+s+'</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">AQI指数 : '+l+'</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">温度 : '+d+"</p></div>"}},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawGenderBar:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a={grid:{top:66,left:60,bottom:66,right:40},legend:{data:[],bottom:16,textStyle:{color:"#555",fontFamily:this.fontFamily,fontSize:12},itemGap:85,itemWidth:10,itemHeight:10},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{name:"人次",type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=o()({},a,e)).series){var r={},s=[],n=[];try{if(s=e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var l=0;l<e.series.length;l++){e.xAxis.data.push(e.series[l].name);for(var d=0;d<e.series[l].data.length;d++){r[e.xaxis.data[d]]=e.series[l].data[d];for(var p in r)s[d].name==p&&s[d].data.push(r[p]);r={}}}for(var c=0;c<s.length;c++)s[c].itemStyle={show:!1},s[c].type="bar",s[c].stack="gender",s[c].barMaxWidth=60,s[c].barGap="6px",e.legend.data.push(s[c].name);s.forEach(function(t){t.data.forEach(function(t,e){n[e]?n[e]+=t:n[e]=t})}),e.series=s,e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,i){var a="",o="",r="";if(t.length>0){a+='<div style="font-size:14px;height:32px;color:#0069FF;border-radius:4px;line-height:36px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var s=0;s<t.length;s++)o=0==(r=0==t[s].data||0==n[t[s].dataIndex]?0:t[s].data/n[t[s].dataIndex])?"0%":(100*r).toFixed(2)+"%",a+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+t[s].seriesName+" : "+o+"</p>";return a+="</div>"}},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawAgeBar:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a={grid:{top:66,left:60,bottom:66,right:40},legend:{data:[],bottom:16,textStyle:{color:"#555",fontFamily:this.fontFamily,fontSize:12},itemGap:6,itemWidth:10,itemHeight:10},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{name:"人次",type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=o()({},a,e)).series){var r={},s=[],n=[];try{if(s=e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var l=0;l<e.series.length;l++){e.xAxis.data.push(e.series[l].name);for(var d=0;d<e.series[l].data.length;d++){r[e.xaxis.data[d]]=e.series[l].data[d];for(var p in r)s[d].name==p&&s[d].data.push(r[p]);r={}}}for(var c=0;c<s.length;c++)s[c].itemStyle={show:!1},s[c].type="bar",s[c].stack="gender",s[c].barMaxWidth=60,s[c].barCategoryGap="50px",e.legend.data.push(s[c].name);s.forEach(function(t){t.data.forEach(function(t,e){n[e]?n[e]+=t:n[e]=t})}),e.series=s,e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,i){var a="",o="",r="";if(t.length>0){a+='<div style="font-size:14px;height:32px;color:#0069FF;border-radius:4px;line-height:36px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var s=0;s<t.length;s++)o=0==(r=0==t[s].data||0==n[t[s].dataIndex]?0:t[s].data/n[t[s].dataIndex])?"0%":(100*r).toFixed(2)+"%",a+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+t[s].seriesName+" : "+o+"</p>";return a+="</div>"}},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawHoActBar:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a={color:["#3BB8FF","#87D14B","#6784E3"],grid:{top:66,left:60,bottom:66,right:40},legend:{data:[],bottom:16,textStyle:{color:"#555",fontFamily:this.fontFamily,fontSize:14},itemGap:34,itemWidth:10,itemHeight:10},tooltip:{trigger:"item",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{name:"人次",type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={show:!1,text:e.title,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=o()({},a,e)).series){var r={},s=[],n=[];try{if(s=e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var l=0;l<e.series.length;l++){e.xAxis.data.push(e.series[l].name);for(var d=0;d<e.series[l].data.length;d++){r[e.xaxis.data[d]]=e.series[l].data[d];for(var p in r)s[d].name==p&&s[d].data.push(r[p]);r={}}}for(var c=0;c<s.length;c++)s[c].itemStyle={normal:{barBorderRadius:7}},s[c].type="bar",s[c].barWidth=14,e.legend.data.push({name:s[c].name,icon:"circle"});s.forEach(function(t){t.data.forEach(function(t,e){n[e]?n[e]+=t:n[e]=t})}),e.series=s,e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,i){var a="",o="",r=null,s="";return o=t.name+t.seriesName,t.value>1e5?(r=(t.value/1e4).toFixed(2),s="万人次"):(r=t.value,s="人次"),a+='<div style="font-size: 14px;height: 32px;color: #0069FF;border-radius: 4px;line-height: 36px;padding-left: 15px;padding-right: 15px;text-align: left;">'+o+"</div><div>",a+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+r+s+"</p>",a+="</div>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawActBar:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a={color:["#3BB8FF","#87D14B","#6784E3"],grid:{top:80,left:70,bottom:97,right:45},legend:{data:[],bottom:26,textStyle:{color:"#555",fontFamily:this.fontFamily,fontSize:14},itemGap:34,itemWidth:10,itemHeight:10},tooltip:{trigger:"item",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{name:"人次",type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={show:!1,text:e.title,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=o()({},a,e)).series){var r={},s=[],n=[];try{if(s=e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var l=0;l<e.series.length;l++){e.xAxis.data.push(e.series[l].name);for(var d=0;d<e.series[l].data.length;d++){r[e.xaxis.data[d]]=e.series[l].data[d];for(var p in r)s[d].name==p&&s[d].data.push(r[p]);r={}}}for(var c=0;c<s.length;c++)s[c].itemStyle={normal:{barBorderRadius:7}},s[c].type="bar",s[c].barWidth=14,e.legend.data.push({name:s[c].name,icon:"circle"});s.forEach(function(t){t.data.forEach(function(t,e){n[e]?n[e]+=t:n[e]=t})}),e.series=s,e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,i){var a="",o="",r=null,s="";return o=t.name+t.seriesName,t.value>1e5?(r=(t.value/1e4).toFixed(2),s="万人次"):(r=t.value,s="人次"),a+='<div style="font-size: 14px;height: 32px;color: #0069FF;border-radius: 4px;line-height: 36px;padding-left: 15px;padding-right: 15px;text-align: left;">'+o+"</div><div>",a+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+r+s+"</p>",a+="</div>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawActLine:function(){},drawLineBg:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a={backgroundColor:"#fff",color:["#87D14B","#3BB8FF","#FFC62E","#FF9631","#7460EE"],tooltip:{show:!0,trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},grid:{top:60,left:60,bottom:60,right:45},yAxis:{type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:12,selected:{},textStyle:{color:"#555"},data:[]},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},data:[]};"string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26});var r=[{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(135, 209, 75, 0.4)"},{offset:1,color:"rgba(135, 209, 75, 0.2)"}],globalCoord:!1},{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 184, 255, 0.4)"},{offset:1,color:"rgba(59, 184, 255, 0.2)"}],globalCoord:!1}];if((e=o()({},a,e)).series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0)for(var s=0,n=e.series.length;s<n;s++){var l=e.series[s].name;e.series[s].type="line",e.series[s].showSymbol=!0,e.series[s].symbolSize=6,e.series[s].areaStyle={normal:{color:r[s]}},e.legend.data.push(e.series[s].name),l&&(e.legend.selected[l]=s<2)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500);e.tooltip.formatter=function(t,e,i){var a="";a+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px; text-align: left;">'+t[0].axisValue+"</div><div>";for(var o=0;o<t.length;o++)a+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[o].marker+" "+t[o].seriesName+"客流: "+(t[o].data?t[o].data:"--")+"人次</p>";return a+="</div>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawLine:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a={backgroundColor:"#fff",color:["#87D14B","#3BB8FF","#FFC62E","#FF9631","#7460EE"],tooltip:{show:!0,trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},grid:{top:60,left:60,bottom:66,right:40},yAxis:{type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:16,selected:{},textStyle:{color:"#555"},data:[]},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},data:[]};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=o()({},a,e)).series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0)for(var r=0,s=e.series.length;r<s;r++){var n=e.series[r].name;e.series[r].type="line",e.series[r].showSymbol=!0,e.legend.data.push(e.series[r].name),n&&(e.legend.selected[n]=r<2)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500);e.tooltip.formatter=function(t,i,a){var o="";if(o+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px; text-align: left;">'+t[0].axisValue+"</div><div>","rate"===e.seriesText)for(var r=0;r<t.length;r++)o+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[r].marker+" "+t[r].seriesName+": "+(t[r].data?t[r].data:"--")+"</p>";else for(var s=0;s<t.length;s++)o+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[s].marker+" "+t[s].seriesName+"客流: "+(t[s].data?t[s].data:"--")+"人次</p>";return o+="</div>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawYearLine:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a={backgroundColor:"#fff",color:["#87D14B","#3BB8FF","#FFC62E","#FF9631","#7460EE"],toolbox:{showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:"26px",right:"21px"},tooltip:{show:!0,trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},grid:{top:76,left:60,bottom:120,right:45},yAxis:{type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:64,selected:{},textStyle:{color:"#555"},data:[]},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}}};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=o()({},a,e)).series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0){for(var r=0,s=e.series.length;r<s;r++){var n=e.series[r].name;e.series[r].type="line",e.series[r].showSymbol=!0,e.legend.data.push(e.series[r].name),n&&(e.legend.selected[n]=r<2)}e.dataZoom={type:"slider",bottom:26}}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500);e.tooltip.formatter=function(t,e,i){var a="";a+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var o=0;o<t.length;o++)a+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[o].marker+" "+t[o].seriesName+"客流: "+(t[o].data?t[o].data:"--")+"人次</p>";return a+="</div>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawTfLine:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a="";if("开心指数"==e.title){a="开心指数";var r=[];e.series.forEach(function(t){t.data=t.data.map(function(t){if(t)return t=t.toFixed(3),r.push(t),t})})}var s={backgroundColor:"#fff",color:["#87D14B","#3BB8FF","#FFC62E","#FF9631","#7460EE"],tooltip:{show:!0,trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},grid:{top:48,left:40,bottom:48,right:30},yAxis:{name:a,type:"value",nameRotate:1,min:function(t){return Math.floor(10*t.min)/10},max:function(t){return Math.ceil(10*t.max)/10},splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:0,selected:{},textStyle:{color:"#555"},data:[]},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},data:[]};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:0,top:0}),(e=o()({},s,e)).series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0)for(var n=0,l=e.series.length;n<l;n++){var d=e.series[n].name;e.series[n].type="line",e.series[n].showSymbol=!0,e.legend.data.push(e.series[n].name),d&&(e.legend.selected[d]=n<2)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500);e.tooltip.formatter=function(t,e,i){var a="";a+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var o=0;o<t.length;o++)a+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[o].marker+" "+t[o].seriesName+": "+(t[o].data?t[o].data:"--")+"</p>";return a+="</div>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawPie:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});"string"==typeof(e=o()({},{backgroundColor:"#fff",tooltip:{show:!0,backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}},e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.legend={orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:30,bottom:26,selected:{},textStyle:{color:"#555"},data:[]};var a=0;if(e.series)if(e.series.length>0)if(e.series.forEach(function(t){t.data.forEach(function(t){a+=t.value})}),a>0){for(var r=0,s=e.series.length;r<s;r++){for(var n=0;n<e.series[r].data.length;n++)e.series[r].data[n].value||0==e.series[r].data[n].value?(e.series[r].data[n].name&&("未知"!==e.series[r].data[n].name?e.legend.selected[e.series[r].data[n].name]=!0:e.legend.selected[e.series[r].data[n].name]=!1),e.legend.data.push({name:e.series[r].data[n].name,icon:"rect"})):e.series[r].label.show=!1;e.series[r].type="pie",e.series[r].radius=["30%","60%"],e.series[r].center=["50%","50%"],e.series[r].itemStyle={emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},e.series[r].label={normal:{show:!0,position:"outside",formatter:"{b} {d}%"},emphasis:{show:!0}},e.series[r].labelLine={normal:{show:!0}}}e.tooltip.formatter=function(t,e,i){var o="",r="";return t.value||0==t.value?(r=t.value,(t.value/a*100).toFixed(2)+"%"):(r="--","--"),o+='<div><p style="font-size:14px; text-align: left; padding:4px 15px; color:"#444444"">'+t.name+": "+r+'人</p><p style="font-size:14px; text-align: left; padding:4px 15px; color:"#444444"">占比: '+t.percent+"%</p>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.series=[],i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500);else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500)},drawComtPie:function(t,e){var i=this,a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});"string"==typeof(e=o()({},{backgroundColor:"#fff",color:["#3BB8FF","#7460EE"],tooltip:{backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:30,selected:{},textStyle:{color:"#555"},data:[]}},e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.series&&(e.series.length>0?function(){e.series[0].data.forEach(function(t){-1===e.legend.data.indexOf(t.name)&&e.legend.data.push(t.name)});for(var t=e.series.length,a="",o=[],r="",s=0;s<t;s++)a=100/t*(s+1)-100/t/2+"%",o=t>=7?["30%","40%"]:["40%","50%"],e.series[s].center=[a,"50%"],e.series[s].radius=o,e.series[s].label={normal:{show:!0,position:"center",align:"center",verticalAlign:"middle",color:"#666",fontFamily:i.fontFamily,formatter:function(t){return r===t.seriesName?(r="",""):(r=t.seriesName,t.seriesName)}},emphasis:{show:!0,position:"center",align:"center",verticalAlign:"middle",color:"#666",fontFamily:i.fontFamily,formatter:function(t){return r!==t.seriesName?(r="",""):(r=t.seriesName,t.seriesName)}}},e.series[s].labelLine={normal:{show:!1}}}():(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500)),e.tooltip.formatter=function(t,e,i){var a="",o="";return o=t.value||0==t.value?t.value>1e5?(t.value/1e4).toFixed(2):t.value:"--",a+='<div style="font-size: 14px;height: 32px;color: #0069FF;border-radius: 4px;line-height: 36px;padding-left: 15px;padding-right: 15px;text-align: left;">'+t.seriesName+'</div><div><p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+t.name+": "+o+"</p></div>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e))},drawRadar:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});if("string"==typeof(e=o()({},{backgroundColor:"#fff",color:["#3BB8FF","#7460EE"],tooltip:{show:!1},legend:{icon:"line",data:[],bottom:66,left:"30%",orient:"vertical"},radar:{name:{textStyle:{fontSize:14,color:"#666",borderRadius:3,padding:[3,5]}},indicator:[],axisLine:{lineStyle:{color:"transparent"}},splitLine:{lineStyle:{color:"#ccc",width:3,type:"dotted"}},splitArea:{areaStyle:{color:"#fff"}}}},e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.series){var a=[],r=[],s=[];if(e.series.length>0){for(var n=0,l=e.series.length;n<l;n++)e.legend.data.push(e.series[n].name),a.push(e.series[n].data),s.push({name:e.series[n].name,value:e.series[n].data});if(2==a.length){for(var d=0;d<a[0].length;d++)a[0][d]>a[1][d]?r.push(a[0][d]):r.push(a[1][d]);e.radar.indicator=e.xaxis.data.map(function(t,e){return{name:t,max:r[e]+Math.ceil(r[e]/5)}})}else console.error("max length 不能小于2");e.series={type:"radar",data:s,lineStyle:{width:3}}}else{e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}};try{e.xAxis.data=[]}catch(t){}i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500)}i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawLineBar:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a={backgroundColor:"#fff",grid:{top:78,left:60,bottom:66,right:60},legend:{bottom:16,itemGap:65,itemWidth:12,itemHeight:12},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)",trigger:"axis"},color:["#3BB8FF","#87D14B","#FFC62E"],yAxis:[{name:"客流量",type:"value",splitLine:{lineStyle:{color:"#e8e8e8"}},axisLine:{lineStyle:{color:"#888"}}},{name:"增长率",type:"value",splitLine:{show:!1},axisTick:{show:!1},axisLine:{lineStyle:{color:"#888"}}}],xAxis:{type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:"#888"}},data:[]}};if("string"==typeof(e=o()({},a,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),e.series){try{e.xAxis.data=e.xaxis.data.map(function(t){return t})}catch(t){}if(e.series.length>0)for(var r=0,s=e.series.length;r<s;r++)e.series[r].itemStyle={barBorderRadius:7},e.series[r].barWidth=14,"line"===e.series[r].type?(e.series[r].yAxisIndex=1,e.series[r].symbolSize=6):(e.series[r].yAxisIndex=0,e.series[r].barGap="100%"),"avgWeekDay"===e.series[r].name?e.series[r].name="工作日平均客流":"avgWeekend"===e.series[r].name?e.series[r].name="双休日平均客流":e.series[r].name="增长率";else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#444",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500);e.tooltip.formatter=function(t,e,i){var a="",o="";return a+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px; text-align: left; color: #0068FF;">'+t[0].name+"</div><div>",t.length>2&&(t.forEach(function(t,e){"bar"===t.seriesType&&(o=t.data?t.data>1e5?(t.data/1e4).toFixed(2)+"万人":t.data+"人次":"--人次",a+='<p style="font-size:13px; padding:4px 15px; color:#444; text-align: left;">'+t.marker+" "+t.seriesName+": "+o+"</p>"),"line"===t.seriesType&&(a+='<p style="font-size:13px; padding:4px 15px; color:#444; text-align: left;">'+t.marker+" "+t.seriesName+": "+(t.data?t.data+"%":"--")+"</p>")}),a+="</div>"),a},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawRankBar:function(t,e){var i=this,a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});a.off("click"),a.on("click",function(t){var e=[],o="";/^\<|\>/g.test(t.name)?(e=t.name.match(/\d+/g),o=-1!==t.name.indexOf("<")?"-"+e[0]:e[0]+"-"):o=(e=t.name.match(/^\d+|\-\d+/g)).length>1?e[0]+e[1]:e[0];var r=t.dataIndex,s={series:[{itemStyle:{normal:{color:function(t){return t.dataIndex==r?"#0069FF":"#3BB8FF"}}}}]};a.setOption(s),i.$emit("emitSingle",o)});var r={grid:{top:70,left:60,bottom:66,right:40},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:20}),(e=o()({},r,e)).series){try{if(e.xAxis.data=e.xaxis.data,e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var s=0;s<e.series.length;s++)e.series[s].itemStyle={normal:{color:function(t){return 0==t.dataIndex?"#0069FF":"#3BB8FF"}}},e.series[s].type="bar",e.series[s].barMaxWidth="40px",e.series[s].barGap="6px";var n={TRAFFIC:"人次",ORDER:"单",HANDBAGRATE:"%",PREPRICE:"元/人",PERAREAVALUE:"元/平米",ENTERINGRATE:"%",DURATIONTIME:"分",DEPTH:"游逛深度",SALES:"元"};e.yAxis.name=n[e.kpiType],e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,i){var a="";if(t.length>0){a+='<div style="font-size:14px;height:32px;color:#0069FF;border-radius:4px;line-height:36px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var o=0;o<t.length;o++)a+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+(t[o].data>1e5?(t[o].data/1e4).toFixed(2):t[o].data)+(t[o].data>1e5?"万人":"人")+"</p>";return a+="</div>"}},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawGroupBar:function(t,e){var i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var a={tooltip:{backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{type:"value",splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:13,fontFamily:this.fontFamily,color:"#666"}},xAxis:{type:"category",splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:13,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof(e=o()({},a,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.series){var r=0;if(e.series.length>0){try{e.xAxis.data=e.xaxis.data}catch(t){}e.series.forEach(function(t){t.data.forEach(function(t){r+=t})});for(var s=0,n=e.series.length;s<n;s++)e.series[s].type="bar",e.series[s].barMaxWidth=40,e.series[s].barGap="6px"}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500);e.tooltip.formatter=function(t,e,i){var a="",o="",s="";return t.value||0==t.value?(o=t.value,s=(t.value/r*100).toFixed(2)+"%"):(o="--",s="--"),a+='<div style="font-size:16px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right:15px; text-align: left; color: #0068FF;">'+t.name+'</div><div><p style="font-size:14px; text-align: left; padding:4px 15px; color:"#444444"">人数: '+o+'人</p><p style="font-size:14px; text-align: left; padding:4px 15px; color:"#444444"">占比: '+s+"</p>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},computeSize:function(t,e,i){return i=i||1,t/i>e?(i+=1,this.computeSize(t,e,i)):i},getRandomColors:function(t){for(var e=[];e.length<t;){var i="#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6);e.push(i)}return e}}}),l={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:this.id,chartType:this.chartType}})},staticRenderFns:[]},d=i("VU/8")(n,l,!1,null,null,null);e.a=d.exports},HN3f:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mvHQ"),o=i.n(a),r=i("2IyC"),s=i("pJt5"),n={props:{propparam:Object},data:function(){return{residenceTimeTitle:"",residenceTimeOps:{},faceGenderTitle:"",faceGenderOps:{},faceAgeTitle:"",faceAgeOps:{},emitData:{},orgids:"",loading:!0,tableIds:"",tableKeyToId:{}}},components:{"common-chart":r.a,"export-data-dialog":s.a},watch:{propparam:{handler:"refreshHandle",immediate:!0}},mounted:function(){},methods:{refreshHandle:function(t){"/residencetime/rtasis"===t.dateType&&(this.emitData=t.data,this.orgids=t.data.asis_org,this.loading=!0,this.tableIds&&"{}"!==o()(this.tableKeyToId)?this.getTableData(this.tableIds):this.getTableId())},getTableId:function(){var t=this;this.tableKeyToId={},this.tableIds="",this.axios.get("/reportCharts",{params:{report:"residence",_t:Date.parse(new Date)/1e3}}).then(function(e){var i=e.data;i.data.forEach(function(e,a){t.tableKeyToId[e.key]=e.id,a==i.data.length-1?t.tableIds+=e.id:t.tableIds+=e.id+","}),t.getTableData(t.tableIds)})},getTableData:function(t){var e=this;if(t){this.residenceTimeOps={};var i={orgIds:this.emitData.asis_org,startDate:this.emitData.asis_time,endDate:this.emitData.asis_time,ResidenceStage:this.emitData.asis_stage,chartIds:this.tableKeyToId.customerfeature_residence,_t:Date.parse(new Date)/1e3};this.axios.get("/report/residence/mall",{params:i}).then(function(t){var i=t.data;e.residenceTimeTitle=i.data.body.customerfeature_residence.title;var a=i.data.body.customerfeature_residence;e.residenceTimeOps=a,e.singleBarHandle(e.emitData.asis_stage.split(",")[0])}).catch(function(t){})}},singleBarHandle:function(t){var e=this;this.faceGenderOps={},this.faceAgeOps={},this.axios.get("/report/residence/mall",{params:{orgIds:this.emitData.asis_org,startDate:this.emitData.asis_time,endDate:this.emitData.asis_time,ResidenceStage:t,chartIds:this.tableKeyToId.customerfeature_denger+","+this.tableKeyToId.customerfeature_age,_t:Date.parse(new Date)/1e3}}).then(function(i){var a=i.data,o=a.data.body.customerfeature_denger;/^\-/.test(t)?t="<"+(t=t.replace(/^\-/,"")):/-$/.test(t)&&(t=">"+(t=t.replace(/-$/,""))),o.color=["#3BB8FF","#FFC62E","#6784E3"],e.faceGenderTitle=t+"分钟性别统计",e.faceGenderOps=o;var r=a.data.body.customerfeature_age;r.color="#3BB8FF",e.faceAgeTitle=t+"分钟年龄统计",e.faceAgeOps=r}).catch(function(t){})},exportDataHandle:function(t,e,i){var a=this.tableKeyToId[i],o={domId:t,title:e,data:{url:window.apiUrl+"/report/faceAnalyzeSta/gate/"+a+"/excel",params:"orgIds="+this.emitData.orgIds+"&startDate="+this.emitData.startDate+"&endDate="+this.emitData.endDate}};console.log("residence rtasis exportNeed",o),this.$refs.exportDialog.dialogInit(o)}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"customgroup-wrapper"},[i("el-row",{staticClass:"chartRow",attrs:{gutter:12}},[i("el-col",{staticClass:"download-parent",attrs:{span:24}},[i("common-chart",{staticClass:"gender-wrapper",attrs:{id:"residenceChart",options:t.residenceTimeOps,chartType:"RankBar"},on:{emitSingle:t.singleBarHandle}}),t._v(" "),i("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.residenceTimeTitle))])],1)],1),t._v(" "),i("el-row",{staticClass:"chartRow",attrs:{gutter:12}},[i("el-col",{staticClass:"download-parent",attrs:{span:12}},[i("common-chart",{staticClass:"gender-wrapper",attrs:{id:"rgenderChart",options:t.faceGenderOps,chartType:"Pie"}}),t._v(" "),i("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.faceGenderTitle))]),t._v(" "),i("span",{staticClass:"download-text",on:{click:function(e){t.exportDataHandle("rgenderChart",t.i18nFormatter(t.faceGender_title),"customerfeature_age")}}},[t._v(t._s(t.$t("allPages.load")))])],1),t._v(" "),i("el-col",{staticClass:"download-parent",attrs:{span:12}},[i("common-chart",{staticClass:"age-wrapper",attrs:{id:"rageChart",options:t.faceAgeOps,chartType:"GroupBar"}}),t._v(" "),i("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.faceAgeTitle))]),t._v(" "),i("span",{staticClass:"download-text",on:{click:function(e){t.exportDataHandle("rageChart",t.i18nFormatter(t.faceAgeTitle),"customerfeature_denger")}}},[t._v(t._s(t.$t("allPages.load")))])],1)],1),t._v(" "),i("export-data-dialog",{ref:"exportDialog"})],1)},staticRenderFns:[]},d=i("VU/8")(n,l,!1,null,null,null);e.default=d.exports}});