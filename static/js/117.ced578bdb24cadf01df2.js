webpackJsonp([117],{aBhb:function(e,a){},tw56:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("yRql"),i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"manage-container deviceStatus-wrapper"},[t("el-row",{staticClass:"manage-head-wrapper"},[t("el-col",{attrs:{span:24,sm:24}},[t("div",{staticClass:"manage-select-box"},[t("el-select",{attrs:{filterable:"",placeholder:e.$t("pholder.shop")},on:{change:e.mallChange},model:{value:e.mallValue,callback:function(a){e.mallValue=a},expression:"mallValue"}},e._l(e.mallListForTerm,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),t("div",{staticClass:"manage-select-box"},[t("el-select",{attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:e.$t("pholder.Site")},on:{change:e.gateChange},model:{value:e.gateValue,callback:function(a){e.gateValue=a},expression:"gateValue"}},[t("div",{class:e.isGateSelAll?"sel-all-box selected":"sel-all-box",on:{click:function(a){e.selAllHandle()}}},[t("span",{staticClass:"custom-checkbox__input"},[t("span",{staticClass:"custom-checkbox__inner"})]),e._v(" "),t("span",{staticStyle:{"padding-left":"5px"}},[e._v(e._s(e.$t("allPages.all")))])]),e._v(" "),e._l(e.gateList,function(a){return t("el-option",{key:a.id,attrs:{label:a.name,value:a.id}},[t("span",{staticClass:"custom-checkbox__input"},[t("span",{staticClass:"custom-checkbox__inner"})]),e._v(" "),t("span",{staticStyle:{"padding-left":"5px"}},[e._v(e._s(a.name))])])})],2)],1),e._v(" "),t("div",{staticClass:"manage-select-box"},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:e.$t("pholder.date")},model:{value:e.date,callback:function(a){e.date=a},expression:"date"}})],1),e._v(" "),t("div",{staticClass:"manage-input-box"},[t("el-input",{staticClass:"search-inp",attrs:{placeholder:"请输入差值进行筛选",clearable:""},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key))return null;e.getGateData(a)}},model:{value:e.differenceVal,callback:function(a){e.differenceVal=a},expression:"differenceVal"}})],1),e._v(" "),t("el-button",{staticClass:"search-btn",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){e.getGateData()}}},[e._v(e._s(e.$t("button.search")))])],1)],1),e._v(" "),t("el-row",{staticClass:"manage-content"},[t("el-col",{attrs:{span:24}},[t("el-table",{staticClass:"data-compare-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"cell-class-name":e.setCellClass,"max-height":e.tableHeight,"header-row-class-name":"manage-tab-head"},on:{"cell-mouse-enter":e.cellMouse,"cell-mouse-leave":e.cellMouseLeave}},[t("el-table-column",{attrs:{prop:"tabOrder",align:"center",label:e.$t("table.order"),width:"100"}}),e._v(" "),t("el-table-column",{attrs:{label:"年龄",align:"center"}},[t("el-table-column",{attrs:{prop:"raw_age",label:"前端",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"age",label:"后端",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"ageVal",label:"差值",align:"center"}})],1),e._v(" "),t("el-table-column",{attrs:{label:"性别",align:"center"}},[t("el-table-column",{attrs:{prop:"raw_gender",label:"前端",align:"center",formatter:e.genderFormatter}}),e._v(" "),t("el-table-column",{attrs:{prop:"gender",label:"后端",align:"center",formatter:e.genderFormatter}})],1),e._v(" "),t("el-table-column",{attrs:{prop:"date",label:"时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"人脸图",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("img",{staticClass:"bloc-img",attrs:{slot:"reference",src:e.imgFormatter(a.row.path),alt:e.imgFormatter(a.row.path),width:"50",height:"50"},on:{error:e.dealErrImg},slot:"reference"})]}}])})],1),e._v(" "),t("el-pagination",{staticClass:"manage-pagination-box",attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"sizes, prev, pager, next, slot",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.cerrentChange}},[t("span",{staticClass:"slot-pagination-ele slot-ele-total"},[e._v(e._s(e.$t("table.pageHead"))+" "+e._s(e.total)+" "+e._s(e.$t("table.pageTail")))])])],1)],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.popoverVisible,expression:"popoverVisible"}],staticClass:"pic-popover",style:e.popPosition,attrs:{id:"hoverImg"}},[t("div",{staticStyle:{width:"200px",height:"200px",margin:"0 auto"}},[t("img",{staticClass:"hover-pic",attrs:{src:e.hoverPic,alt:""},on:{error:e.dealErrImg}})])])],1)},staticRenderFns:[]},n=function(e){t("aBhb")},s=t("VU/8")(l.a,i,!1,n,"data-v-935aaaf2",null);a.default=s.exports},yRql:function(e,a,t){"use strict";(function(e){var l=t("3MSA"),i=t.n(l);a.a={data:function(){return{mallListForTerm:[],gateList:[],mallValue:"",gateValue:[],tableHeight:0,tableData:[],total:0,pageSize:10,currentPage:1,isSup:!1,date:dateUnit.dateFormat(new Date,"yyyy-MM-dd"),isGateSelAll:!1,differenceVal:null,popoverVisible:!1,hoverPic:"",popPosition:{}}},watch:{},components:{},created:function(){this.isSup="super"===this.$cookie.get("user_type");var a=e(window).height();this.tableHeight=a-.24*a,this.getMallListForTerm()},mounted:function(){},methods:{i18n:function(e){var a="pholder."+e;return"allFloor"==e?this.$t(a):e},bindRow:function(){this.$refs.bindModel.dialogInit()},addDeviceHandle:function(){this.$refs.addeviceModel.dialogInit(this.mallValue)},getGateData:function(){var e=this;this.tableData=[],this.axios.get("/faceRecognitionRaws/comparedData",{params:{mallId:this.mallValue,gateIds:this.gateValue?this.gateValue.join(","):null,date:this.date,direction:1,page:this.currentPage,pageSize:this.pageSize,_t:Date.parse(new Date)/1e3}}).then(function(a){var t=a.data;t.data.list.forEach(function(a,t){if(a.tabOrder=(e.currentPage-1)*e.pageSize+t+1,a.ageVal=Number(a.raw_age)-Number(a.age),e.differenceVal){var l=Math.abs(Number(e.differenceVal));(Number(a.ageVal)<=-l||Number(a.ageVal)>=l)&&e.tableData.push(a)}else e.tableData.push(a)}),e.total=t.data.total}).catch(function(e){})},sizeChange:function(e){this.pageSize=e,this.getGateData()},cerrentChange:function(e){this.currentPage!=e&&(this.currentPage=e,this.getGateData())},searchFun:function(){this.currentPage=1},mallChange:function(){this.setSessionLocal("manageMallId",this.mallValue),this.getGateList(this.mallValue)},gateChange:function(){this.isGateSelAll=this.gateValue.length==this.gateList.length},getMallListForTerm:function(){var e=this;this.mallListForTerm=[],this.mallValue="",this.axios.get("/malls",{params:{accountId:this.$cookie.get("accountId"),_t:Date.parse(new Date)/1e3}}).then(function(a){var t=a.data;t.data.length&&(e.getSessionLocal("manageMallId")?e.mallValue=Number(e.getSessionLocal("manageMallId")):(e.mallValue=t.data[0].id,e.setSessionLocal("manageMallId",e.mallValue)),e.mallListForTerm=t.data),e.getGateList(e.mallValue)}).catch(function(e){})},getGateList:function(e){var a=this;this.gateValue=[],this.gateList=[],this.axios.get("/gates",{params:{mallId:e,isHasFace:1,_t:Date.parse(new Date)/1e3}}).then(function(e){var t=e.data.data;a.gateList=t,t.forEach(function(e,t){a.gateValue.push(e.id)}),a.isGateSelAll=a.gateValue.length==a.gateList.length,a.getGateData()}).catch(function(e){})},selAllHandle:function(e){var a=this;this.isGateSelAll?(this.isGateSelAll=!1,this.gateValue.length==this.gateList.length&&(this.gateValue=[])):(this.isGateSelAll=!0,this.gateValue.length==this.gateList.length?this.gateValue=[]:(this.gateValue=[],this.gateList.forEach(function(e){a.gateValue.push(e.id)})))},setCellClass:function(e){var a=e.row,t=(e.column,e.rowIndex,e.columnIndex);if(a.raw_gender!=a.gender&&5==t)return"caveat-cell"},cellMouse:function(e,a,t,l){var n=l||window.event,s=window.innerHeight-n.pageY,r=window.innerWidth-n.pageX,o=s>220?n.pageY:n.pageY-s,c=r>220?n.pageX:n.pageX-r;this.hoverPic=e.path?window.picUrl+"/"+e.path:i.a,this.popPosition={left:c+"px",top:o+"px"},this.popoverVisible=!0},cellMouseLeave:function(e,a,t,l){this.popoverVisible=!1},genderFormatter:function(e,a,t,l){return 1===t?"男":0===t?"女":"未知"},imgFormatter:function(e){return e?window.picUrl+"/"+e:i.a},dealErrImg:function(e){(e||window.event).target.src=i.a}}}}).call(a,t("7t+N"))}});