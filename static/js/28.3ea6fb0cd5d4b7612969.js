webpackJsonp([28],{N7Su:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("qpO6"),s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"customgroup-wrapper"},[e("el-header",{attrs:{height:"70px"}},[e("span",{staticClass:"behavior-title"},[t._v(t._s(t.repTitle)+t._s(t.$t("Behavior.mallGroup")))]),t._v(" "),e("span",{staticClass:"more-option-wrapper",on:{click:t.showCollapse}},[e("span",{staticClass:"more-option-text"},[t._v(t._s(t.$t("Behavior.moreOp")))]),t._v(" "),e("i",{class:t.moreOptVisible?"el-icon-arrow-down more-option-arrow":"el-icon-arrow-down more-option-arrow more-option-up"})])]),t._v(" "),e("test-option",{directives:[{name:"show",rawName:"v-show",value:t.moreOptVisible,expression:"moreOptVisible"}],ref:"searchRef",on:{emitParams:t.getPatams,startLoading:t.startLoad}}),t._v(" "),e("div",{staticClass:"element-main behavior-main"},[e("div",{staticClass:"asis-table-wrapper"},[e("h3",{staticClass:"asis-table-header"},[e("span",{staticClass:"asis-table-title"},[t._v(t._s(t.i18nFormatter(t.customData_title)))]),t._v(" "),e("span",{staticClass:"asis-table-download",on:{click:function(a){t.exportDataHandle("domFeaDayCounting",t.i18nFormatter(t.customData_title),"faceCountDetail")}}},[t._v(t._s(t.$t("allPages.load")))])]),t._v(" "),e("div",{staticClass:"asis-table-content"},[e("common-tab",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{tableData:t.customData_ops,id:"domFeaDayCounting",headData:t.customData_head,tabHeight:""}})],1)]),t._v(" "),e("el-row",{staticClass:"chartRow",attrs:{gutter:12}},[e("el-col",{staticClass:"download-parent",attrs:{span:12}},[e("common-chart",{staticClass:"gender-wrapper",attrs:{id:"dgenderChart",options:t.customerfeatureGender_ops,chartType:"Pie"}}),t._v(" "),e("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.i18nFormatter(t.faceGender_title)))]),t._v(" "),e("span",{staticClass:"download-text",on:{click:function(a){t.exportDataHandle("dgenderChart",t.i18nFormatter(t.faceGender_title),"faceGender")}}},[t._v(t._s(t.$t("allPages.load")))])],1),t._v(" "),e("el-col",{staticClass:"download-parent",attrs:{span:12}},[e("common-chart",{staticClass:"age-wrapper",attrs:{id:"dageChart",options:t.customerfeatureAge_ops,chartType:"GroupBar"}}),t._v(" "),e("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.i18nFormatter(t.faceAge_title)))]),t._v(" "),e("span",{staticClass:"download-text",on:{click:function(a){t.exportDataHandle("dageChart",t.i18nFormatter(t.faceAge_title),"faceAge")}}},[t._v(t._s(t.$t("allPages.load")))])],1)],1)],1),t._v(" "),e("export-data-dialog",{ref:"exportDialog"})],1)},staticRenderFns:[]},i=function(t){e("za0C")},o=e("VU/8")(l.a,s,!1,i,"data-v-136e33cf",null);a.default=o.exports},gzyZ:function(t,a,e){"use strict";var l={data:function(){return{date1:"",pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()}},mallName:"",mallVal:"",mallOpt:[],timeVal:[],account_id:"",all_id:[],isAll:!1,isSingle:!1,arr:[],idArr:[],isSelAll:!1}},created:function(){this.timeVal=[dateUnit.dateFormat(new Date,"yyyy-MM-dd"),dateUnit.dateFormat(new Date,"yyyy-MM-dd")],this.account_id=this.$cookie.get("accountId")},mounted:function(){this.getMallList()},methods:{getMallList:function(){var t=this;this.mallOpt=[],this.mallVal="",this.mallName="",this.isSelAll=!1,this.axios.get("/malls",{params:{accountId:this.account_id,status:1,_t:Date.parse(new Date)/1e3}}).then(function(a){var e=a.data.data,l="";if(e.length>0){var s=window.sessionStorage.getItem("mallId");s&&Number(s),t.mallOpt=e,e.forEach(function(t,a){s&&t.id==s&&(l=t.name+" ")}),t.mallName=l||e[0].name+" ",t.mallVal=s?[Number(s)]:[e[0].id],t.mallVal.length==t.mallOpt.length&&(t.isSelAll=!0),t.arr=[e[0].id],t.idArr=[e[0].id],t.clickHandle()}}).catch(function(t){})},chooseMall:function(){var t=this;this.isSelAll=(this.isSelAll,!(this.mallVal.length<this.mallOpt.length)),this.monitoryName="",this.mallVal.length>0&&this.mallOpt.forEach(function(a){a.id==t.mallVal[0]&&(t.mallName=a.name+" ")})},selAllHandle:function(){var t=this;this.isSelAll?(this.isSelAll=!1,this.mallVal.length==this.mallOpt.length&&(this.mallVal=[])):(this.isSelAll=!0,this.mallVal.length==this.mallOpt.length?this.mallVal=[]:(this.mallVal=[],this.mallOpt.forEach(function(a){t.mallVal.push(a.id)})))},clickHandle:function(){var t=this;this.$emit("startLoading","mallGroup");for(var a=0;a<this.mallVal.length;a++)"all"!==this.mallVal[a]&&this.idArr.push(this.mallVal[a]);this.timeVal.length<=1&&(this.timeVal=[dateUnit.dateFormat(new Date,"yyyy-MM-dd"),dateUnit.dateFormat(new Date,"yyyy-MM-dd")]),setTimeout(function(){var a="";t.idArr.forEach(function(t,e,l){a+=t+","}),t.idArr=[],a=a.substring(0,a.length-1);var e=t.timeVal[0],l=t.timeVal[1],s={orgIds:a,startDate:e,endDate:l,title:t.mallName+e+"è‡³"+l+" "};t.$emit("emitParams",s)},1e3)}}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"behavior-more-option behavior-test-option"},[e("div",{staticClass:"opt-left"},[e("div",{staticClass:"test-opt-mall opt-mall-sel"},[e("el-select",{staticClass:"mall-opt",attrs:{filterable:"",placeholder:t.$t("pholder.shopSelect"),multiple:"","collapse-tags":""},on:{change:t.chooseMall},model:{value:t.mallVal,callback:function(a){t.mallVal=a},expression:"mallVal"}},[e("div",{class:t.isSelAll?"sel-all-box selected":"sel-all-box",on:{click:t.selAllHandle}},[e("span",{staticClass:"custom-checkbox__input"},[e("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),e("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(t.$t("allPages.all")))])]),t._v(" "),t._l(t.mallOpt,function(a,l){return e("el-option",{key:a.value,attrs:{label:a.name,value:a.id}},[e("span",{staticClass:"custom-checkbox__input"},[e("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),e("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(a.name))])])})],2)],1),t._v(" "),e("div",{staticClass:"test-opt-time"},[e("el-date-picker",{staticClass:"time-opt",attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"daterange",size:"mini","picker-options":t.pickerOptions1,"range-separator":"-","start-placeholder":t.$t("pholder.startDate"),"end-placeholder":t.$t("pholder.endDate")},model:{value:t.timeVal,callback:function(a){t.timeVal=a},expression:"timeVal"}})],1)]),t._v(" "),e("div",{staticClass:"opt-right"},[e("el-button",{staticClass:"primary-btn behavior-collapse-btn",attrs:{type:"primary",size:"samll"},on:{click:t.clickHandle}},[t._v(t._s(t.$t("button.confirm")))])],1)])},staticRenderFns:[]},i=e("VU/8")(l,s,!1,function(t){e("ob5D")},"data-v-13968f27",null);a.a=i.exports},ob5D:function(t,a){},qpO6:function(t,a,e){"use strict";(function(t){var l=e("pJt5"),s=e("gzyZ"),i=e("3MSA"),o=e.n(i),r=e("DQZ8"),n=e("064L");a.a={data:function(){return{moreOptVisible:!1,tableData:[],defaultImg:o.a,currentPage:1,pageArr:[10,50,100],pageSize:10,totalPage:null,repTitle:"",loading:!0,tableHeight:0,customData_title:"",faceGender_title:"",faceAge_title:"",customData_ops:[],customData_head:[{label:this.$t("table.totalCount"),prop:"all"},{label:this.$t("table.totalNum"),prop:"allPeople"},{label:this.$t("table.customerCount"),prop:"custom"},{label:this.$t("table.customerNum"),prop:"customPeople"},{label:this.$t("table.staffManTime"),prop:"clerk"},{label:this.$t("table.staffNum"),prop:"clerkPeople"}],tableKeyToId:{},tableIds:"",emitData:{},customerfeatureAge_ops:{},customerfeatureGender_ops:{}}},components:{"test-option":s.a,"common-tab":r.a,"common-chart":n.a,"export-data-dialog":l.a},created:function(){var a=this;window.addEventListener("resize",function(){try{var e={chart1:t("#dgenderChart")[0],chart2:t("#dageChart")[0]};for(var l in e)if(e.hasOwnProperty(l)&&void 0!=e[l]){e[l]=a.$echarts.init(e[l]);e[l].resize()}a.moreOptVisible=!1,a.showCollapse()}catch(t){}})},mounted:function(){this.showCollapse()},methods:{showCollapse:function(){var a=this,e="",l="",s="",i="";e=this.getStyleFn(".el-header","height"),l=this.getStyleFn(".customgroup-wrapper .el-header","height"),this.moreOptVisible?(this.moreOptVisible=!1,i=e+l+8+"px",t(".behavior-main").animate({marginTop:i})):(this.moreOptVisible=!0,setTimeout(function(){s=document.documentMode?(s=a.getStyleFn(".behavior-more-option","height"))+a.getStyleFn(".behavior-more-option","paddingTop")+a.getStyleFn(".behavior-more-option","paddingBottom"):a.getStyleFn(".behavior-more-option","height"),i=e+l+s+8+"px",t(".behavior-main").animate({marginTop:i})},100))},getTableId:function(){var t=this;this.tableKeyToId={},this.tableIds="",this.axios.get("/reportCharts",{params:{report:"faceAnalyzeSta",_t:Date.parse(new Date)/1e3}}).then(function(a){var e=a.data.data;e.forEach(function(a,l){t.tableKeyToId[a.key]=a.id,l==e.length-1?t.tableIds+=a.id:t.tableIds+=a.id+","}),t.getTableData(t.tableIds)})},getTableData:function(t){var a=this;if(this.tableIds){var e="",l={};e="/report/faceAnalyzeSta/mall",l={orgIds:this.emitData.orgIds,startDate:this.emitData.startDate,endDate:this.emitData.endDate,chartIds:t,_t:Date.parse(new Date)/1e3},this.axios.get(e,{params:l}).then(function(t){setTimeout(function(){a.loading=!1},500);var e="faceAnalyzeSta",l=t.data.data.body.faceCountDetail.series;a.customData_title=e+"faceCountDetail";var s={},i={};(s=t.data.data.body.faceGender).color=["#3BB8FF","#FFC62E","#6784E3"],a.customerfeatureGender_ops=s,a.faceGender_title=e+"faceGender",(i=t.data.data.body.faceAge).color="#3BB8FF",a.customerfeatureAge_ops=i,a.faceAge_title=e+"faceAge",a.customData_ops=a.dealData(l,a.customData_head)}).catch(function(t){console.log("base err:",t.message,t)})}},startLoad:function(t){"mallGroup"===t&&(this.customData_ops=[],this.loading=!0,this.customerfeatureAge_ops={},this.customerfeatureGender_ops={})},getPatams:function(t){this.emitData=t,this.repTitle=t.title,this.tableIds?this.getTableData(this.tableIds):this.getTableId()},dealData:function(t,a){var e={},l=[],s="";return t.forEach(function(t){if(t.data.length<a.length){for(var i=0,o=t.data.length;i<o;i++)s=a[i].prop,e[s]=t.data[i]||0==t.data[i]?t.data[i]:"--";for(var r=t.data.length;r<a.length;r++)s=a[r].prop,e[s]="--"}else for(var n=0,c=t.data.length;n<c;n++)s=a[n].prop,e[s]=t.data[n]||0==t.data[n]?t.data[n]:"--";l.push(e),e={}}),l},exportDataHandle:function(t,a,e){var l={domId:t,title:a,data:{url:"/report/faceAnalyzeSta/mall/"+this.tableKeyToId[e]+"/excel",params:"orgIds="+this.emitData.orgIds+"&startDate="+this.emitData.startDate+"&endDate="+this.emitData.startDate}};this.$refs.exportDialog.dialogInit(l)}}}}).call(a,e("7t+N"))},za0C:function(t,a){}});