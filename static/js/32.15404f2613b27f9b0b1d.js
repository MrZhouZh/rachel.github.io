webpackJsonp([32],{"/s84":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("yqhM"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customgroup-wrapper"},[a("el-header",{attrs:{height:"70px"}},[a("span",{staticClass:"behavior-title"},[t._v(t._s(t.repTitle)+t._s(t.$t("Behavior.effectiveflow")))]),t._v(" "),a("span",{staticClass:"more-option-wrapper",on:{click:t.showCollapse}},[a("span",{staticClass:"more-option-text"},[t._v(t._s(t.$t("Behavior.moreOp")))]),t._v(" "),a("i",{class:t.moreOptVisible?"el-icon-arrow-down more-option-arrow":"el-icon-arrow-down more-option-arrow more-option-up"})])]),t._v(" "),a("eff-option",{directives:[{name:"show",rawName:"v-show",value:t.moreOptVisible,expression:"moreOptVisible"}],ref:"searchRef",on:{emitParams:t.getPatams,startLoading:t.startLoad}}),t._v(" "),a("div",{staticClass:"element-main behavior-main"},[a("div",{staticClass:"asis-table-wrapper"},[a("h3",{staticClass:"asis-table-header"},[a("span",{staticClass:"asis-table-title"},[t._v(t._s(t.i18nFormatter(t.effData_title)))]),t._v(" "),a("span",{staticClass:"asis-table-download",on:{click:function(e){t.dealExport("domFeaDayCounting",t.i18nFormatter(t.effData_title))}}},[t._v(t._s(t.$t("allPages.load")))])]),t._v(" "),a("div",{staticClass:"asis-table-content new-old-customer"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{id:"domFeaDayCounting",data:t.tableData,"max-height":t.tableHeight,"header-row-class-name":"manage-tab-head","row-class-name":"manage-row","tooltip-effect":"light"}},[a("el-table-column",{attrs:{label:t.$t("table.mall"),align:"center",prop:"mall.name","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.date"),align:"center",prop:"countdate",formatter:t.dateFormatter,width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.newCustomer"),align:"center"}},[a("el-table-column",{attrs:{label:t.$t("table.personCount"),align:"center",prop:"newCustomCount"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.male"),align:"center",prop:"newMaleCount"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.female"),align:"center",prop:"newFemaleCount"}})],1),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.oldCustomer"),align:"center"}},[a("el-table-column",{attrs:{label:t.$t("table.personCount"),align:"center",prop:"regularCustomCount"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.male"),align:"center",prop:"regularMaleCount"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.female"),align:"center",prop:"regularFemaleCount"}})],1),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.staff"),align:"center"}},[a("el-table-column",{attrs:{label:t.$t("table.person"),align:"center",prop:"staffMantime"}})],1),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.total"),align:"center"}},[a("el-table-column",{attrs:{label:t.$t("table.person"),align:"center",prop:"personMantime"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.personCount"),align:"center",prop:"customCount"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.male"),align:"center",prop:"maleCount"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.female"),align:"center",prop:"femaleCount"}})],1)],1)],1)])])],1)},staticRenderFns:[]},s=function(t){a("hEcZ")},n=a("VU/8")(l.a,i,!1,s,"data-v-25b23356",null);e.default=n.exports},"J79+":function(t,e){},T8Te:function(t,e,a){"use strict";var l={data:function(){return{pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()}},mallName:"",mallVal:[],mallOpt:[],timeVal:[],account_id:"",analyasisTime:[{label:"month",value:"month",is_active:"time-btn"},{label:"year",value:"year",is_active:"time-btn"},{label:"custom",value:"custom",is_active:"time-btn"}],reportTime:{isMonth:!1,isYear:!1,isCustom:!1},monthTime:"",yearTime:"",customTime:"",isMallSelAll:!1}},created:function(){this.account_id=this.$cookie.get("accountId"),this.customTime=[this.dayReduce(new Date,30),dateUnit.dateFormat(new Date,"yyyy-MM-dd")],this.monthTime=this.monthTime?this.monthTime:new Date,this.yearTime=this.yearTime?this.yearTime:new Date,this.timeHandle(0)},mounted:function(){this.getMallList()},methods:{i18n:function(t){var e="asisTab."+t;return this.$t(e)},timeHandle:function(t){if("time-btn"===this.analyasisTime[t].is_active){this.analyasisTime.forEach(function(t){t.is_active="time-btn"});for(var e in this.reportTime)this.reportTime[e]=!1;this.analyasisTime[t].is_active="time-btn active-time";switch(this.analyasisTime[t].value){case"month":this.reportTime.isMonth=!0;break;case"year":this.reportTime.isYear=!0;break;case"custom":this.reportTime.isCustom=!0}}},getMallList:function(){var t=this;this.mallOpt=[],this.mallVal=[],this.mallName="",this.axios.get("/malls",{params:{accountId:this.account_id,status:1,_t:Date.parse(new Date)/1e3}}).then(function(e){var a=e.data.data,l="";if(a.length>0){var i=window.sessionStorage.getItem("mallId");i&&Number(i),t.mallOpt=a,a.forEach(function(t,e){i&&t.id==i&&(l=t.name+" ")}),t.mallName=l||a[0].name+" ",t.mallVal=i?[Number(i)]:[a[0].id],t.isMallSelAll=t.mallVal.length==t.mallOpt.length,t.clickHandle()}}).catch(function(t){})},chooseMall:function(){var t=this;this.isMallSelAll=(this.isMallSelAll,!(this.mallVal.length<this.mallOpt.length)),this.monitoryName="",this.mallVal&&this.mallOpt.forEach(function(e){e.id==t.mallVal&&(t.mallName=e.name)})},dealDate:function(){var t=[],e="",a="";if(this.reportTime.isMonth){if(this.monthTime.getMonth()===(new Date).getMonth()&&this.monthTime.getFullYear()===(new Date).getFullYear())a=dateUnit.dateFormat(this.monthTime,"yyyy-MM-dd"),(e=dateUnit.dateFormat(new Date(Date.parse(this.monthTime.getFullYear()+"/"+(this.monthTime.getMonth()+1)+"/01")),"yyyy-MM-dd"))==a&&(a=dateUnit.dateFormat(new Date,"yyyy-MM-dd"));else{e=this.monthTime,a=new Date(Date.parse(this.dayAdd(this.monthTime,31).replace(/\-/,"/")));var l=this.unitTime(e,a,"month");e=l.startTime,a=l.endTime}t=[e,a]}if(this.reportTime.isYear){if(this.yearTime.getFullYear()===(new Date).getFullYear())a=dateUnit.dateFormat(this.yearTime,"yyyy-MM-dd"),(e=dateUnit.dateFormat(new Date(Date.parse(this.yearTime.getFullYear()+"/01/01")),"yyyy-MM-dd"))==a&&(a=dateUnit.dateFormat(new Date,"yyyy-MM-dd"));else{e=this.yearTime,a=new Date(Date.parse(this.dayAdd(this.yearTime,365).replace(/\-/,"/")));var i=this.unitTime(e,a,"year");e=i.startTime,a=i.endTime}t=[e,a]}return this.reportTime.isCustom&&(t=this.customTime),t},clickHandle:function(){var t=this;this.$emit("startLoading","effectiveflow");var e=this.dealDate();setTimeout(function(){var a={mallId:t.mallVal.join(","),startDate:e[0],endDate:e[1],title:t.mallName+" "+e[0]+"至"+e[1]+" "};t.$emit("emitParams",a)},1e3)},selAllHandle:function(t){var e=this;"mall"===t&&(this.isMallSelAll?(this.isMallSelAll=!1,this.mallVal.length==this.mallOpt.length&&(this.mallVal=[])):(this.isMallSelAll=!0,this.mallVal.length==this.mallOpt.length?this.mallVal=[]:(this.mallVal=[],this.mallOpt.forEach(function(t){e.mallVal.push(t.id)}))))}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"behavior-more-option behavior-test-option"},[a("div",{staticClass:"opt-left"},[a("div",{staticClass:"test-opt-mall"},[a("el-select",{staticClass:"mall-opt",attrs:{filterable:"",placeholder:t.$t("pholder.shopSelect"),multiple:"","collapse-tags":""},on:{change:t.chooseMall},model:{value:t.mallVal,callback:function(e){t.mallVal=e},expression:"mallVal"}},[a("div",{class:t.isMallSelAll?"sel-all-box selected":"sel-all-box",on:{click:function(e){t.selAllHandle("mall")}}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(t.$t("allPages.all")))])]),t._v(" "),t._l(t.mallOpt,function(e,l){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(e.name))])])})],2)],1),t._v(" "),a("div",{staticClass:"test-opt-date"},t._l(t.analyasisTime,function(e,l){return a("span",{key:e.label,staticClass:"time-box",on:{click:function(e){t.timeHandle(l)}}},[a("span",{class:e.is_active},[t._v(t._s(t.i18n(e.label)))])])})),t._v(" "),a("div",{staticClass:"test-opt-time"},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.reportTime.isMonth,expression:"reportTime.isMonth"}],staticClass:"date-input analysis-date-input",attrs:{align:"right",type:"month",format:"yyyy 年 MM 月",size:"mini",placeholder:t.$t("pholder.month"),"picker-options":t.pickerOptions1},model:{value:t.monthTime,callback:function(e){t.monthTime=e},expression:"monthTime"}}),t._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.reportTime.isYear,expression:"reportTime.isYear"}],staticClass:"date-input analysis-date-input",attrs:{align:"right",type:"year",format:"yyyy 年",size:"mini",placeholder:t.$t("pholder.year"),"picker-options":t.pickerOptions1},model:{value:t.yearTime,callback:function(e){t.yearTime=e},expression:"yearTime"}}),t._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.reportTime.isCustom,expression:"reportTime.isCustom"}],staticClass:"time-opt time-opt-custom",attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"daterange",size:"mini","picker-options":t.pickerOptions1,"range-separator":"-","start-placeholder":t.$t("table.startTime"),"end-placeholder":t.$t("table.endTime")},model:{value:t.customTime,callback:function(e){t.customTime=e},expression:"customTime"}})],1)]),t._v(" "),a("div",{staticClass:"opt-right"},[a("el-button",{staticClass:"primary-btn behavior-collapse-btn",attrs:{type:"primary",size:"samll"},on:{click:t.clickHandle}},[t._v(t._s(t.$t("button.confirm")))])],1)])},staticRenderFns:[]},s=a("VU/8")(l,i,!1,function(t){a("J79+")},"data-v-0f3c60d8",null);e.a=s.exports},hEcZ:function(t,e){},yqhM:function(t,e,a){"use strict";(function(t){var l=a("T8Te");e.a={data:function(){return{params:{url:"",param:""},moreOptVisible:!1,tableData:[],repTitle:"",loading:!0,tableHeight:0,effData_title:"effectiveflow",emitData:{},nameIndexArr:[]}},components:{"eff-option":l.a},created:function(){var t=this;this.tableHeight=this.computedWinH("px"),window.addEventListener("resize",function(){t.tableHeight=t.computedWinH("px"),t.moreOptVisible=!1,t.showCollapse()})},mounted:function(){this.showCollapse()},methods:{showCollapse:function(){var e=this,a="",l="",i="",s="";a=this.getStyleFn(".el-header","height"),l=this.getStyleFn(".customgroup-wrapper .el-header","height"),this.moreOptVisible?(this.moreOptVisible=!1,s=a+l+8+"px",t(".behavior-main").animate({marginTop:s})):(this.moreOptVisible=!0,setTimeout(function(){i=document.documentMode?(i=e.getStyleFn(".behavior-more-option","height"))+e.getStyleFn(".behavior-more-option","paddingTop")+e.getStyleFn(".behavior-more-option","paddingBottom"):e.getStyleFn(".behavior-more-option","height"),s=a+l+i+8+"px",t(".behavior-main").animate({marginTop:s})},100))},getTableData:function(){var t=this,e="",a={};e="/mallDayFaceRecognitionStas",a={mallId_arr:this.emitData.mallId,countdate_gte:this.emitData.startDate,countdate_lte:this.emitData.endDate,sortName:'"mallDayFaceRecognitionSta".mall_id , "mallDayFaceRecognitionSta".countdate',_t:Date.parse(new Date)/1e3},this.tableData=[],this.axios.get(e,{params:a}).then(function(e){setTimeout(function(){t.loading=!1},500);var a=e.data;t.tableData=a.data,t.tableData.forEach(function(t){t.newCustomCount=t.customCount-t.regularCustomCount?t.customCount-t.regularCustomCount:0,t.newMaleCount=t.maleCount-t.regularMaleCount?t.maleCount-t.regularMaleCount:0,t.newFemaleCount=t.femaleCount-t.regularFemaleCount?t.femaleCount-t.regularFemaleCount:0})}).catch(function(t){console.log(" err:",t.message,t)})},dateFormatter:function(t,e,a){var l="";return a&&(l=a.split(" ").length>0?a.split(" ")[0]:"--"),l},startLoad:function(t){"effectiveflow"===t&&(this.loading=!0)},getPatams:function(t){this.emitData=t,this.repTitle=t.title,this.emitData.mallId&&this.getTableData()},exportDataHandle:function(t,e,a){var l={domId:t,title:e,data:{url:"/report/mallDayFaceRecognitionStas/"+this.chartKeyToId[a]+"/excel",params:"orgIds="+this.emitData.orgIds+"&startDate="+this.emitData.startDate+"&endDate="+this.emitData.startDate}};this.$refs.exportDialog.dialogInit(l)}}}}).call(e,a("7t+N"))}});