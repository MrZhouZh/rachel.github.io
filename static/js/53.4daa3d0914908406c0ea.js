webpackJsonp([53],{"9qgd":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("bkoc"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index"},[a("div",{staticClass:"title-wrap"},[a("div",{staticClass:"title-box"},[a("span",{staticClass:"title"},[t._v(t._s(t.reportName)+" "+t._s(t.repTime)+" "+t._s(t.$t("head.title")))]),t._v(" "),a("span",{staticClass:"title-icon",on:{click:t.showCollapse}},[t._v(t._s(t.$t("head.otherRep"))),a("i",{staticClass:"el-icon-arrow-right title-arrow"})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.collapseVisible,expression:"collapseVisible"}],staticClass:"title-collapse-content"},[t._l(t.reportData,function(e,i){return a("span",{key:e.label,staticClass:"date-box",on:{click:function(e){t.reportHandle(i)}}},[a("span",{class:e.is_active},[t._v(t._s(t.i18nFormatter(e.label)))])])}),t._v(" "),a("span",{staticClass:"date-input-box"},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.dateReport.isDay,expression:"dateReport.isDay"}],staticClass:"date-input",attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"date",size:"mini",placeholder:t.$t("pholder.date"),"picker-options":t.pickerOptions1},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}}),t._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.dateReport.isWeek,expression:"dateReport.isWeek"}],staticClass:"date-input",attrs:{align:"right",type:"week",format:"yyyy 第 WW 周",size:"mini",placeholder:t.$t("pholder.week"),"picker-options":t.weekPickerOpt},model:{value:t.weekDates,callback:function(e){t.weekDates=e},expression:"weekDates"}}),t._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.dateReport.isMonth,expression:"dateReport.isMonth"}],staticClass:"date-input",attrs:{align:"right",type:"month",format:"yyyy 年 MM 月",size:"mini",placeholder:t.$t("pholder.month")},model:{value:t.monthDates,callback:function(e){t.monthDates=e},expression:"monthDates"}}),t._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.dateReport.isYear,expression:"dateReport.isYear"}],staticClass:"date-input",attrs:{align:"right",type:"year",format:"yyyy 年",size:"mini",placeholder:t.$t("pholder.year")},model:{value:t.yearDates,callback:function(e){t.yearDates=e},expression:"yearDates"}})],1),t._v(" "),t._e(),t._v(" "),a("div",{staticClass:"right-btn"},[a("span",{staticClass:"collapse-btn-box"},[a("el-button",{staticClass:"primary-btn collapse-btn",attrs:{type:"primary",size:"samll"},on:{click:t.confirmCondition}},[t._v(t._s(t.$t("button.confirm")))]),t._v(" "),a("el-button",{staticClass:"reset-btn collapse-btn",attrs:{size:"samll"},on:{click:t.resetRefresh}},[t._v(t._s(t.$t("button.reset")))])],1)])],2)]),t._v(" "),a("router-view",{attrs:{orgId:t.orgId,propparam:t.propParams},on:{isCreated:t.domComplted}})],1)},staticRenderFns:[]},r=function(t){a("wqog")},s=a("VU/8")(i.a,o,!1,r,"data-v-057ef7fe",null);e.default=s.exports},bkoc:function(t,e,a){"use strict";(function(t){var i=a("liqX"),o=a("eYnI");a("Bhwq"),e.a={props:{reportName:String,orgId:[String,Number]},data:function(){return{dateReport:{isDay:!1,isWeek:!1,isMonth:!1,isYear:!1},collapseVisible:!1,isDayReport:!0,reportData:[{label:"dayHandle",is_active:"date-btn"},{label:"weekHandle",is_active:"date-btn"},{label:"monthHandle",is_active:"date-btn"},{label:"yearHandle",is_active:"date-btn"}],value3:"",repTime:"",dates:"",weekDates:"",monthDates:"",yearDates:"",floorVal:"",pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:this.$t("reportHandle.today"),onClick:function(t){t.$emit("pick",new Date)}},{text:this.$t("reportHandle.yesterday"),onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:this.$t("reportHandle.lastweek"),onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},weekPickerOpt:{firstDayOfWeek:1},isRefresh:!1,propParams:{},isSmpleReport:!0}},components:{"my-chart":o.a},watch:{propParams:function(t){"/floor"==t.dateType?this.reportHandle(0):"/floor/weekly"==t.dateType?this.reportHandle(1):"/floor/monthly"==t.dateType?this.reportHandle(2):"/floor/yearly"==t.dateType&&this.reportHandle(3)},reportName:function(t){this.init()}},errorCaptured:function(t,e,a){return!1},computed:{},created:function(){var e=this;this.repTime=dateUnit.dateFormat(new Date,"yyyy-MM-dd"),this.dates=dateUnit.dateFormat(new Date,"yyyy-MM-dd"),window.addEventListener("resize",function(){try{var a={chart1:t("#floorDayAge")[0],chart2:t("#floorDayIoCustomer")[0],chart3:t("#fDFlowCounting")[0],chart4:t("#fDCountFlow")[0],chart5:t("#fDTrend")[0],chart6:t("#fDMainRank")[0],chart7:t("#fDMainIo")[0],chart8:t("#floorWeekAge")[0],chart9:t("#floorWeekIoCustomer")[0],chart10:t("#fWTrend")[0],chart11:t("#fWShopRank")[0],chart12:t("#fWIoFlow")[0],chart13:t("#floorMonthAge")[0],chart14:t("#floorMonthIoCustomer")[0],chart15:t("#fMTrend")[0],chart16:t("#fMshopRank")[0],chart17:t("#fMIoFlow")[0],chart18:t("#floorYearAge")[0],chart19:t("#floorYearIoCustomer")[0],chart20:t("#fYTrend")[0],chart21:t("#fYshopRank")[0],chart22:t("#fYIoFlow")[0]};for(var i in a)if(a.hasOwnProperty(i)&&void 0!=a[i]){a[i]=e.$echarts.init(a[i]);a[i].resize()}}catch(t){}})},mounted:function(){this.weekDates=this.weekDates?this.weekDates:new Date,this.monthDates=this.monthDates?this.monthDates:new Date,this.yearDates=this.yearDates?this.yearDates:new Date,"/floor"==this.$router.history.current.fullPath?this.reportHandle(0):"/floor/weekly"==this.$router.history.current.fullPath?this.reportHandle(1):"/floor/monthly"==this.$router.history.current.fullPath?this.reportHandle(2):"/floor/yearly"==this.$router.history.current.fullPath&&this.reportHandle(3),this.showCollapse(),this.init()},methods:{i18nFormatter:function(t){var e="reportHandle."+t;return this.$t(e)},init:function(){this.$router.history.current.fullPath;this.propParams={dateType:this.$router.history.current.fullPath,timeVal:this.dates},this.activeSimple="1"},reportHandle:function(t){if("date-btn"===this.reportData[t].is_active){this.reportData.forEach(function(t,e,a){t.is_active="date-btn"});for(var e in this.dateReport)this.dateReport[e]=!1;switch(this.reportData[t].is_active="date-btn active-date",this.reportData[t].label){case"dayHandle":this.dateReport.isDay=!0;break;case"weekHandle":this.dateReport.isWeek=!0;break;case"monthHandle":this.dateReport.isMonth=!0;break;case"yearHandle":this.dateReport.isYear=!0}}},showCollapse:function(){var e="",a="",i="",o="",r=void 0;if(r=window.innerWidth<=1680?window.innerWidth<=1440?8:10:12,e=this.getStyleFn(".el-header","height"),a=this.getStyleFn(".title-box","height"),t(".title-icon").hasClass("is-active")){this.collapseVisible=!1,o=e+a+r+"px";try{t(".daily").animate({marginTop:o}),t(".weekly").animate({marginTop:o}),t(".monthly").animate({marginTop:o}),t(".yearly").animate({marginTop:o})}catch(t){}t(".title-icon").removeClass("is-active")}else{i=this.getStyleFn(".title-collapse-content","height"),this.collapseVisible=!0,o=e+a+i+r+"px";try{t(".daily").animate({marginTop:o}),t(".weekly").animate({marginTop:o}),t(".monthly").animate({marginTop:o}),t(".yearly").animate({marginTop:o})}catch(t){}t(".title-icon").addClass("is-active")}},classHandle:function(t){for(var e=document.getElementsByClassName("date-btn"),a=0,i=e.length;a<i;a++)e[a].className=a===t?"date-btn active-date":"date-btn"},chooseFloor:function(t){this.$router.push("/floor")},resetRefresh:function(){this.reportHandle(0),this.isRefresh=!1,this.dates=dateUnit.dateFormat(new Date,"yyyy-MM-dd"),this.weekDates=new Date,this.monthDates=new Date,this.yearDates=new Date},domComplted:function(e,a){var i=this,o=void 0;o=window.innerWidth<=1680?window.innerWidth<=1440?8:10:12;var r="";if(e){var s="",n="",l="";switch(setTimeout(function(){s=i.getStyleFn(".el-header","height"),n=i.getStyleFn(".title-box","height"),i.collapseVisible?(l=i.getStyleFn(".title-collapse-content","height"),document.documentMode&&(l=l+i.getStyleFn(".title-collapse-content","paddingTop")+i.getStyleFn(".title-collapse-content","paddingBottom"))):l=0,r=s+n+l+o+"px"},0),a){case"day":setTimeout(function(){t(".daily").animate({marginTop:r})},0);break;case"weekly":setTimeout(function(){t(".weekly").animate({marginTop:r})},0);break;case"monthly":setTimeout(function(){t(".monthly").animate({marginTop:r})},0);break;case"yearly":setTimeout(function(){t(".yearly").animate({marginTop:r})},0)}}},simpleSwitch:function(){this.isSmpleReport?(this.isSmpleReport=!1,i.a.$emit("simpleEvent",this.isSmpleReport)):(this.isSmpleReport=!0,i.a.$emit("simpleEvent",this.isSmpleReport))},confirmCondition:function(){this.isSmpleReport=!0,this.dateReport.isDay?(this.repTime=this.dates,this.$router.push("/floor"),this.propParams={dateType:"/floor",timeVal:this.dates}):this.dateReport.isWeek?(this.repTime=t(".date-input input").val(),this.$router.push("/floor/weekly"),this.propParams={dateType:"/floor/weekly",timeVal:this.weekDates}):this.dateReport.isMonth?(this.repTime=t(".date-input input").val(),this.$router.push("/floor/monthly"),this.propParams={dateType:"/floor/monthly",timeVal:this.monthDates}):(this.repTime=t(".date-input input").val(),this.$router.push("/floor/yearly"),this.propParams={dateType:"/floor/yearly",timeVal:this.yearDates});var e="",a="",i="",o="";e=this.getStyleFn(".el-header","height"),a=this.getStyleFn(".title-box","height"),i=this.getStyleFn(".title-collapse-content","height"),document.documentMode&&(i=i+this.getStyleFn(".title-collapse-content","paddingTop")+this.getStyleFn(".title-collapse-content","paddingBottom")),o=e+a+i+8+"px";try{this.$refs.takeTime?(t(".daily").animate({marginTop:o}),t(".weekly").animate({marginTop:o}),t(".monthly").animate({marginTop:o}),t(".yearly").animate({marginTop:o})):setTimeout(function(){t(".daily").animate({marginTop:o}),t(".weekly").animate({marginTop:o}),t(".monthly").animate({marginTop:o}),t(".yearly").animate({marginTop:o})},500)}catch(t){}}}}}).call(e,a("7t+N"))},wqog:function(t,e){}});