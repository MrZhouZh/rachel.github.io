webpackJsonp([77],{m6wP:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("mvHQ"),s=e.n(i),r=e("pJt5"),d=e("jR44"),o={props:{propparam:Object},data:function(){return{weekdayOrEnd_ops:{},tableKeyToId:{},tableIds:"",emitData:[],chartTitle:"",apiUrl:"",startTime:"",endTime:""}},components:{"wecomp-chart":d.a,"export-data-dialog":r.a},watch:{propparam:{handler:"refreshHandle",immediate:!0}},mounted:function(){},methods:{refreshHandle:function(t){"/weekComp/wecomp"===t.dateType&&(this.emitData=t.data,this.tableIds&&"{}"!==s()(this.tableKeyToId)?this.getChartData(this.tableIds):this.getChartId())},getMock:function(){},getChartId:function(){var t=this;this.tableKeyToId={},this.tableIds="",this.axios.get("/reportCharts",{params:{report:"WeekCompared",_t:Date.parse(new Date)/1e3}}).then(function(a){var e=a.data.data;e.forEach(function(a,i){t.tableKeyToId[a.key]=a.id,"weekdayOrEnd"===a.key&&(i==e.length-1?t.tableIds+=a.id:t.tableIds+=a.id+",")}),t.getChartData(t.tableIds)})},getChartData:function(t){var a=this;if(t){this.weekdayOrEnd_ops={};var e={};this.emitData.asis_time?(this.startTime=this.emitData.asis_time[0],this.endTime=this.emitData.asis_time[1]):(this.startTime=this.dayReduce(new Date,30),this.endTime=dateUnit.dateFormat(new Date,"yyyy-MM-dd")),"format"===this.emitData.asis_level?(this.apiUrl="/report/weekCompared/mall",e={orgIds:this.emitData.asis_org,startDate:this.startTime,endDate:this.endTime,chartIds:t,kpiType:this.emitData.asis_kpi,formatIds:this.emitData.asis_format,_t:Date.parse(new Date)/1e3}):(this.apiUrl="/report/weekCompared/"+this.emitData.asis_level,e={orgIds:this.emitData.asis_org,startDate:this.startTime,endDate:this.endTime,chartIds:t,kpiType:this.emitData.asis_kpi,_t:Date.parse(new Date)/1e3}),this.axios.get(this.apiUrl,{params:e}).then(function(t){a.weekdayOrEnd_ops=t.data.data.body.weekdayOrEnd,a.chartTitle="WeekComparedweekdayOrEnd"}).catch(function(t){})}},exportDataHandle:function(t,a,e){var i=this.tableKeyToId[e],s={domId:t,title:a,data:{url:this.apiUrl+"/"+i+"/excel",params:"orgIds="+this.emitData.asis_org+"&startDate="+this.startTime+"&endDate="+this.endTime+"&kpiType="+this.emitData.asis_kpi}};this.$refs.exportDialog.dialogInit(s)}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"wecomp-wrapper"},[e("div",{staticClass:"wecomp-chart-wrapper"},[e("div",{staticClass:"weekend-chart-wrapper"},[e("wecomp-chart",{staticClass:"wecomp-chart-box",attrs:{id:"wecompChart",options:t.weekdayOrEnd_ops,chartType:"LineBar"}}),t._v(" "),e("span",{staticClass:"download-text",on:{click:function(a){t.exportDataHandle("wecompChart",t.i18nFormatter(t.chartTitle),"weekdayOrEnd")}}},[t._v(t._s(t.$t("allPages.load")))])],1)]),t._v(" "),e("export-data-dialog",{ref:"exportDialog"})],1)},staticRenderFns:[]},h=e("VU/8")(o,n,!1,function(t){e("vyV8")},"data-v-134f849e",null);a.default=h.exports},vyV8:function(t,a){}});