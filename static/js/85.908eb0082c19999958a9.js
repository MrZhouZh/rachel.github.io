webpackJsonp([85],{jxKv:function(a,e){},ylPu:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("mvHQ"),o=t.n(r),s=t("DQZ8"),i={props:{propparam:Object},data:function(){return{loading:!0,Near3YearYoY_head:[{label:"年份",prop:"year"},{label:"当年总计",prop:"yearTotal"},{label:"去年总计",prop:"totalLy"},{label:"去年环比( % )",prop:"seqLy"},{label:"前年总计",prop:"totalBly"},{label:"前年同比",prop:"compareBly"}],MonthOfYearYoY_head:[{label:"月份",prop:"in"},{label:"当月",prop:"duringMonth"},{label:"上月",prop:"lastMonth"},{label:"上月环比( % )",prop:"seqLm"},{label:"去年同期",prop:"sameLy"},{label:"去年环比( % )",prop:"seqLy"},{label:"前年同期",prop:"sameBly"},{label:"前年环比",prop:"compareBly"}],WeekDayOrEndYoY_head:[{label:"年份",prop:"year"},{label:"当年总计",prop:"totalYear"},{label:"去年总计",prop:"totalLy"},{label:"去年环比( % )",prop:"seqLy"},{label:"前年总计",prop:"totalBly"},{label:"前年环比( % )",prop:"seqBly"}],Near3YearYoY_title:"",WeekDayOrEndYoY_title:"",MonthOfYearYoY_title:"",Near3YearYoY_ops:[],WeekDayOrEndYoY_ops:[],MonthOfYearYoY_ops:[],tableKeyToId:{},tableIds:"",emitData:[]}},components:{"common-tab":s.a},watch:{propparam:{handler:"refreshHandle",immediate:!0}},mounted:function(){},methods:{refreshHandle:function(a){"/seqasis/yearly"===a.dateType&&(this.emitData=a.data,this.loading=!0,this.tableIds&&"{}"!==o()(this.tableKeyToId)?this.getTableData(this.tableIds):this.getTableId())},getTableId:function(){var a=this;this.tableKeyToId={},this.tableIds="",this.axios.get("/reportCharts",{params:{report:"YearYoYMoM",_t:Date.parse(new Date)/1e3}}).then(function(e){var t=e.data.data;t.forEach(function(e,r){a.tableKeyToId[e.key]=e.id,"Near3YearYoY"!==e.key&&"WeekDayOrEndYoY"!==e.key&&"MonthOfYearYoY"!==e.key||(r==t.length-1?a.tableIds+=e.id:a.tableIds+=e.id+",")}),a.getTableData(a.tableIds)})},getTableData:function(a){var e=this;if(a){this.Near3YearYoY_ops=[],this.MonthOfYearYoY_ops=[],this.WeekDayOrEndYoY_ops=[];var t="",r={},o="",s="";if(this.emitData.asis_time)if(this.emitData.asis_time.getFullYear()===(new Date).getFullYear())s=dateUnit.dateFormat(this.emitData.asis_time,"yyyy-MM-dd"),(o=dateUnit.dateFormat(new Date(Date.parse(this.emitData.asis_time.getFullYear()+"/01/01")),"yyyy-MM-dd"))==s&&(s=dateUnit.dateFormat(new Date,"yyyy-MM-dd"));else{o=this.emitData.asis_time,s=new Date(Date.parse(this.dayAdd(this.emitData.asis_time,365).replace(/\-/,"/")));var i=this.unitTime(o,s,"year");o=i.startTime,s=i.endTime}"format"===this.emitData.asis_level?(t="/report/yoyOrMom/year/mall",r={orgIds:this.emitData.asis_org,startDate:o,endDate:s,chartIds:a,kpiType:this.emitData.asis_kpi,formatIds:this.emitData.asis_format,_t:Date.parse(new Date)/1e3}):(t="/report/yoyOrMom/year/"+this.emitData.asis_level,r={orgIds:this.emitData.asis_org,startDate:o,endDate:s,chartIds:a,kpiType:this.emitData.asis_kpi,_t:Date.parse(new Date)/1e3}),this.axios.get(t,{params:r}).then(function(a){setTimeout(function(){e.loading=!1},500);e.Near3YearYoY_title="YearYoYMoMNear3YearYoY",e.WeekDayOrEndYoY_title="YearYoYMoMWeekDayOrEndYoY",e.MonthOfYearYoY_title="YearYoYMoMMonthOfYearYoY";var t=a.data.data.body.Near3YearYoY.series,r=a.data.data.body.WeekDayOrEndYoY.series,o=a.data.data.body.MonthOfYearYoY.series;e.Near3YearYoY_head=e.autoComplateHead(a.data.data.body.Near3YearYoY.xaxis.data),e.MonthOfYearYoY_head=e.autoComplateHead(a.data.data.body.MonthOfYearYoY.xaxis.data),e.WeekDayOrEndYoY_head=e.autoComplateHead(a.data.data.body.WeekDayOrEndYoY.xaxis.data),t.length&&(e.Near3YearYoY_ops=e.dealData(t,e.Near3YearYoY_head)),o.length&&(e.MonthOfYearYoY_ops=e.dealData(o,e.MonthOfYearYoY_head)),r.length&&(e.WeekDayOrEndYoY_ops=e.dealData(r,e.WeekDayOrEndYoY_head))}).catch(function(a){})}},autoComplateHead:function(a){var e=[];return a.forEach(function(a,t){e.push({prop:"defaultOrg"+t,label:a})}),e},dealData:function(a,e){var t={},r=[],o="";return a.forEach(function(a){for(var s=0,i=a.data.length;s<i;s++)o=e[s].prop,t[o]=a.data[s]||0==a.data[s]?a.data[s]:"--";r.push(t),t={}}),r},getSummaries:function(a){var e=this,t=a.columns,r=a.data,o=[];return t.forEach(function(a,t){if(0!=t){var s=r.map(function(e){return Number(e[a.property])});if(s.every(function(a){return isNaN(a)})){var i=r.map(function(e){if(/\%/g.test(e[a.property]))return e[a.property].split("%")[0]});if(!i.every(function(a){return isNaN(a)})){o[t]=i.reduce(function(a,e){var t=Number(e);return isNaN(t)?a:t>0?a-0+(e-0):a-0-(-e-0)});try{o[t]=o[t].toFixed(2)}catch(a){}o[t]+="%"}}else o[t]=s.reduce(function(a,e){var t=Number(e);return isNaN(t)?a:a+e},0)}else o[t]=e.$t("table.total")}),o}}},l={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"yearly"},[t("div",{staticClass:"asis-table-wrapper"},[t("h3",{staticClass:"asis-table-header"},[t("span",{staticClass:"asis-table-title"},[a._v(a._s(a.i18nFormatter(a.Near3YearYoY_title)))]),a._v(" "),t("span",{staticClass:"asis-table-download",on:{click:function(e){a.dealExport("domNearYear",a.i18nFormatter(a.Near3YearYoY_title))}}},[a._v(a._s(a.$t("allPages.load")))])]),a._v(" "),t("div",{staticClass:"asis-table-content"},[t("common-tab",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],attrs:{tableData:a.Near3YearYoY_ops,id:"domNearYear",headData:a.Near3YearYoY_head,tabHeight:""}})],1)]),a._v(" "),t("div",{staticClass:"asis-table-wrapper"},[t("h3",{staticClass:"asis-table-header"},[t("span",{staticClass:"asis-table-title"},[a._v(a._s(a.i18nFormatter(a.MonthOfYearYoY_title)))]),a._v(" "),t("span",{staticClass:"asis-table-download",on:{click:function(e){a.dealExport("domYoy",a.i18nFormatter(a.MonthOfYearYoY_title))}}},[a._v(a._s(a.$t("allPages.load")))])]),a._v(" "),t("div",{staticClass:"asis-table-content"},[t("common-tab",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"i18n",attrs:{tableData:a.MonthOfYearYoY_ops,id:"domYoy",headData:a.MonthOfYearYoY_head,tabHeight:""}})],1)]),a._v(" "),t("div",{staticClass:"asis-table-wrapper"},[t("h3",{staticClass:"asis-table-header"},[t("span",{staticClass:"asis-table-title"},[a._v(a._s(a.i18nFormatter(a.WeekDayOrEndYoY_title)))]),a._v(" "),t("span",{staticClass:"asis-table-download",on:{click:function(e){a.dealExport("domWeekendOrWork",a.i18nFormatter(a.WeekDayOrEndYoY_title))}}},[a._v(a._s(a.$t("allPages.load")))])]),a._v(" "),t("div",{staticClass:"asis-table-content"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"asis-table",staticStyle:{width:"100%"},attrs:{id:"domWeekendOrWork",data:a.WeekDayOrEndYoY_ops,"header-row-class-name":"asis-table-head","summary-method":a.getSummaries,"show-summary":""}},a._l(a.WeekDayOrEndYoY_head,function(a){return t("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,align:"center"}})}))],1)])])},staticRenderFns:[]},n=t("VU/8")(i,l,!1,function(a){t("jxKv")},"data-v-06bb0d66",null);e.default=n.exports}});