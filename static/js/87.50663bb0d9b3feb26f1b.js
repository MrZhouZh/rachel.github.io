webpackJsonp([87],{OTIN:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("mvHQ"),s=e.n(o),i=e("DQZ8"),r={props:{propparam:Object},data:function(){return{loading:!0,Near3MonthYoY_head:[{label:"月份",prop:"in"},{label:"当月总计",prop:"monthTotal"},{label:"上月总计",prop:"totalLm"},{label:"上月环比",prop:"seqLm"},{label:"去年同月总计",prop:"totalLym"},{label:"去年同比",prop:"compareLy"}],DayOfMonthYoY_head:[{label:"日期",prop:"date"},{label:"当日",prop:"today"},{label:"昨日",prop:"yesterday"},{label:"昨日环比",prop:"yesterSeq"},{label:"上月同期",prop:"sameLm"},{label:"上月环比",prop:"seqLm"},{label:"去年同期",prop:"sameLy"},{label:"去年同比",prop:"compareLy"}],WeekDayOrEndYoY_head:[{label:"月份",prop:"month"},{label:"当月总计",prop:"totalMonth"},{label:"上月总计",prop:"totalLm"},{label:"上月环比",prop:"seqLm"},{label:"去年同月总计",prop:"totalLym"},{label:"去年环比",prop:"seqLy"}],Near3MonthYoY_title:"",DayOfMonthYoY_title:"",WeekDayOrEndYoY_title:"",Near3MonthYoY_ops:[],DayOfMonthYoY_ops:[],WeekDayOrEndYoY_ops:[],tableKeyToId:{},tableIds:"",emitData:[]}},components:{"common-tab":i.a},watch:{propparam:{handler:"refreshHandle",immediate:!0}},mounted:function(){},methods:{refreshHandle:function(a){"/seqasis/monthly"===a.dateType&&(this.emitData=a.data,this.loading=!0,this.tableIds&&"{}"!==s()(this.tableKeyToId)?this.getTableData(this.tableIds):this.getTableId())},getTableId:function(){var a=this;this.tableKeyToId={},this.tableIds="",this.axios.get("/reportCharts",{params:{report:"MonthYoYMoM",_t:Date.parse(new Date)/1e3}}).then(function(t){var e=t.data.data;e.forEach(function(t,o){a.tableKeyToId[t.key]=t.id,"Near3MonthYoY"!==t.key&&"WeekDayOrEndYoY"!==t.key&&"DayOfMonthYoY"!==t.key||(o==e.length-1?a.tableIds+=t.id:a.tableIds+=t.id+",")}),a.getTableData(a.tableIds)})},getTableData:function(a){var t=this;if(a){var e="",o={},s="",i="";if(this.Near3MonthYoY_ops=[],this.WeekDayOrEndYoY_ops=[],this.DayOfMonthYoY_ops=[],this.emitData.asis_time)if(this.emitData.asis_time.getMonth()===(new Date).getMonth()&&this.emitData.asis_time.getFullYear()===(new Date).getFullYear())i=dateUnit.dateFormat(this.emitData.asis_time,"yyyy-MM-dd"),(s=dateUnit.dateFormat(new Date(Date.parse(this.emitData.asis_time.getFullYear()+"/"+(this.emitData.asis_time.getMonth()+1)+"/01")),"yyyy-MM-dd"))==i&&(i=dateUnit.dateFormat(new Date,"yyyy-MM-dd"));else{s=this.emitData.asis_time,i=new Date(Date.parse(this.dayAdd(this.emitData.asis_time,31).replace(/\-/,"/")));var r=this.unitTime(s,i,"month");s=r.startTime,i=r.endTime}"format"===this.emitData.asis_level?(e="/report/yoyOrMom/month/mall",o={orgIds:this.emitData.asis_org,startDate:s,endDate:i,chartIds:a,kpiType:this.emitData.asis_kpi,formatIds:this.emitData.asis_format,_t:Date.parse(new Date)/1e3}):(e="/report/yoyOrMom/month/"+this.emitData.asis_level,o={orgIds:this.emitData.asis_org,startDate:s,endDate:i,chartIds:a,kpiType:this.emitData.asis_kpi,_t:Date.parse(new Date)/1e3}),this.axios.get(e,{params:o}).then(function(a){setTimeout(function(){t.loading=!1},500);t.Near3MonthYoY_title="MonthYoYMoMNear3MonthYoY",t.DayOfMonthYoY_title="MonthYoYMoMDayOfMonthYoY",t.WeekDayOrEndYoY_title="MonthYoYMoMWeekDayOrEndYoY";var e=a.data.data.body.Near3MonthYoY.series,o=a.data.data.body.DayOfMonthYoY.series,s=a.data.data.body.WeekDayOrEndYoY.series;t.Near3MonthYoY_head=t.autoComplateHead(a.data.data.body.Near3MonthYoY.xaxis.data),t.DayOfMonthYoY_head=t.autoComplateHead(a.data.data.body.DayOfMonthYoY.xaxis.data),t.WeekDayOrEndYoY_head=t.autoComplateHead(a.data.data.body.WeekDayOrEndYoY.xaxis.data),e&&(t.Near3MonthYoY_ops=t.dealData(e,t.Near3MonthYoY_head)),s.length&&(t.WeekDayOrEndYoY_ops=t.dealData(s,t.WeekDayOrEndYoY_head)),o&&t.dealSpe(a.data.data.body.DayOfMonthYoY,t.DayOfMonthYoY_head)}).catch(function(a){console.log("month report error:",a,a.message)})}},autoComplateHead:function(a){var t=[];return a.forEach(function(a,e){t.push({prop:"defaultOrg"+e,label:a})}),t},dealSpe:function(a,t){var e=this,o={},s="";a.series.forEach(function(a){a.data.splic;for(var i=0,r=a.data.length;i<r;i++)s=t[i].prop,o[s]=a.data[i]||0==a.data[i]?a.data[i]:"--";e.DayOfMonthYoY_ops.push(o),o={}})},dealData:function(a,t){var e={},o=[],s="";return a.forEach(function(a){for(var i=0,r=a.data.length;i<r;i++)t[i].prop&&(s=t[i].prop,e[s]=a.data[i]||0==a.data[i]?a.data[i]:"--");o.push(e),e={}}),o},getSummaries:function(a){var t=this,e=a.columns,o=a.data,s=[];return e.forEach(function(a,e){if(0!=e){var i=o.map(function(t){return Number(t[a.property])});if(i.every(function(a){return isNaN(a)})){var r=o.map(function(t){if(/\%/g.test(t[a.property]))return t[a.property].split("%")[0]});if(!r.every(function(a){return isNaN(a)})){s[e]=r.reduce(function(a,t){var e=Number(t);return isNaN(e)?a:e>0?a-0+(t-0):a-0-(-t-0)});try{s[e]=s[e].toFixed(2)}catch(a){}s[e]+="%"}}else s[e]=i.reduce(function(a,t){var e=Number(t);return isNaN(e)?a:a+t},0)}else s[e]=t.$t("table.total")}),s}}},n={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"monthly"},[e("div",{staticClass:"asis-table-wrapper"},[e("h3",{staticClass:"asis-table-header"},[e("span",{staticClass:"asis-table-title"},[a._v(a._s(a.i18nFormatter(a.Near3MonthYoY_title)))]),a._v(" "),e("span",{staticClass:"asis-table-download",on:{click:function(t){a.dealExport("domNearMonth",a.i18nFormatter(a.Near3MonthYoY_title))}}},[a._v(a._s(a.$t("allPages.load")))])]),a._v(" "),e("div",{staticClass:"asis-table-content"},[e("common-tab",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],attrs:{tableData:a.Near3MonthYoY_ops,id:"domNearMonth",headData:a.Near3MonthYoY_head,tabHeight:""}})],1)]),a._v(" "),e("div",{staticClass:"asis-table-wrapper"},[e("h3",{staticClass:"asis-table-header"},[e("span",{staticClass:"asis-table-title"},[a._v(a._s(a.i18nFormatter(a.DayOfMonthYoY_title)))]),a._v(" "),e("span",{staticClass:"asis-table-download",on:{click:function(t){a.dealExport("domYoy",a.i18nFormatter(a.DayOfMonthYoY_title))}}},[a._v(a._s(a.$t("allPages.load")))])]),a._v(" "),e("div",{staticClass:"asis-table-content"},[e("common-tab",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"i18n",attrs:{tableData:a.DayOfMonthYoY_ops,id:"domYoy",headData:a.DayOfMonthYoY_head,tabHeight:""}})],1)]),a._v(" "),e("div",{staticClass:"asis-table-wrapper"},[e("h3",{staticClass:"asis-table-header"},[e("span",{staticClass:"asis-table-title"},[a._v(a._s(a.i18nFormatter(a.WeekDayOrEndYoY_title)))]),a._v(" "),e("span",{staticClass:"asis-table-download",on:{click:function(t){a.dealExport("domWeekendOrWork",a.i18nFormatter(a.WeekDayOrEndYoY_title))}}},[a._v(a._s(a.$t("allPages.load")))])]),a._v(" "),e("div",{staticClass:"asis-table-content"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"asis-table",staticStyle:{width:"100%"},attrs:{id:"domWeekendOrWork",data:a.WeekDayOrEndYoY_ops,"header-row-class-name":"asis-table-head","summary-method":a.getSummaries,"show-summary":""}},a._l(a.WeekDayOrEndYoY_head,function(a){return e("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,align:"center"}})}))],1)])])},staticRenderFns:[]},l=e("VU/8")(r,n,!1,function(a){e("dFdY")},"data-v-c9c4b63e",null);t.default=l.exports},dFdY:function(a,t){}});