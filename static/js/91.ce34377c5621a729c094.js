webpackJsonp([91],{FwyB:function(t,e){},vJWE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s),i=a("pJt5"),d=a("jR44"),o={props:{propparam:Object},data:function(){return{customerfeatureGender_ops:{},customerfeatureAge_ops:{},dayTrend_ops:{},tableKeyToId:{},tableIds:"",radioDate:"æ—¥",emitData:[],_startTime:"",_endTime:"",_apiUrl:"",Trend_title:"",customerfeature_gender_title:"",customerfeature_age_title:""}},components:{"comprehen-chart":d.a,"export-data-dialog":i.a},watch:{propparam:{handler:"refreshHandle",immediate:!0}},mounted:function(){},methods:{refreshHandle:function(t){"/comprehen/yearly"===t.dateType&&(this.emitData=t.data,this.tableIds&&"{}"!==r()(this.tableKeyToId)?this.getChartData(this.tableIds):this.getChartId())},getChartId:function(){var t=this;this.tableKeyToId={},this.tableIds="",this.axios.get("/reportCharts",{params:{report:"SynthesizeCompare",_t:Date.parse(new Date)/1e3}}).then(function(e){var a=e.data.data;a.forEach(function(e,s){t.tableKeyToId[e.key]=e.id,"customerfeature_gender"!==e.key&&"customerfeature_age"!==e.key&&"dayTrend"!==e.key&&"monthTrend"!==e.key||(s==a.length-1?t.tableIds+=e.id:t.tableIds+=e.id+",")}),t.getChartData(t.tableIds)})},getChartData:function(t){var e=this;if(t){this.customerfeatureGender_ops={},this.customerfeatureAge_ops={},this.dayTrend_ops={};var a="",s={},r="",i="";if(this.emitData.asis_time)if(this.emitData.asis_time.getFullYear()===(new Date).getFullYear())i=dateUnit.dateFormat(this.emitData.asis_time,"yyyy-MM-dd"),(r=dateUnit.dateFormat(new Date(Date.parse(this.emitData.asis_time.getFullYear()+"/01/01")),"yyyy-MM-dd"))==i&&(i=dateUnit.dateFormat(new Date,"yyyy-MM-dd"));else{r=this.emitData.asis_time,i=new Date(Date.parse(this.dayAdd(this.emitData.asis_time,365).replace(/\-/,"/")));var d=this.unitTime(r,i,"year");r=d.startTime,i=d.endTime}else i=dateUnit.dateFormat(new Date,"yyyy-MM-dd"),r=dateUnit.dateFormat(new Date(Date.parse((new Date).getFullYear()+"/01/01")),"yyyy-MM-dd");this._startTime=r,this._endTime=i,"format"===this.emitData.asis_level?(a="/report/synthesize/mall",s={orgIds:this.emitData.asis_org,startDate:r,endDate:i,chartIds:t,kpiType:this.emitData.asis_kpi,formatIds:this.emitData.asis_format,_t:Date.parse(new Date)/1e3}):(a="/report/synthesize/"+this.emitData.asis_level,s={orgIds:this.emitData.asis_org,startDate:r,endDate:i,chartIds:t,kpiType:this.emitData.asis_kpi,_t:Date.parse(new Date)/1e3}),this._apiUrl=a,this.axios.get(a,{params:s}).then(function(t){var a="SynthesizeCompare",s={},r={};(s=t.data.data.body.customerfeature_gender).color=["#3BB8FF","#FFC62E"],e.customerfeatureGender_ops=s,e.customerfeature_gender_title=a+"customerfeature_gender",(r=t.data.data.body.customerfeature_age).color=["#6e6fc1","#33bafe","#fec62b","#ff9c01","#38d4be","#79ce4c"],e.customerfeatureAge_ops=r,e.customerfeature_age_title=a+"customerfeature_age",e.dayTrend_ops=t.data.data.body.dayTrend,e.Trend_title=a+"dayTrend"}).catch(function(t){})}},changeTabSelect:function(t){var e=this,a="",s={},r="",i="",d=this.tableKeyToId[t];if(this.emitData.asis_time)if(this.emitData.asis_time.getFullYear()===(new Date).getFullYear())i=dateUnit.dateFormat(this.emitData.asis_time,"yyyy-MM-dd"),(r=dateUnit.dateFormat(new Date(Date.parse(this.emitData.asis_time.getFullYear()+"/01/01")),"yyyy-MM-dd"))==i&&(i=dateUnit.dateFormat(new Date,"yyyy-MM-dd"));else{r=this.emitData.asis_time,i=new Date(Date.parse(this.dayAdd(this.emitData.asis_time,365).replace(/\-/,"/")));var o=this.unitTime(r,i,"year");r=o.startTime,i=o.endTime}else i=dateUnit.dateFormat(new Date,"yyyy-MM-dd"),r=dateUnit.dateFormat(new Date(Date.parse((new Date).getFullYear()+"/01/01")),"yyyy-MM-dd");this._startTime=r,this._endTime=i,"format"===this.emitData.asis_level?(a="/report/synthesize/mall"+this.emitData.asis_level+"/"+d,s={orgIds:this.emitData.asis_org,startDate:r,endDate:i,chartIds:this.tableIds,kpiType:this.emitData.asis_kpi,formatIds:this.emitData.asis_format,_t:Date.parse(new Date)/1e3}):(a="/report/synthesize/"+this.emitData.asis_level+"/"+d,s={orgIds:this.emitData.asis_org,startDate:r,endDate:i,chartIds:this.tableIds,kpiType:this.emitData.asis_kpi,_t:Date.parse(new Date)/1e3}),this._apiUrl=a,this.axios.get(a,{params:s}).then(function(t){e.dayTrend_ops=t.data.data})},exportDataHandle:function(t,e,a){var s=this.tableKeyToId[a],r={domId:t,title:e,data:{url:window.apiUrl+"/report/synthesize/"+this.emitData.asis_level+"/"+s+"/excel",params:"orgIds="+this.emitData.asis_org+"&startDate="+this._startTime+"&endDate="+this._endTime+"&kpiType="+this.emitData.asis_kpi}};this.$refs.exportDialog.dialogInit(r)}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"yearly"},[a("el-row",{staticClass:"chartRow",attrs:{gutter:12}},[a("el-col",{staticClass:"download-parent",attrs:{span:24}},[a("div",{staticClass:"date-radio-wrapper tf-ratio-group"},[a("el-radio-group",{attrs:{size:"mini",fill:"#0069FF"},on:{change:function(e){t.changeTabSelect(t.radioDate)}},model:{value:t.radioDate,callback:function(e){t.radioDate=e},expression:"radioDate"}},[a("el-radio-button",{attrs:{label:"dayTrend",border:""}},[t._v(t._s(t.$t("asisTab.day")))]),t._v(" "),a("el-radio-button",{attrs:{label:"monthTrend",border:""}},[t._v(t._s(t.$t("asisTab.month")))])],1)],1),t._v(" "),a("comprehen-chart",{staticClass:"nearfif-wrapper",attrs:{id:"ynearfifChart",options:t.dayTrend_ops,chartType:"YearLine"}}),t._v(" "),a("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.i18nFormatter(t.Trend_title)))]),t._v(" "),a("span",{staticClass:"download-text",on:{click:function(e){t.exportDataHandle("ynearfifChart",t.i18nFormatter(t.Trend_title),t.radioDate)}}},[t._v(t._s(t.$t("allPages.load")))])],1)],1),t._v(" "),a("el-row",{staticClass:"chartRow",attrs:{gutter:12}},[a("el-col",{staticClass:"download-parent",attrs:{span:12}},[a("comprehen-chart",{staticClass:"gender-wrapper",attrs:{id:"ygenderChart",options:t.customerfeatureGender_ops,chartType:"GenderBar"}}),t._v(" "),a("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.i18nFormatter(t.customerfeature_gender_title)))]),t._v(" "),a("span",{staticClass:"download-text",on:{click:function(e){t.exportDataHandle("ygenderChart",t.i18nFormatter(t.customerfeature_gender_title),"customerfeature_gender")}}},[t._v(t._s(t.$t("allPages.load")))])],1),t._v(" "),a("el-col",{staticClass:"download-parent",attrs:{span:12}},[a("comprehen-chart",{staticClass:"age-wrapper",attrs:{id:"yageChart",options:t.customerfeatureAge_ops,chartType:"AgeBar"}}),t._v(" "),a("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.i18nFormatter(t.customerfeature_age_title)))]),t._v(" "),a("span",{staticClass:"download-text",on:{click:function(e){t.exportDataHandle("yageChart",t.i18nFormatter(t.customerfeature_age_title),"customerfeature_age")}}},[t._v(t._s(t.$t("allPages.load")))])],1)],1),t._v(" "),a("export-data-dialog",{ref:"exportDialog"})],1)},staticRenderFns:[]},l=a("VU/8")(o,n,!1,function(t){a("FwyB")},"data-v-db21775e",null);e.default=l.exports}});