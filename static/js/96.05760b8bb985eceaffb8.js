webpackJsonp([96],{"/eF7":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("mvHQ"),s=e.n(i),r=e("pJt5"),o=e("jR44"),d={props:{propparam:Object},data:function(){return{kpiLoop_ops:{},kpiRadar_ops:{},isMallOrFloor:!0,kpiLoopTitle:"",kpiRadarTitle:"",tableKeyToId:{},tableIds:"",startTime:"",startTime1:"",endTime:"",endTime1:"",apiUrl:""}},components:{"comtcontrast-chart":o.a,"export-data-dialog":r.a},watch:{propparam:{handler:"refreshHandle",immediate:!0}},mounted:function(){},methods:{refreshHandle:function(t){"/comtasis/contrast"===t.dateType&&(this.emitData=t.data,this.tableIds&&"{}"!==s()(this.tableKeyToId)?this.getChartData(this.tableIds):this.getChartId())},getChartId:function(){var t=this;this.tableKeyToId={},this.tableIds="",this.axios.get("/reportCharts",{params:{report:"DateCompared",_t:Date.parse(new Date)/1e3}}).then(function(a){var e=a.data.data;e.forEach(function(a,i){t.tableKeyToId[a.key]=a.id,"kpiLoop"!==a.key&&"kpiRadar"!==a.key||(i==e.length-1?t.tableIds+=a.id:t.tableIds+=a.id+",")}),t.getChartData(t.tableIds)})},getChartData:function(t){var a=this;if(t){this.kpiLoop_ops={},this.kpiRadar_ops={},"mall"===this.emitData.asis_level||"zone"===this.emitData.asis_level?this.isMallOrFloor=!0:this.isMallOrFloor=!1;var e={};this.emitData.asis_time?(this.startTime=this.emitData.asis_time[0][0],this.endTime=this.emitData.asis_time[0][1],this.startTime1=this.emitData.asis_time[1][0],this.endTime1=this.emitData.asis_time[1][1]):(this.startTime=this.dayReduce(new Date,15),this.endTime=dateUnit.dateFormat(new Date,"yyyy-MM-dd"),this.startTime1=this.dayReduce(new Date,30),this.endTime1=this.dayReduce(new Date,15)),"format"===this.emitData.asis_level?(this.apiUrl="/report/dateCompared/mall",e={orgIds:this.emitData.asis_org,startDate:this.startTime,endDate:this.endTime,startDate1:this.startTime1,endDate1:this.endTime1,chartIds:t,formatIds:this.emitData.asis_format,_t:Date.parse(new Date)/1e3}):(this.apiUrl="/report/dateCompared/"+this.emitData.asis_level,e={orgIds:this.emitData.asis_org,startDate:this.startTime,endDate:this.endTime,startDate1:this.startTime1,endDate1:this.endTime1,chartIds:t,_t:Date.parse(new Date)/1e3}),this.axios.get(this.apiUrl,{params:e}).then(function(t){a.kpiLoopTitle="DateComparedkpiLoop",a.kpiLoop_ops=t.data.data.body.kpiLoop,a.kpiRadarTitle="DateComparedkpiRadar",a.kpiRadar_ops=t.data.data.body.kpiRadar}).catch(function(t){})}},exportDataHandle:function(t,a,e){var i=this.tableKeyToId[e],s={domId:t,title:a,data:{url:window.apiUrl+this.apiUrl+"/"+i+"/excel",params:"orgIds="+this.emitData.asis_org+"&startDate="+this.startTime+"&endDate="+this.endTime+"&startDate1="+this.startTime1+"&endDate1="+this.endTime1}};this.$refs.exportDialog.dialogInit(s)}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"comt-contrast"},[e("div",{staticClass:"comt-chart-wrapper"},[e("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.i18nFormatter(t.kpiLoopTitle)))]),t._v(" "),e("div",{staticClass:"pie-chart-content"},[e("comtcontrast-chart",{staticClass:"kpiLoop-wrapper",attrs:{id:"overallChart",options:t.kpiLoop_ops,chartType:"ComtPie"}}),t._v(" "),e("span",{staticClass:"download-text",on:{click:function(a){t.exportDataHandle("overallChart",t.i18nFormatter(t.kpiLoopTitle),"kpiLoop")}}},[t._v(t._s(t.$t("allPages.load")))])],1)]),t._v(" "),t.isMallOrFloor?e("div",{staticClass:"comt-chart-wrapper"},[e("span",{staticClass:"ehcarts-title"},[t._v(t._s(t.i18nFormatter(t.kpiRadarTitle)))]),t._v(" "),e("div",{staticClass:"radar-chart-content"},[e("comtcontrast-chart",{staticClass:"dimen-wrapper",attrs:{id:"dimenChart",options:t.kpiRadar_ops,chartType:"Radar"}}),t._v(" "),e("span",{staticClass:"download-text",on:{click:function(a){t.exportDataHandle("dimenChart",t.i18nFormatter(t.kpiRadarTitle),"kpiRadar")}}},[t._v(t._s(t.$t("allPages.load")))])],1)]):t._e(),t._v(" "),e("export-data-dialog",{ref:"exportDialog"})],1)},staticRenderFns:[]},p=e("VU/8")(d,n,!1,function(t){e("9Fa/")},"data-v-04f78f4e",null);a.default=p.exports},"9Fa/":function(t,a){}});