webpackJsonp([98],{"2IyC":function(t,e,a){"use strict";var i=a("Dd8w"),l=a.n(i),o=a("m/z2"),s=a.n(o),n=(a("zL8q"),{props:{options:Object,id:[String,Number],chartType:String},data:function(){return{downloadIcon:"image://"+s.a,fontFamily:'"PingFang SC", "Lantinghei SC", "Microsoft YaHei", "HanHei SC", "Helvetica Neue", "Open Sans", Arial, "Hiragino Sans GB", 微软雅黑, STHeiti, "WenQuanYi Micro Hei", SimSun, sans-serif'}},watch:{options:function(t){switch(this.chartType){case"Heatmap":this.drawHeatmap(this.id,t);break;case"YearHeatmap":this.drawYearHeatmap(this.id,t);break;case"Scatter":this.drawScatter(this.id,t);break;case"YearScatter":this.drawYearScatter(this.id,t);break;case"GenderBar":this.drawGenderBar(this.id,t);break;case"AgeBar":this.drawAgeBar(this.id,t);break;case"HolidayActBar":this.drawHoActBar(this.id,t);break;case"Line":this.drawLine(this.id,t);break;case"YearLine":this.drawYearLine(this.id,t);break;case"TfLine":this.drawTfLine(this.id,t);break;case"Pie":this.drawPie(this.id,t);break;case"ComtPie":this.drawComtPie(this.id,t);break;case"Radar":this.drawRadar(this.id,t);break;case"LineBar":this.drawLineBar(this.id,t);break;case"ActLineBg":this.drawLineBg(this.id,t);break;case"ActHolidayActBar":this.drawActBar(this.id,t);break;case"ActLine":this.drawActLine(this.id,t);break;case"RankBar":this.drawRankBar(this.id,t);break;case"GroupBar":this.drawGroupBar(this.id,t)}}},mounted:function(){switch(this.chartType){case"Heatmap":this.drawHeatmap(this.id,this.options);break;case"YearHeatmap":this.drawYearHeatmap(this.id,this.options);break;case"Scatter":this.drawScatter(this.id,this.options);break;case"YearScatter":this.drawYearScatter(this.id,this.options);break;case"GenderBar":this.drawGenderBar(this.id,this.options);break;case"AgeBar":this.drawAgeBar(this.id,this.options);break;case"HolidayActBar":this.drawHoActBar(this.id,this.options);break;case"Line":this.drawLine(this.id,this.options);break;case"YearLine":this.drawYearLine(this.id,this.options);break;case"TfLine":this.drawTfLine(this.id,this.options);break;case"Pie":this.drawPie(this.id,this.options);break;case"ComtPie":this.drawComtPie(this.id,this.options);break;case"Radar":this.drawRadar(this.id,this.options);break;case"LineBar":this.drawLineBar(this.id,this.options);break;case"ActLineBg":this.drawLineBg(this.id,this.options);break;case"ActHolidayActBar":this.drawActBar(this.id,this.options);break;case"ActLine":this.drawActLine(this.id,this.options);break;case"RankBar":this.drawRankBar(this.id,this.options);break;case"GroupBar":this.drawGroupBar(this.id,this.options)}},methods:{i18nFomatter:function(t){var e="echartsTitle."+t;return this.$t(e)},initChartInstance:function(t){var e=document.getElementById(t);return this.$echarts.getInstanceByDom(e)||this.$echarts.init(e)},drawHeatmap:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i=["周一","周二","周三","周四","周五","周六","周日"],o={title:{},animation:!1,grid:{left:36,right:0,top:36,bottom:52},toolbox:{show:!0,showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:0,right:0},xAxis:{type:"category",data:[],nameTextStyle:{color:"#444",fontSize:12,fontFamily:this.fontFamily},axisLabel:{width:140},splitArea:{show:!0},axisTick:{show:!1},axisLine:{lineStyle:{color:"#535353"}}},yAxis:{type:"category",splitArea:{show:!0},axisTick:{show:!1},axisLine:{lineStyle:{color:"#535353"}},data:i},visualMap:{min:0,max:20,calculable:!0,orient:"horizontal",left:"left",bottom:-10,itemWidth:15,color:["#0068FF","#fff"]},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}};if("string"==typeof(e=l()({},o,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0){for(var s=[],n=null,r=[],h=[],d=null,c=0,p=e.series.length;c<p;c++)e.series[c].type="heatmap",e.series[c].itemStyle={emphasis:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}},e.series[c].label={normal:{show:!0,color:"#444"}};e.series.forEach(function(t,e){n=function(t,e){for(var a in e)if(t==e[a])return a}(t.name,i),r.push(t.data);for(var a=0;a<t.data.length;a++)s.push([parseInt(n),a,t.data[a]])});try{h=r.join(",").split(","),d=Math.max.apply(null,h)}catch(t){}e.visualMap.max=d,s=s.map(function(t){return[t[1],t[0],t[2]||"-"]});for(var f in e.series)e.series[f].data=[],e.series[f].data=s.splice(0,e.xAxis.data.length)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#444",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.visualMap.show=!1,e.yAxis.data=[],e.grid.height=670,a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500);e.tooltip.formatter=function(t,a,i){var l=e.yAxis.data,o=e.xAxis.data,s="";return s+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right:15px; text-align: left; color: #0068FF;">'+l[t.value[1]]+'</div><div><p style="font-size:13px;padding:4px 15px;color:"#444444"">'+o[t.value[0]]+": 平均热力"+t.value[2]+"</p></div>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawYearHeatmap:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i=["周一","周二","周三","周四","周五","周六","周日"],o={title:{},animation:!1,grid:{left:36,right:0,top:36,bottom:52},xAxis:{type:"category",data:[],nameTextStyle:{color:"#444",fontSize:12,fontFamily:this.fontFamily},axisLabel:{width:140},splitArea:{show:!0},axisTick:{show:!1},axisLine:{lineStyle:{color:"#535353"}}},yAxis:{type:"category",splitArea:{show:!0},axisTick:{show:!1},axisLine:{lineStyle:{color:"#535353"}},data:i},toolbox:{show:!0,showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:0,right:0},visualMap:{show:!1,min:0,max:20,calculable:!0,orient:"horizontal",left:"left",bottom:-10,itemWidth:15,color:["#0068FF","#fff"]},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}};"string"==typeof(e=l()({},o,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16});try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series){if(e.series.length>0){for(var s=[],n=null,r=[],h=[],d=null,c=0,p=e.series.length;c<p;c++)e.series[c].type="heatmap",e.series[c].itemStyle={emphasis:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}},e.series[c].label={normal:{show:!0,color:"#444"}};e.series.forEach(function(t,e){n=function(t,e){for(var a in e)if(t==e[a])return a}(t.name,i),r.push(t.data);for(var a=0;a<t.data.length;a++)s.push([parseInt(n),a,t.data[a]])}),h=r.join(",").split(","),d=Math.max.apply(null,h),e.visualMap.max=d,s=s.map(function(t){return[t[1],t[0],t[2]||"-"]});for(var f in e.series)e.series[f].data=[],e.series[f].data=s.splice(0,e.xAxis.data.length)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#444",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.visualMap.show=!1,e.yAxis.data=[],e.grid.height=670,a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500);e.tooltip.formatter=function(t,a,i){var l=e.yAxis.data,o=e.xAxis.data,s="";return s+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right: 15px; text-align: left; color: #0068FF;">'+l[t.value[1]]+'</div><div><p style="font-size:13px;padding:4px 15px;color:"#444444"">'+o[t.value[0]]+": 平均热力"+t.value[2]+"</p></div>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawScatter:function(t,e){var a=this,i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var o=["#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E","#6784E3","#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E","#6784E3","#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E"],s={backgroundColor:"#fff",grid:{top:88,left:74,right:75},color:o,legend:{y:"top",textStyle:{color:"#444",fontSize:14,fontFamily:this.fontFamily},top:26,data:[]},toolbox:{show:!1,showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:"26px",right:"21px"},xAxis:{type:"category",name:"日期",data:[],nameTextStyle:{color:"#888",fontFamily:this.fontFamily},splitLine:{show:!1},axisLine:{lineStyle:{color:"#535353"}},axisTick:{show:!1}},yAxis:{type:"value",name:"AQI指数",nameLocation:"end",nameTextStyle:{color:"#888",fontFamily:this.fontFamily},axisLine:{lineStyle:{color:"#535353"}},splitLine:{show:!0,lineStyle:{type:"dotted",color:"#E5E5E5"}},axisTick:{show:!1}},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}};if("string"==typeof(e=l()({},s,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),e.series){try{e.xAxis.data=e.xaxis.data}catch(t){}var n=[],r=[],h=null,d=null,c=[];e.series.length>0?function(){a.getRandomColors(e.series.length);var t=[];e.series.forEach(function(t,e){c[e]=[],t.data.forEach(function(t,a){t?(c[e][a]=t.value1,r.push(t.value1)):c[e][a]=0})}),h=Math.max.apply(null,r),Math.min.apply(null,r),d=a.computeSize(h,120);for(var i=function(i,l){var s=a.getSessionLocal("weather",e.series[i].name);e.series[i].type="scatter",e.series[i].symbolSize=function(t,e){var a=null;return a=c[i][e.dataIndex]?c[i][e.dataIndex]/d:0,a=0==a?0:a<=4?4:a},e.series[i].itemStyle={normal:{color:o[i],borderColor:o[i],borderWidth:2,opacity:.5}},s=s||"未知"+[i],e.legend.data.push({name:s,icon:"circle"}),e.series[i].name=s,n[s]=e.series[i].data,e.series[i].data.forEach(function(e,a){t[a]=e?e.weather.aqi:0}),e.series[i].data=t,t=[]},l=0,s=e.series.length;l<s;l++)i(l)}():(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.grid.height=600,e.xAxis.data=[],i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500));var p=this;e.tooltip.formatter=function(t,a,i){if(n[t.seriesName][t.dataIndex]){var l=void 0,o="",s="",r="",h="",d="";return(l=n[t.seriesName][t.dataIndex])&&(o=l.value1,s=p.getSessionLocal("weather",l.weather.type),r=l.weather.aqi,h=l.weather.ltemp+"℃ ~ "+l.weather.htemp+"℃"),d+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right:15px; text-align: left; color: #0068FF;">'+t.name.replace(/\(|\)/g," ")+'</div><div><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">'+e.kpiName+" : "+o+'人次</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">天气 : '+s+'</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">AQI指数 : '+r+'</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">温度 : '+h+"</p></div>"}},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawYearScatter:function(t,e){var a=this,i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var o=["#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E","#6784E3","#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E","#6784E3","#3BB8FF","#3D97CB","#87D14B","#0069FF","#FF9631","#FFC62E"],s={backgroundColor:"#fff",grid:{top:64,left:42,right:40},color:o,legend:{y:"top",textStyle:{color:"#444",fontSize:14,fontFamily:this.fontFamily},top:26,data:[]},toolbox:{show:!1,showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:"-1px",right:"-3px"},xAxis:{type:"category",name:"日期",data:[],nameTextStyle:{color:"#888",fontFamily:this.fontFamily},splitLine:{show:!1},axisLine:{lineStyle:{color:"#535353"}},axisTick:{show:!1}},yAxis:{type:"value",name:"AQI指数",nameLocation:"end",nameTextStyle:{color:"#888",fontFamily:this.fontFamily},axisLine:{lineStyle:{color:"#535353"}},splitLine:{show:!0,lineStyle:{type:"dotted",color:"#E5E5E5"}},axisTick:{show:!1}},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}};if("string"==typeof(e=l()({},s,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),e.series){var n=[],r=[],h=[],d=null,c=null;e.series.length>0?function(){var t=[];try{e.dataZoom={type:"slider",bottom:0},e.xAxis.data=e.xaxis.data,a.getRandomColors(e.series.length)}catch(t){}e.series.forEach(function(t,e){h[e]=[],t.data.forEach(function(t,a){t?(h[e][a]=t.value1,r.push(t.value1)):h[e][a]=0})}),d=Math.max.apply(null,r),Math.min.apply(null,r),c=a.computeSize(d,80);for(var i=function(i,l){e.series[i].type="scatter",e.series[i].symbolSize=function(t,e){var a=null;return a=h[i][e.dataIndex]?h[i][e.dataIndex]/c:0,a=0==a?0:a<=4?4:a},e.series[i].animation=!1,e.series[i].itemStyle={normal:{color:o[i],borderColor:o[i],borderWidth:2,opacity:.5}};var s=a.getSessionLocal("weather",e.series[i].name);s=s||"未知"+[i],e.legend.data.push(s),e.series[i].name=s,n[e.series[i].name]=e.series[i].data,e.series[i].data.forEach(function(e,a){t[a]=e?e.weather.aqi:0}),e.series[i].data=t,t=[]},l=0,s=e.series.length;l<s;l++)i(l)}():(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.grid.height=650,i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500));var p=this;e.tooltip.formatter=function(t,a,i){if(n[t.seriesName][t.dataIndex]){var l=void 0,o="",s="",r="",h="",d="";return(l=n[t.seriesName][t.dataIndex])&&(o=l.value1,s=p.getSessionLocal("weather",l.weather.type),r=l.weather.aqi,h=l.weather.ltemp+"℃ ~ "+l.weather.htemp+"℃"),d+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right:15px; text-align: left; color: #0068FF;">'+t.name.replace(/\(|\)/g," ")+'</div><div><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">'+e.kpiName+" : "+o+'人次</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">天气 : '+s+'</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">AQI指数 : '+r+'</p><p style="font-size:13px; padding:4px 15px; color:#444444; text-align: left;">温度 : '+h+"</p></div>"}},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawGenderBar:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i={grid:{top:66,left:60,bottom:66,right:40},legend:{data:[],bottom:16,textStyle:{color:"#555",fontFamily:this.fontFamily,fontSize:12},itemGap:85,itemWidth:10,itemHeight:10},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{name:"人次",type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=l()({},i,e)).series){var o={},s=[],n=[];try{if(s=e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var r=0;r<e.series.length;r++){e.xAxis.data.push(e.series[r].name);for(var h=0;h<e.series[r].data.length;h++){o[e.xaxis.data[h]]=e.series[r].data[h];for(var d in o)s[h].name==d&&s[h].data.push(o[d]);o={}}}for(var c=0;c<s.length;c++)s[c].itemStyle={show:!1},s[c].type="bar",s[c].stack="gender",s[c].barMaxWidth=60,s[c].barGap="6px",e.legend.data.push(s[c].name);s.forEach(function(t){t.data.forEach(function(t,e){n[e]?n[e]+=t:n[e]=t})}),e.series=s,e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,a){var i="",l="",o="";if(t.length>0){i+='<div style="font-size:14px;height:32px;color:#0069FF;border-radius:4px;line-height:36px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var s=0;s<t.length;s++)l=0==(o=0==t[s].data||0==n[t[s].dataIndex]?0:t[s].data/n[t[s].dataIndex])?"0%":(100*o).toFixed(2)+"%",i+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+t[s].seriesName+" : "+l+"</p>";return i+="</div>"}},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawAgeBar:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i={grid:{top:66,left:60,bottom:66,right:40},legend:{data:[],bottom:16,textStyle:{color:"#555",fontFamily:this.fontFamily,fontSize:12},itemGap:6,itemWidth:10,itemHeight:10},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{name:"人次",type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=l()({},i,e)).series){var o={},s=[],n=[];try{if(s=e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var r=0;r<e.series.length;r++){e.xAxis.data.push(e.series[r].name);for(var h=0;h<e.series[r].data.length;h++){o[e.xaxis.data[h]]=e.series[r].data[h];for(var d in o)s[h].name==d&&s[h].data.push(o[d]);o={}}}for(var c=0;c<s.length;c++)s[c].itemStyle={show:!1},s[c].type="bar",s[c].stack="gender",s[c].barMaxWidth=60,s[c].barCategoryGap="50px",e.legend.data.push(s[c].name);s.forEach(function(t){t.data.forEach(function(t,e){n[e]?n[e]+=t:n[e]=t})}),e.series=s,e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,a){var i="",l="",o="";if(t.length>0){i+='<div style="font-size:14px;height:32px;color:#0069FF;border-radius:4px;line-height:36px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var s=0;s<t.length;s++)l=0==(o=0==t[s].data||0==n[t[s].dataIndex]?0:t[s].data/n[t[s].dataIndex])?"0%":(100*o).toFixed(2)+"%",i+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+t[s].seriesName+" : "+l+"</p>";return i+="</div>"}},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawHoActBar:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i={color:["#3BB8FF","#87D14B","#6784E3"],grid:{top:66,left:60,bottom:66,right:40},legend:{data:[],bottom:16,textStyle:{color:"#555",fontFamily:this.fontFamily,fontSize:14},itemGap:34,itemWidth:10,itemHeight:10},tooltip:{trigger:"item",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{name:"人次",type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={show:!1,text:e.title,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=l()({},i,e)).series){var o={},s=[],n=[];try{if(s=e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var r=0;r<e.series.length;r++){e.xAxis.data.push(e.series[r].name);for(var h=0;h<e.series[r].data.length;h++){o[e.xaxis.data[h]]=e.series[r].data[h];for(var d in o)s[h].name==d&&s[h].data.push(o[d]);o={}}}for(var c=0;c<s.length;c++)s[c].itemStyle={normal:{barBorderRadius:7}},s[c].type="bar",s[c].barWidth=14,e.legend.data.push({name:s[c].name,icon:"circle"});s.forEach(function(t){t.data.forEach(function(t,e){n[e]?n[e]+=t:n[e]=t})}),e.series=s,e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,a){var i="",l="",o=null,s="";return l=t.name+t.seriesName,t.value>1e5?(o=(t.value/1e4).toFixed(2),s="万人次"):(o=t.value,s="人次"),i+='<div style="font-size: 14px;height: 32px;color: #0069FF;border-radius: 4px;line-height: 36px;padding-left: 15px;padding-right: 15px;text-align: left;">'+l+"</div><div>",i+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+o+s+"</p>",i+="</div>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawActBar:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i={color:["#3BB8FF","#87D14B","#6784E3"],grid:{top:80,left:70,bottom:97,right:45},legend:{data:[],bottom:26,textStyle:{color:"#555",fontFamily:this.fontFamily,fontSize:14},itemGap:34,itemWidth:10,itemHeight:10},tooltip:{trigger:"item",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{name:"人次",type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={show:!1,text:e.title,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=l()({},i,e)).series){var o={},s=[],n=[];try{if(s=e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var r=0;r<e.series.length;r++){e.xAxis.data.push(e.series[r].name);for(var h=0;h<e.series[r].data.length;h++){o[e.xaxis.data[h]]=e.series[r].data[h];for(var d in o)s[h].name==d&&s[h].data.push(o[d]);o={}}}for(var c=0;c<s.length;c++)s[c].itemStyle={normal:{barBorderRadius:7}},s[c].type="bar",s[c].barWidth=14,e.legend.data.push({name:s[c].name,icon:"circle"});s.forEach(function(t){t.data.forEach(function(t,e){n[e]?n[e]+=t:n[e]=t})}),e.series=s,e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,a){var i="",l="",o=null,s="";return l=t.name+t.seriesName,t.value>1e5?(o=(t.value/1e4).toFixed(2),s="万人次"):(o=t.value,s="人次"),i+='<div style="font-size: 14px;height: 32px;color: #0069FF;border-radius: 4px;line-height: 36px;padding-left: 15px;padding-right: 15px;text-align: left;">'+l+"</div><div>",i+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+o+s+"</p>",i+="</div>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawActLine:function(){},drawLineBg:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i={backgroundColor:"#fff",color:["#87D14B","#3BB8FF","#FFC62E","#FF9631","#7460EE"],tooltip:{show:!0,trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},grid:{top:60,left:60,bottom:60,right:45},yAxis:{type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:12,selected:{},textStyle:{color:"#555"},data:[]},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},data:[]};"string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26});var o=[{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(135, 209, 75, 0.4)"},{offset:1,color:"rgba(135, 209, 75, 0.2)"}],globalCoord:!1},{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 184, 255, 0.4)"},{offset:1,color:"rgba(59, 184, 255, 0.2)"}],globalCoord:!1}];if((e=l()({},i,e)).series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0)for(var s=0,n=e.series.length;s<n;s++){var r=e.series[s].name;e.series[s].type="line",e.series[s].showSymbol=!0,e.series[s].symbolSize=6,e.series[s].areaStyle={normal:{color:o[s]}},e.legend.data.push(e.series[s].name),r&&(e.legend.selected[r]=s<2)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500);e.tooltip.formatter=function(t,e,a){var i="";i+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px; text-align: left;">'+t[0].axisValue+"</div><div>";for(var l=0;l<t.length;l++)i+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[l].marker+" "+t[l].seriesName+"客流: "+(t[l].data?t[l].data:"--")+"人次</p>";return i+="</div>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawLine:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i={backgroundColor:"#fff",color:["#87D14B","#3BB8FF","#FFC62E","#FF9631","#7460EE"],tooltip:{show:!0,trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},grid:{top:60,left:60,bottom:66,right:40},yAxis:{type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:16,selected:{},textStyle:{color:"#555"},data:[]},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},data:[]};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=l()({},i,e)).series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0)for(var o=0,s=e.series.length;o<s;o++){var n=e.series[o].name;e.series[o].type="line",e.series[o].showSymbol=!0,e.legend.data.push(e.series[o].name),n&&(e.legend.selected[n]=o<2)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500);e.tooltip.formatter=function(t,a,i){var l="";if(l+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px; text-align: left;">'+t[0].axisValue+"</div><div>","rate"===e.seriesText)for(var o=0;o<t.length;o++)l+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[o].marker+" "+t[o].seriesName+": "+(t[o].data?t[o].data:"--")+"</p>";else for(var s=0;s<t.length;s++)l+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[s].marker+" "+t[s].seriesName+"客流: "+(t[s].data?t[s].data:"--")+"人次</p>";return l+="</div>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawYearLine:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i={backgroundColor:"#fff",color:["#87D14B","#3BB8FF","#FFC62E","#FF9631","#7460EE"],toolbox:{showTitle:!1,feature:{saveAsImage:{icon:this.downloadIcon}},top:"26px",right:"21px"},tooltip:{show:!0,trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},grid:{top:76,left:60,bottom:120,right:45},yAxis:{type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:64,selected:{},textStyle:{color:"#555"},data:[]},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}}};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),(e=l()({},i,e)).series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0){for(var o=0,s=e.series.length;o<s;o++){var n=e.series[o].name;e.series[o].type="line",e.series[o].showSymbol=!0,e.legend.data.push(e.series[o].name),n&&(e.legend.selected[n]=o<2)}e.dataZoom={type:"slider",bottom:26}}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500);e.tooltip.formatter=function(t,e,a){var i="";i+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var l=0;l<t.length;l++)i+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[l].marker+" "+t[l].seriesName+"客流: "+(t[l].data?t[l].data:"--")+"人次</p>";return i+="</div>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawTfLine:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i="";if("开心指数"==e.title){i="开心指数";var o=[];e.series.forEach(function(t){t.data=t.data.map(function(t){if(t)return t=t.toFixed(3),o.push(t),t})})}var s={backgroundColor:"#fff",color:["#87D14B","#3BB8FF","#FFC62E","#FF9631","#7460EE"],tooltip:{show:!0,trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},grid:{top:48,left:40,bottom:48,right:30},yAxis:{name:i,type:"value",nameRotate:1,min:function(t){return Math.floor(10*t.min)/10},max:function(t){return Math.ceil(10*t.max)/10},splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:0,selected:{},textStyle:{color:"#555"},data:[]},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},data:[]};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:0,top:0}),(e=l()({},s,e)).series){try{e.xAxis.data=e.xaxis.data}catch(t){}if(e.series.length>0)for(var n=0,r=e.series.length;n<r;n++){var h=e.series[n].name;e.series[n].type="line",e.series[n].showSymbol=!0,e.legend.data.push(e.series[n].name),h&&(e.legend.selected[h]=n<2)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500);e.tooltip.formatter=function(t,e,a){var i="";i+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var l=0;l<t.length;l++)i+='<p style="font-size:13px;padding:4px 15px;color:#444444; text-align: left;">'+t[l].marker+" "+t[l].seriesName+": "+(t[l].data?t[l].data:"--")+"</p>";return i+="</div>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawPie:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});"string"==typeof(e=l()({},{backgroundColor:"#fff",tooltip:{show:!0,backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"#444"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"}},e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.legend={orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:30,bottom:26,selected:{},textStyle:{color:"#555"},data:[]};var i=0;if(e.series)if(e.series.length>0)if(e.series.forEach(function(t){t.data.forEach(function(t){i+=t.value})}),i>0){for(var o=0,s=e.series.length;o<s;o++){for(var n=0;n<e.series[o].data.length;n++)e.series[o].data[n].value||0==e.series[o].data[n].value?(e.series[o].data[n].name&&("未知"!==e.series[o].data[n].name?e.legend.selected[e.series[o].data[n].name]=!0:e.legend.selected[e.series[o].data[n].name]=!1),e.legend.data.push({name:e.series[o].data[n].name,icon:"rect"})):e.series[o].label.show=!1;e.series[o].type="pie",e.series[o].radius=["30%","60%"],e.series[o].center=["50%","50%"],e.series[o].itemStyle={emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},e.series[o].label={normal:{show:!0,position:"outside",formatter:"{b} {d}%"},emphasis:{show:!0}},e.series[o].labelLine={normal:{show:!0}}}e.tooltip.formatter=function(t,e,a){var l="",o="";return t.value||0==t.value?(o=t.value,(t.value/i*100).toFixed(2)+"%"):(o="--","--"),l+='<div><p style="font-size:14px; text-align: left; padding:4px 15px; color:"#444444"">'+t.name+": "+o+'人</p><p style="font-size:14px; text-align: left; padding:4px 15px; color:"#444444"">占比: '+t.percent+"%</p>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.series=[],a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500);else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500)},drawComtPie:function(t,e){var a=this,i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});"string"==typeof(e=l()({},{backgroundColor:"#fff",color:["#3BB8FF","#7460EE"],tooltip:{backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},legend:{orient:"horizontal",x:"center",itemWidth:12,itemHeight:12,itemGap:15,bottom:30,selected:{},textStyle:{color:"#555"},data:[]}},e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.series&&(e.series.length>0?function(){e.series[0].data.forEach(function(t){-1===e.legend.data.indexOf(t.name)&&e.legend.data.push(t.name)});for(var t=e.series.length,i="",l=[],o="",s=0;s<t;s++)i=100/t*(s+1)-100/t/2+"%",l=t>=7?["30%","40%"]:["40%","50%"],e.series[s].center=[i,"50%"],e.series[s].radius=l,e.series[s].label={normal:{show:!0,position:"center",align:"center",verticalAlign:"middle",color:"#666",fontFamily:a.fontFamily,formatter:function(t){return o===t.seriesName?(o="",""):(o=t.seriesName,t.seriesName)}},emphasis:{show:!0,position:"center",align:"center",verticalAlign:"middle",color:"#666",fontFamily:a.fontFamily,formatter:function(t){return o!==t.seriesName?(o="",""):(o=t.seriesName,t.seriesName)}}},e.series[s].labelLine={normal:{show:!1}}}():(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500)),e.tooltip.formatter=function(t,e,a){var i="",l="";return l=t.value||0==t.value?t.value>1e5?(t.value/1e4).toFixed(2):t.value:"--",i+='<div style="font-size: 14px;height: 32px;color: #0069FF;border-radius: 4px;line-height: 36px;padding-left: 15px;padding-right: 15px;text-align: left;">'+t.seriesName+'</div><div><p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+t.name+": "+l+"</p></div>"},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e))},drawRadar:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});if("string"==typeof(e=l()({},{backgroundColor:"#fff",color:["#3BB8FF","#7460EE"],tooltip:{show:!1},legend:{icon:"line",data:[],bottom:66,left:"30%",orient:"vertical"},radar:{name:{textStyle:{fontSize:14,color:"#666",borderRadius:3,padding:[3,5]}},indicator:[],axisLine:{lineStyle:{color:"transparent"}},splitLine:{lineStyle:{color:"#ccc",width:3,type:"dotted"}},splitArea:{areaStyle:{color:"#fff"}}}},e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.series){var i=[],o=[],s=[];if(e.series.length>0){for(var n=0,r=e.series.length;n<r;n++)e.legend.data.push(e.series[n].name),i.push(e.series[n].data),s.push({name:e.series[n].name,value:e.series[n].data});if(2==i.length){for(var h=0;h<i[0].length;h++)i[0][h]>i[1][h]?o.push(i[0][h]):o.push(i[1][h]);e.radar.indicator=e.xaxis.data.map(function(t,e){return{name:t,max:o[e]+Math.ceil(o[e]/5)}})}else console.error("max length 不能小于2");e.series={type:"radar",data:s,lineStyle:{width:3}}}else{e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}};try{e.xAxis.data=[]}catch(t){}a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500)}a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawLineBar:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i={backgroundColor:"#fff",grid:{top:78,left:60,bottom:66,right:60},legend:{bottom:16,itemGap:65,itemWidth:12,itemHeight:12},tooltip:{show:!0,backgroundColor:"#fff",textStyle:{color:"#333333"},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)",trigger:"axis"},color:["#3BB8FF","#87D14B","#FFC62E"],yAxis:[{name:"客流量",type:"value",splitLine:{lineStyle:{color:"#e8e8e8"}},axisLine:{lineStyle:{color:"#888"}}},{name:"增长率",type:"value",splitLine:{show:!1},axisTick:{show:!1},axisLine:{lineStyle:{color:"#888"}}}],xAxis:{type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:"#888"}},data:[]}};if("string"==typeof(e=l()({},i,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:26}),e.series){try{e.xAxis.data=e.xaxis.data.map(function(t){return t})}catch(t){}if(e.series.length>0)for(var o=0,s=e.series.length;o<s;o++)e.series[o].itemStyle={barBorderRadius:7},e.series[o].barWidth=14,"line"===e.series[o].type?(e.series[o].yAxisIndex=1,e.series[o].symbolSize=6):(e.series[o].yAxisIndex=0,e.series[o].barGap="100%"),"avgWeekDay"===e.series[o].name?e.series[o].name="工作日平均客流":"avgWeekend"===e.series[o].name?e.series[o].name="双休日平均客流":e.series[o].name="增长率";else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#444",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500);e.tooltip.formatter=function(t,e,a){var i="",l="";return i+='<div style="font-size:14px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px; text-align: left; color: #0068FF;">'+t[0].name+"</div><div>",t.length>2&&(t.forEach(function(t,e){"bar"===t.seriesType&&(l=t.data?t.data>1e5?(t.data/1e4).toFixed(2)+"万人":t.data+"人次":"--人次",i+='<p style="font-size:13px; padding:4px 15px; color:#444; text-align: left;">'+t.marker+" "+t.seriesName+": "+l+"</p>"),"line"===t.seriesType&&(i+='<p style="font-size:13px; padding:4px 15px; color:#444; text-align: left;">'+t.marker+" "+t.seriesName+": "+(t.data?t.data+"%":"--")+"</p>")}),i+="</div>"),i},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},drawRankBar:function(t,e){var a=this,i={};(i=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});i.off("click"),i.on("click",function(t){var e=[],l="";/^\<|\>/g.test(t.name)?(e=t.name.match(/\d+/g),l=-1!==t.name.indexOf("<")?"-"+e[0]:e[0]+"-"):l=(e=t.name.match(/^\d+|\-\d+/g)).length>1?e[0]+e[1]:e[0];var o=t.dataIndex,s={series:[{itemStyle:{normal:{color:function(t){return t.dataIndex==o?"#0069FF":"#3BB8FF"}}}}]};i.setOption(s),a.$emit("emitSingle",l)});var o={grid:{top:70,left:60,bottom:66,right:40},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{type:"value",nameRotate:1,splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"}},xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:12,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof e.title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:26,top:20}),(e=l()({},o,e)).series){try{if(e.xAxis.data=e.xaxis.data,e.xaxis.data.map(function(t){return{name:t,data:[]}}),e.series.length>0)for(var s=0;s<e.series.length;s++)e.series[s].itemStyle={normal:{color:function(t){return 0==t.dataIndex?"#0069FF":"#3BB8FF"}}},e.series[s].type="bar",e.series[s].barMaxWidth="40px",e.series[s].barGap="6px";var n={TRAFFIC:"人次",ORDER:"单",HANDBAGRATE:"%",PREPRICE:"元/人",PERAREAVALUE:"元/平米",ENTERINGRATE:"%",DURATIONTIME:"分",DEPTH:"游逛深度",SALES:"元"};e.yAxis.name=n[e.kpiType],e.series.length||(e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},i.clear(),setTimeout(function(){i.hideLoading(),i.setOption(e)},500))}catch(t){}e.tooltip.formatter=function(t,e,a){var i="";if(t.length>0){i+='<div style="font-size:14px;height:32px;color:#0069FF;border-radius:4px;line-height:36px;padding-left:15px;padding-right:15px;text-align: left;">'+t[0].axisValue+"</div><div>";for(var l=0;l<t.length;l++)i+='<p style="font-size:13px;padding:4px 23px 6px 15px;color:#333;text-align: left;">'+(t[l].data>1e5?(t[l].data/1e4).toFixed(2):t[l].data)+(t[l].data>1e5?"万人":"人")+"</p>";return i+="</div>"}},i.clear(),setTimeout(function(){i.hideLoading()},500),i.setOption(e)}},drawGroupBar:function(t,e){var a={};(a=this.initChartInstance(t)).showLoading("default",{text:"",color:"#409eff"});var i={tooltip:{backgroundColor:"#fff",padding:[0,0,0,0],textStyle:{color:"#333"},axisPointer:{type:"line",animation:!0,lineStyle:{color:"transparent"}},extraCssText:"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)"},yAxis:{type:"value",splitLine:{lineStyle:{color:"#EBEBEB"}},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:13,fontFamily:this.fontFamily,color:"#666"}},xAxis:{type:"category",splitLine:{show:!1},axisLine:{lineStyle:{color:"#888"}},axisTick:{show:!1},axisLabel:{fontSize:13,fontFamily:this.fontFamily,color:"#666"},data:[]}};if("string"==typeof(e=l()({},i,e)).title&&(e.title={text:e.title,show:!1,textStyle:{color:"#444",fontSize:18,fontFamily:this.fontFamily,fontWeight:"normal"},left:24,top:16}),e.series){var o=0;if(e.series.length>0){try{e.xAxis.data=e.xaxis.data}catch(t){}e.series.forEach(function(t){t.data.forEach(function(t){o+=t})});for(var s=0,n=e.series.length;s<n;s++)e.series[s].type="bar",e.series[s].barMaxWidth=40,e.series[s].barGap="6px"}else e.graphic={type:"text",left:"center",top:"middle",z:100,style:{fill:"#333",text:this.$t("echartsTitle.noData"),font:"14px "+this.fontFamily}},e.xAxis.data=[],a.clear(),setTimeout(function(){a.hideLoading(),a.setOption(e)},500);e.tooltip.formatter=function(t,e,a){var i="",l="",s="";return t.value||0==t.value?(l=t.value,s=(t.value/o*100).toFixed(2)+"%"):(l="--",s="--"),i+='<div style="font-size:16px;height:31px;color:#333;border-radius:4px;line-height:31px;padding-left:15px; padding-right:15px; text-align: left; color: #0068FF;">'+t.name+'</div><div><p style="font-size:14px; text-align: left; padding:4px 15px; color:"#444444"">人数: '+l+'人</p><p style="font-size:14px; text-align: left; padding:4px 15px; color:"#444444"">占比: '+s+"</p>"},a.clear(),setTimeout(function(){a.hideLoading()},500),a.setOption(e)}},computeSize:function(t,e,a){return a=a||1,t/a>e?(a+=1,this.computeSize(t,e,a)):a},getRandomColors:function(t){for(var e=[];e.length<t;){var a="#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6);e.push(a)}return e}}}),r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:this.id,chartType:this.chartType}})},staticRenderFns:[]},h=a("VU/8")(n,r,!1,null,null,null);e.a=h.exports},"4MBJ":function(t,e,a){"use strict";(function(t){var i=a("mvHQ"),l=a.n(i),o=a("pJt5"),s=a("Epwm"),n=a("2IyC"),r=a("X673");e.a={data:function(){return{_time:"",_tabId:"",moreOptVisible:!1,mallData:[],asisName:"",asisLevel:"",emitData:{},tableKeyToId:{},tableIds:"",trafficFlow_title:"",radioDate:"小时级",trafficFlowLoading:!0,trafficFlow_head:[],trafficFlow_ops:[],trafficFlow_lineOps:{},isTabChart:!1,localLineData:{},apiUrl:"",searchTime:"",val:"",trafficFlowing_title:"",line:"1"}},components:{"ioflow-option":s.a,"io-chart":n.a,"export-data-dialog":o.a},created:function(){var e=this;window.addEventListener("resize",function(){try{var a={chart1:t("#tfChart")[0]};for(var i in a)if(a.hasOwnProperty(i)&&void 0!=a[i]){a[i]=e.$echarts.init(a[i]);a[i].resize()}}catch(t){}})},mounted:function(){this.getMallOpt(),this.showCollapse()},methods:{showCollapse:function(){var e=this,a="",i="",l="",o="";a=this.getStyleFn(".el-header","height"),i=this.getStyleFn(".analysis-wrapper .el-header","height"),this.moreOptVisible?(this.moreOptVisible=!1,o=a+i+8+"px",t(".ioflow-main").animate({marginTop:o})):(this.moreOptVisible=!0,setTimeout(function(){l=e.getStyleFn(".analysis-option-wrapper","height"),o=a+i+l+8+"px",t(".ioflow-main").animate({marginTop:o})},100))},getMallOpt:function(){var t=this;this.axios.get("/malls",{params:{accountId:this.$cookie.get("accountId"),status:1,_t:Date.parse(new Date)/1e3}}).then(function(e){var a="",i=null;if(e.data.data.length>=1){var l=window.sessionStorage.getItem("mallId");l&&Number(l),e.data.data.forEach(function(e,i){t.mallData.push(e),l&&e.id==l&&(a=e.name)}),t.asisName=a||e.data.data[0].name,i=l?Number(l):e.data.data[0].id,t.$refs.init.initAsis(i)}})},initTab:function(t){var e=this;this.emitData=t,this.trafficFlowLoading=!0,this.tableIds&&"{}"!==l()(this.tableKeyToId)?this.getChartData(this.tableIds):(this.tableKeyToId={},this.tableIds="",this.axios.get("/reportCharts",{params:{report:"happyIndex",_t:Date.parse(new Date)/1e3}}).then(function(t){var a=t.data.data;a.forEach(function(t,i){e.tableKeyToId[t.key]=t.id,"happyIndex"===t.key&&(i==a.length-1?e.tableIds+=t.id:e.tableIds+=t.id+",")}),e.getChartData(e.tableIds)}))},getChartData:function(t){var e=this;if(t){this.localLineData={},this.isTabChart=!1;var a={};this.emitData.asis_time?this.searchTime=this.emitData.asis_time:this.searchTime=dateUnit.dateFormat(new Date,"yyyy-MM-dd"),this._time=this.searchTime,this.apiUrl="/report/happyIndex/"+this.emitData.asis_level,a={orgIds:this.emitData.asis_org,startDate:this.searchTime,chartIds:t,_t:Date.parse(new Date)/1e3},this.axios.get(this.apiUrl,{params:a}).then(function(t){var a=t.data.data.body.happyIndex;e.localLineData=JSON.parse(l()(a)),e.trafficFlow_lineOps=JSON.parse(l()(a)),e.trafficFlowing_title="trafficInAndOuttrafficInAndOut"}).catch(function(t){console.log("happyIndex err:",t.message,t)})}},changeTabSelect:function(t){var e=this;switch(this.localLineData={},this.isTabChart=!1,t){case"小时级":t="TAB_HOUR";break;case"分钟级":t="TAB_MINUTE"}var a=this.tableKeyToId.trafficInAndOut;if(this.tableIds){var i={};this.searchTime=this.emitData.asis_time?this.emitData.asis_time:dateUnit.dateFormat(new Date,"yyyy-MM-dd"),this.apiUrl="/report/trafficInAndOut/"+this.emitData.asis_level+"/"+a,i={orgIds:this.emitData.asis_org,date:this.searchTime,chartIds:this.tableIds,option:t,_t:Date.parse(new Date)/1e3},this.axios.get(this.apiUrl,{params:i}).then(function(t){e.line="1";t.data;var a=t.data.data;e.localLineData=JSON.parse(l()(a)),e.trafficFlow_lineOps=JSON.parse(l()(a)),e.trafficFlowing_title="trafficInAndOuttrafficInAndOut"})}},autoComplateHead:function(t,e){var a=[],i=[];if(e.length<8){a=e.map(function(t){return t});for(var l=0,o=8-e.length;l<o;l++)a.push("--");a.forEach(function(t,e){i.push({prop:"defaultOrg"+e,label:t})})}else e.forEach(function(t,e){i.push({prop:"defaultOrg"+e,label:t})});return i},dealData:function(t,e){var a={},i=[],l="";return t.forEach(function(t){if(t.data.length<e.length){for(var o=0,s=t.data.length;o<s;o++)l=e[o].prop,a[l]=t.data[o]||0==t.data[o]?t.data[o]:"--";for(var n=t.data.length;n<e.length;n++)l=e[n].prop,a[l]="--"}else for(var r=0,h=t.data.length;r<h;r++)l=e[r].prop,a[l]=t.data[r]||0==t.data[r]?t.data[r]:"--";i.push(a),a={}}),i},reportHandler:function(t){var e=this;this.emitData=t,this.asisName=t.asis_tit,this.tableIds?this.getChartData(this.tableIds):(this.tableKeyToId={},this.tableIds="",this.axios.get("/reportCharts",{params:{report:"trafficInAndOut",_t:Date.parse(new Date)/1e3}}).then(function(t){var a=t.data.data;a.forEach(function(t,i){e.tableKeyToId[t.key]=t.id,"trafficInAndOut"===t.key&&(i==a.length-1?e.tableIds+=t.id:e.tableIds+=t.id+",")}),e.getChartData(e.tableIds)}))},selReport:function(t){var e=this;if("table"===t){if(this.isTabChart)return;this.line="0",this.isTabChart=!0,this.trafficFlow_title="",this.trafficFlow_head=[],this.trafficFlow_ops=[],this.trafficFlowLoading=!0,this.trafficFlow_title="trafficInAndOuttrafficInAndOut";var a=r.lineToTab(this.localLineData);this.trafficFlow_head=a.headData,setTimeout(function(){e.trafficFlow_ops=a.bodyData,e.trafficFlowLoading=!1},200)}else{if(!this.isTabChart)return;this.isTabChart=!1,this.line="1",this.trafficFlow_lineOps={},this.trafficFlow_lineOps=JSON.parse(l()(this.localLineData)),this.trafficFlowing_title="trafficInAndOuttrafficInAndOut"}},exportDataHandle:function(t,e,a){var i=this.tableKeyToId[a],l={domId:t,title:e,data:{url:"/report/"+this.emitData.asis_level+"/"+i+"/excel",params:"orgIds="+this.emitData.asis_org+"&date="+(this.searchTime||dateUnit.dateFormat(new Date,"yyyy-MM-dd"))}};console.log("happinessindex exportNeed",l),this.$refs.exportDialog.dialogInit(l)}}}}).call(e,a("7t+N"))},Epwm:function(t,e,a){"use strict";var i,l=a("bOdI"),o=a.n(l),s=a("mvHQ"),n=a.n(s),r=a("GXH0"),h=a.n(r),d=function(t){setTimeout(t,2e3)},c={props:{mallData:Array},data:function(){return{checkedMall:[],pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()}},weekPickerOpt:{firstDayOfWeek:1},tabItem:[],panelObj:{mallPanel:!1,floorPanel:!1,formatPanel:!1,ioPanel:!1,shopPanel:!1},analyasisTime:[{label:"日",value:"day",is_active:"time-btn"},{label:"周",value:"week",is_active:"time-btn"},{label:"月",value:"month",is_active:"time-btn"},{label:"年",value:"year",is_active:"time-btn"},{label:"自定义",value:"custom",is_active:"time-btn"}],reportTime:{isDay:!1,isWeek:!1,isMonth:!1,isYear:!1,isCustom:!1},dayTime:"",weekTime:"",monthTime:"",yearTime:"",customTime:"",mallVal:"",floorVal:"",floorItem:"",zoneItem:"",formatVal:"",ioVal:"",gateVal:"",zoneVal:"",asisLevel:"",kpiVal:"TRAFFIC",kpiOpt:[],floorData:[],floorList:[],zoneData:[],zoneList:[],formatData:[],ioData:[],gateData:[],paramId:"",shopFloorData:[],shopFloorId:"",shopFloorVal:"",mutiMallVal:[],mutiFloorVal:[],mutiFormatVal:[],mutiFloorData:[],mutiGateVal:[],mutiZoneVal:[],formatOptions:[{id:"success",label:"with children",children:null},{id:"no-children",label:"width no children",children:null},{id:"failure",label:"Demonstrates error handling",children:null}],mallId:"",floorId:"",ioId:"",zoneId:"",formatId:"",gateLevel:"all",gateLevelList:[{label:"all",value:"all"},{label:"mall",value:"mall"},{label:"floor",value:"floor"},{label:"store",value:"zone"}],isMallSelAll:!1,isFloorSelAll:!1,isGateSelAll:!1,isZoneSelAll:!1}},components:{treeselect:h.a},watch:{},created:function(){if(this.tabItem=[],"mall"===this.$Project){var t={mall:"mall"};for(var e in t)this.tabItem.push({label:e,value:t[e],className:"analysis-item"})}else this.tabItem=[{label:"mall",value:"mall",className:"analysis-item"}]},methods:(i={i18nFormatter:function(t){var e="asisTab."+t;return this.$t(e)},getTime1:function(){},removeTag:function(){},initAsis:function(t){this.paramId=t,this.mallId=t,this.mallVal=t,this.getFloorOpt(t),this.getMallGates(),this.tabClickHandle(0),this.isMallSelAll=this.mutiMallVal.length==this.mallData.length;var e={asis_level:this.asisLevel,asis_date:"day",asis_time:this.dayTime,asis_org:this.paramId,asis_org_name:[]};e.asis_org_name=[],this.$emit("initData",e)},tabClickHandle:function(t){if("analysis-item"===this.tabItem[t].className){this.tabItem.forEach(function(t){t.className="analysis-item"}),this.tabItem[t].className="analysis-item tabs-active";for(var e in this.panelObj)this.panelObj[e]=!1;switch(this.kpiVal="",this.asisLevel="",this.tabItem[t].value){case"mall":this.mutiMallVal=[this.mallId],this.panelObj.mallPanel=!0,this.asisLevel="mall";break;case"floor":this.mutiFloorVal=this.floorId?[this.floorId]:[],this.isFloorSelAll=this.mutiFloorVal.length==this.mutiFloorData.length,this.panelObj.floorPanel=!0,this.asisLevel="floor";break;case"io":this.mallVal=this.mallId,this.floorVal=this.floorId,this.formatVal=this.formatId,this.panelObj.ioPanel=!0,this.asisLevel="gate";break;case"shop":this.mallVal=this.mallId,this.shopFloorVal=this.floorId,this.formatVal=this.formatId,this.mutiZoneVal=this.zoneId?[this.zoneId]:"",this.isZoneSelAll=this.mutiZoneVal.length==this.zoneData.length,this.panelObj.shopPanel=!0,this.asisLevel="zone";break;default:this.kpiOpt=[],this.kpiVal=""}}},getIoOpt:function(t,e){var a=this;this.ioData=[],this.ioId="",this.ioVal="",this.axios.get("/gates",{params:{mallId:t,accountId:this.$cookie.get("accountId"),_t:Date.parse(new Date)/1e3}}).then(function(t){t.data.data.length>0&&(a.ioData=t.data.data,a.ioId=t.data.data[0].id,a.ioVal=a.panelObj.ioPanel?[t.data.data[0].id]:t.data.data[0].id)}).catch(function(t){})},loadOptions:function(t){var e=t.action,a=t.parentNode,i=t.callback;if(e===r.LOAD_CHILDREN_OPTIONS)switch(this.axios.get("/formats",{params:{_t:Date.parse(new Date)/1e3}}),a.id){case"success":d(function(){a.children=[{id:"child",label:"Child option"}],i()});break;case"no-children":d(function(){a.children=[],i()});break;case"failure":d(function(){i(new Error("Failed to load option: network error."))})}},getMallGates:function(){var t=this;this.mutiGateVal=[],this.gateData=[],this.axios.get("/gates",{params:{mallId:this.mallVal,isMallGate:1,_t:Date.parse(new Date)/1e3}}).then(function(e){if(e.data.data.length>0){var a=e.data.data;t.mutiGateVal=[a[0].id],t.gateData=a}})},gateLevelChange:function(){this.isGateSelAll=!1,"all"===this.gateLevel?this.getAllGates():"mall"===this.gateLevel?this.getMallGates():"floor"===this.gateLevel?this.getFloorList():this.getZoneList()},mallChange:function(){this.mallId=this.mallVal,this.mutiMallVal=[this.mallVal],this.panelObj.ioPanel?(this.gateLevel="all",this.gateLevelChange()):this.getFloorOpt(this.mallVal)}},o()(i,"mallChange",function(){this.getMallGates()}),o()(i,"floorChange",function(){}),o()(i,"mallChangeHandle",function(){this.isMallSelAll=(this.isMallSelAll,!(this.mutiMallVal.length<this.mallData.length))}),o()(i,"gateChangeHandle",function(){this.isGateSelAll=(this.isGateSelAll,!(this.mutiGateVal.length<this.gateData.length))}),o()(i,"floorChangeHandle",function(){this.isFloorSelAll=(this.isFloorSelAll,!(this.mutiFloorVal.length<this.mutiFloorData.length))}),o()(i,"zoneChangeHandle",function(){this.isZoneSelAll=(this.isZoneSelAll,!(this.mutiZoneVal.length<this.zoneData.length))}),o()(i,"mutiMallChange",function(){this.getMutiFloor(this.mallVal)}),o()(i,"floorChange",function(){this.getZoneOpt(this.mallVal,this.shopFloorVal)}),o()(i,"getFloorOpt",function(t){var e=this;this.mutiFloorVal=[],this.mutiFloorData=[],this.shopFloorData=[],this.shopFloorVal="",this.floorId="",this.isFloorSelAll=!1,this.axios.get("/floors",{params:{mallId:t,accountId:this.$cookie.get("accountId"),_t:Date.parse(new Date)/1e3}}).then(function(a){if(a.data.data.length>0){var i=JSON.parse(n()(a.data.data));i.unshift({name:e.$t("asisTab.all"),id:""}),e.shopFloorData=i,e.mutiFloorData=a.data.data,e.mutiFloorVal=[a.data.data[0].id],e.mutiFloorVal.length==e.mutiFloorData.length&&(e.isFloorSelAll=!0),e.floorId=(e.panelObj.floorPanel,a.data.data[0].id),e.shopFloorVal=a.data.data[0].id,e.getZoneOpt(t,e.shopFloorVal)}else e.getZoneOpt(t)}).catch(function(t){console.log(t.message,t)})}),o()(i,"getMutiFloor",function(t){var e=this;this.mutiFloorVal=[],this.mutiFloorData=[],this.axios.get("/floors",{params:{mallId:t,accountId:this.$cookie.get("accountId"),_t:Date.parse(new Date)/1e3}}).then(function(t){var a=t.data;a.data.length>0&&(e.mutiFloorData=a.data,e.mutiFloorVal=[a.data[0].id])}).catch(function(t){console.log(t.message)})}),o()(i,"getZoneOpt",function(t,e){var a=this;this.zoneData=[],this.mutiZoneVal=[],this.zoneId="",this.isZoneSelAll=!1,this.axios.get("/zones",{params:{mallId:t,floorId:e,accountId:this.$cookie.get("accountId"),status:1,sortName:'"floor".name, "zone".name',_t:Date.parse(new Date)/1e3}}).then(function(t){t.data.data.length>0&&(a.zoneData=t.data.data,a.zoneId=t.data.data[0].id,a.mutiZoneVal=[t.data.data[0].id],a.mutiZoneVal.length==a.zoneData.length&&(a.isZoneSelAll=!1))}).catch(function(t){console.log(t.message,t)})}),o()(i,"selAllHandle",function(t){var e=this;"mall"===t?this.isMallSelAll?(this.isMallSelAll=!1,this.mutiMallVal.length==this.mallData.length&&(this.mutiMallVal=[])):(this.isMallSelAll=!0,this.mutiMallVal.length==this.mallData.length?this.mutiMallVal=[]:(this.mutiMallVal=[],this.mallData.forEach(function(t){e.mutiMallVal.push(t.id)}))):"floor"===t?this.isFloorSelAll?(this.isFloorSelAll=!1,this.mutiFloorVal.length==this.mutiFloorData.length&&(this.mutiFloorVal=[])):(this.isFloorSelAll=!0,this.mutiFloorVal.length==this.mutiFloorData.length?this.mutiFloorVal=[]:(this.mutiFloorVal=[],this.mutiFloorData.forEach(function(t){e.mutiFloorVal.push(t.id)}))):"gate"===t?this.isGateSelAll?(this.isGateSelAll=!1,this.mutiGateVal.length==this.gateData.length&&(this.mutiGateVal=[])):(this.isGateSelAll=!0,this.mutiGateVal.length==this.gateData.length?this.mutiGateVal=[]:(this.mutiGateVal=[],this.gateData.forEach(function(t){e.mutiGateVal.push(t.id)}))):this.isZoneSelAll?(this.isZoneSelAll=!1,this.mutiZoneVal.length==this.zoneData.length&&(this.mutiZoneVal=[])):(this.isZoneSelAll=!0,this.mutiZoneVal.length==this.zoneData.length?this.mutiZoneVal=[]:(this.mutiZoneVal=[],this.zoneData.forEach(function(t){e.mutiZoneVal.push(t.id)})))}),o()(i,"confirmCondition",function(){var t={asis_level:"",asis_date:"",asis_time:"",asis_org:"",asis_org_name:""};switch(this.asisLevel){case"mall":t.asis_org_name=[],this.paramId=this.mutiMallVal.toString(),t.asis_tit=this.getItemName(this.mallData,this.paramId);break;case"floor":t.asis_org_name=[],this.paramId=this.mutiFloorVal.toString(),t.asis_tit=this.getItemName(this.mallData,this.mallVal.toString())+"-"+this.getItemName(this.mutiFloorData,this.paramId);break;case"gate":if(!this.mutiGateVal.length)return;t.asis_org_name=[],this.paramId=this.mutiGateVal.toString(),t.asis_tit=this.getItemName(this.mallData,this.mallVal.toString())+"-"+this.getItemName(this.gateData,this.paramId);break;case"zone":t.asis_org_name=[],this.paramId=this.mutiZoneVal.toString(),t.asis_tit=this.getItemName(this.mallData,this.mallVal.toString())+"-"+this.getItemName(this.zoneData,this.paramId)}t.asis_level=this.asisLevel,t.asis_date="day",t.asis_time=this.dayTime,t.asis_org=this.paramId,t.asis_kpi=this.kpiVal,this.$emit("reportTime",t)}),o()(i,"filterName",function(t,e){var a=[];return t.forEach(function(t){e.filter(function(e){e==t.id&&a.push(t.name)})}),a}),o()(i,"getItemName",function(t,e){var a="",i=e.split(",")[0];return t.forEach(function(t){t.id==i&&(a=t.name)}),a}),o()(i,"resetRefresh",function(){this.tabClickHandle(0),this.mutiMallVal=[this.mallData[0].id],this.dayTime=dateUnit.dateFormat(new Date,"yyyy-MM")}),i),mounted:function(){this.dayTime=this.dayTime?this.dayTime:dateUnit.dateFormat(new Date,"yyyy-MM")}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"analysis-option-wrapper"},[a("div",{staticClass:"analysis-level-wrapper"},[a("div",{staticClass:"analysis-level-left"},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",{staticClass:"analysis-level-text"},[t._v(t._s(t.$t("asisTab.level")))])]),t._v(" "),a("div",{staticClass:"analysis-level-right"},[a("ul",{staticClass:"analysis-type-box"},t._l(t.tabItem,function(e,i){return a("li",{key:e.value,class:e.className,on:{click:function(e){t.tabClickHandle(i)}}},[a("span",{staticClass:"analysis-item-title"},[t._v(t._s(t.i18nFormatter(e.label)))])])}))])]),t._v(" "),a("div",{staticClass:"panels-content"},[a("div",{staticClass:"panels-main-top"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:t.panelObj.mallPanel,expression:"panelObj.mallPanel"}],staticClass:"condition-box"},[a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.mallT")))]),t._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-select",{staticClass:"mall-sel-box",attrs:{filterable:"",placeholder:t.$t("pholder.shopSelect"),multiple:"","collapse-tags":""},on:{"remove-tag":t.removeTag,change:t.mallChangeHandle},model:{value:t.mutiMallVal,callback:function(e){t.mutiMallVal=e},expression:"mutiMallVal"}},[a("div",{class:t.isMallSelAll?"sel-all-box selected":"sel-all-box",on:{click:function(e){t.selAllHandle("mall")}}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(t.$t("allPages.all")))])]),t._v(" "),t._l(t.mallData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(e.name))])])})],2)],1)])]),t._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.panelObj.floorPanel,expression:"panelObj.floorPanel"}],staticClass:"condition-box"},[a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.mallT")))]),t._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-select",{staticClass:"mall-sel-box",attrs:{filterable:"",placeholder:t.$t("pholder.shopSelect")},on:{change:t.mutiMallChange},model:{value:t.mallVal,callback:function(e){t.mallVal=e},expression:"mallVal"}},t._l(t.mallData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.floorT")))]),t._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-select",{staticClass:"floor-sel-box format-sel-box",attrs:{filterable:"",placeholder:t.$t("pholder.floorSelect"),multiple:"","collapse-tags":""},on:{change:t.floorChangeHandle},model:{value:t.mutiFloorVal,callback:function(e){t.mutiFloorVal=e},expression:"mutiFloorVal"}},[a("div",{class:t.isFloorSelAll?"sel-all-box selected":"sel-all-box",on:{click:function(e){t.selAllHandle("floor")}}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(t.$t("allPages.all")))])]),t._v(" "),t._l(t.mutiFloorData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(e.name))])])})],2)],1)])]),t._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.panelObj.ioPanel,expression:"panelObj.ioPanel"}],staticClass:"condition-box"},[a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.mallT")))]),t._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-select",{staticClass:"mall-sel-box",attrs:{filterable:"",placeholder:t.$t("pholder.shopSelect")},on:{change:t.mallChange},model:{value:t.mallVal,callback:function(e){t.mallVal=e},expression:"mallVal"}},t._l(t.mallData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.inOutT")))]),t._v(" "),a("div",{staticClass:"condition-item-option",staticStyle:{"margin-left":"0.24rem"}},[a("el-select",{staticClass:"mall-sel-box",attrs:{placeholder:t.$t("pholder.gateType"),filterable:"",multiple:"","collapse-tags":""},on:{change:t.gateChangeHandle},model:{value:t.mutiGateVal,callback:function(e){t.mutiGateVal=e},expression:"mutiGateVal"}},[a("div",{class:t.isGateSelAll?"sel-all-box selected":"sel-all-box",on:{click:function(e){t.selAllHandle("gate")}}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(t.$t("allPages.all")))])]),t._v(" "),t._l(t.gateData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(e.name))])])})],2)],1)])]),t._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.panelObj.shopPanel,expression:"panelObj.shopPanel"}],staticClass:"condition-box"},[a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.mallT")))]),t._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-select",{staticClass:"mall-sel-box",attrs:{filterable:"",placeholder:t.$t("pholder.shopSelect")},on:{change:t.mallChange},model:{value:t.mallVal,callback:function(e){t.mallVal=e},expression:"mallVal"}},t._l(t.mallData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.floorT")))]),t._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-select",{staticClass:"floor-sel-box",attrs:{filterable:"",placeholder:t.$t("pholder.floorSelect")},on:{change:t.floorChange},model:{value:t.shopFloorVal,callback:function(e){t.shopFloorVal=e},expression:"shopFloorVal"}},t._l(t.shopFloorData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.storeT")))]),t._v(" "),a("div",{staticClass:"condition-item-option  "},[a("el-select",{staticClass:"shop-sel-box",attrs:{filterable:"",placeholder:t.$t("pholder.areaSelect"),multiple:"","collapse-tags":""},on:{change:t.zoneChangeHandle},model:{value:t.mutiZoneVal,callback:function(e){t.mutiZoneVal=e},expression:"mutiZoneVal"}},[a("div",{class:t.isZoneSelAll?"sel-all-box selected":"sel-all-box",on:{click:function(e){t.selAllHandle("zone")}}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(t.$t("allPages.all")))])]),t._v(" "),t._l(t.zoneData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[a("span",{staticClass:"custom-checkbox__input"},[a("span",{staticClass:"custom-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(e.name))])])})],2)],1)])])]),t._v(" "),a("div",{staticClass:"panels-main-bottom"},[a("ul",{staticClass:"condition-box"},[a("li",{staticClass:"condition-item"},[a("span",{staticClass:"condition-item-text"},[t._v(t._s(t.$t("asisTab.date")))]),t._v(" "),a("div",{staticClass:"condition-item-option"},[a("el-date-picker",{staticClass:"date-input analysis-date-input",attrs:{"value-format":"yyyy-MM",align:"right",type:"month",size:"mini",placeholder:t.$t("pholder.date"),"picker-options":t.pickerOptions1},model:{value:t.dayTime,callback:function(e){t.dayTime=e},expression:"dayTime"}})],1)]),t._v(" "),a("li",{staticClass:"condition-item"},[a("el-button",{staticClass:"primary-btn analysis-collapse-btn",attrs:{type:"primary",size:"samll"},on:{click:t.confirmCondition}},[t._v(t._s(t.$t("button.confirm")))]),t._v(" "),a("el-button",{staticClass:"reset-btn analysis-collapse-btn",attrs:{size:"samll"},on:{click:t.resetRefresh}},[t._v(t._s(t.$t("button.reset")))])],1)])])])])},staticRenderFns:[]},f=a("VU/8")(c,p,!1,function(t){a("SQE8"),a("fw2i")},"data-v-035435ed",null);e.a=f.exports},KoSD:function(t,e){},SQE8:function(t,e){},X673:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"lineToTab",function(){return o});var i=a("mvHQ"),l=a.n(i),o=function(t){var e=[],a=[],i=[],o=JSON.parse(l()(t.xaxis.data));o[o.length]="00:00";for(var s=[],n=0,r=o.length;n<r-1;n++)s.push(o[n]+"-"+o[n+1]);var h=[];(h=t.series.map(function(t){return t.name})).unshift("时间段");var d=function(t){var e=[],a=[];if(t.length<8){e=t.map(function(t){return t});for(var i=0,l=8-t.length;i<l;i++)e.push("--");e.forEach(function(t,e){a.push({prop:"defaultOrg"+e,label:t})})}else t.forEach(function(t,e){a.push({prop:"defaultOrg"+e,label:t})});return a}(h);return t.series.forEach(function(t,e){for(var i=0;i<t.data.length;i++)a[i]=[]}),t.series.forEach(function(t,e){t.data.forEach(function(t,e,i){a[e].push(t)})}),a.forEach(function(t,e){t.unshift(s[e])}),e=a,i=function(t,e){var a={},i=[],l="";return t.forEach(function(t){if(t.length<e.length){for(var o=0,s=t.length;o<s;o++)l=e[o].prop,a[l]=t[o]||0==t[o]?t[o]:"--";for(var n=t.length;n<e.length;n++)l=e[n].prop,a[l]="--"}else for(var r=0,h=t.length;r<h;r++)l=e[r].prop,a[l]=t[r]||0==t[r]?t[r]:"--";i.push(a),a={}}),i}(e,d),{headData:d,bodyData:i}}},fw2i:function(t,e){},qKm0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("4MBJ"),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"base-analysis"},[a("el-header",{attrs:{height:"70px"}},[a("span",{staticClass:"asis-title"},[t._v(t._s(t.asisName)+" "+t._s(t.$t("asis.HappinessIndex")))]),t._v(" "),a("span",{staticClass:"more-option-wrapper",on:{click:t.showCollapse}},[a("span",{staticClass:"more-option-text"},[t._v(t._s(t.$t("asis.moreOp")))]),t._v(" "),a("i",{class:t.moreOptVisible?"el-icon-arrow-down more-option-arrow":"el-icon-arrow-down more-option-arrow more-option-up"})])]),t._v(" "),a("ioflow-option",{directives:[{name:"show",rawName:"v-show",value:t.moreOptVisible,expression:"moreOptVisible"}],ref:"init",attrs:{mallData:t.mallData},on:{reportTime:t.reportHandler,initData:t.initTab}}),t._v(" "),a("div",{staticClass:"element-main ioflow-main"},[a("div",{staticClass:"asis-table-wrapper"},[t.isTabChart?a("h3",{staticClass:"asis-table-header tf-table-header single-report-header"},[a("span",{staticClass:"asis-table-download",on:{click:function(e){t.dealExport("domTrafficFlow",t.i18nFormatter(t.trafficFlow_title))}}},[t._v(t._s(t.$t("allPages.load")))])]):t._e(),t._v(" "),a("div",{class:t.isTabChart?"asis-table-content":"asis-line-content"},[t.isTabChart?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.trafficFlowLoading,expression:"trafficFlowLoading"}],staticClass:"asis-table",staticStyle:{width:"100%"},attrs:{id:"domTrafficFlow",data:t.trafficFlow_ops,"header-row-class-name":"asis-table-head"}},t._l(t.trafficFlow_head,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,fixed:0==e||null,label:t.label,align:"center"}})})):a("io-chart",{staticClass:"tf-chart-box",attrs:{id:"tfChart",options:t.trafficFlow_lineOps,chartType:"TfLine"}}),t._v(" "),t.isTabChart?t._e():a("span",{staticClass:"download-text",on:{click:function(e){t.exportDataHandle("tfChart",t.i18nFormatter(t.trafficFlowing_title),"happyIndex")}}},[t._v(t._s(t.$t("allPages.load")))])],1)])]),t._v(" "),a("export-data-dialog",{ref:"exportDialog"})],1)},staticRenderFns:[]},o=function(t){a("KoSD")},s=a("VU/8")(i.a,l,!1,o,"data-v-98031b80",null);e.default=s.exports}});